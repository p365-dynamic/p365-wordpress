var coreCompApp=angular.module("CoreComponentApp",[]),request={},header={},leadSource={},browser=get_browser_info();coreCompApp.service("RestAPI",function($http){$http.defaults.useXDomain=!0,this.invoke=function(method,data){return header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.deviceId=deviceIdOrigin,header.browser=browser.name+" V - "+browser.version,header.transactionName=method,data.campaign_id=campaign_id,data.requestSource=sourceOrigin,data.messageId=messageIDVar,request.header=header,request.body=data,$http({method:"POST",url:"https://mservices.policies365.com/cxf/authrestservices/integrate/invoke",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"},data:request}).then(function(callback,status,headers,config){return function(str){try{JSON.parse(str)}catch(e){return!1}return!0}(callback.data)?JSON.parse(callback.data):callback.data},function(error,status,headers,config){return error})}}),angular.module("contact",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("contactController",["$scope","$window","$rootScope","$location","$http","RestAPI","localStorageService",function($scope,$window,$rootScope,$location,$http,RestAPI,localStorageService){$window.scrollTo(0,0),$scope.emailSendCfrmStatus=!1,$scope.inputValidStatus=!1,$scope.composeEmail={},$scope.composeEmail.paramMap={},$scope.composeEmail.paramMap.ticketType="query",$scope.composeEmail.paramMap.insuranceType="car",$scope.sendEmail=function(){$scope.contactUsForm.$invalid?($scope.inputValidStatus=!0,angular.forEach($scope.contactUsForm.$invalid,function(field){field.$setTouched()})):($scope.inputValidStatus=!1,"query"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType=$scope.globalLabel.functionType.query:"complaint"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType=$scope.globalLabel.functionType.complaint:"request"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType=$scope.globalLabel.functionType.request:$scope.composeEmail.funcType=$scope.globalLabel.functionType.userEnquiry,RestAPI.invoke($scope.globalLabel.transactionName.userEnquiry,$scope.composeEmail).then(function(callback){console.log("call back details"+JSON.stringify($scope.composeEmail)),$scope.emailSendCfrmStatus=!0,$scope.composeEmail=""}))}}]),angular.module("dashboard",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("dashboardController",["$scope","$window","$rootScope","$location","$http","RestAPI","localStorageService",function($scope,$window,$rootScope,$location,$http,RestAPI,localStorageService){$scope.p365Labels=profileLabels,$rootScope.title=$scope.p365Labels.policies365Title.dashboard,$rootScope.wp_path=wp_path,$scope.userPoliciesSection=wp_path+"common/html/UserPoliciesSection.html",$scope.myProfileSection=wp_path+"common/html/MyProfileSection.html",$scope.riskAndInsuranceProfileSection=wp_path+"common/html/RiskAndInsuranceProfileSection.html",$scope.insuranceAssessmentHTML=wp_path+"buy/common/html/insuranceAssessment.html",$scope.myQuoteSection=wp_path+"common/html/myQuoteSection.html",$scope.myProposalSection=wp_path+"common/html/myProposalSection.html",console.log("inside dashboard controller"),localStorageService.get("userLoginInfo")&&($(".logout_link").closest("li").attr("style","display:inline-block !important"),$scope.userLoginInfo=localStorageService.get("userLoginInfo"),$scope.userLoginInfo.username&&($(".signin_link").text($scope.userLoginInfo.username+" Account "),localStorage.setItem("loggedIn","true"))),$scope.modalSucess=!1,$scope.carrierLogoList={},$scope.carReponseToken={},$scope.userProfileDetails={},$scope.userProfileInfo={},$scope.userLoginInfo={},$scope.profession={},$scope.currentPage=1,$scope.pageSize=5,$scope.sort=function(keyname){$scope.sortBy=keyname,$scope.reverse=!$scope.reverse},$scope.minimumFlag=!0,$scope.toggleMinimum=function(){$scope.minimumFlag=!$scope.minimumFlag},$scope.recommendedFlag=!0,$scope.toggleRecommended=function(){$scope.recommendedFlag=!$scope.recommendedFlag},$scope.comprehensiveFlag=!0,$scope.toggleComprehensive=function(){$scope.comprehensiveFlag=!$scope.comprehensiveFlag},$scope.makeInsuranceAssessmentBlocksReady=function(_insuranceAssessmentResponse){if(null!=_insuranceAssessmentResponse&&void 0!=_insuranceAssessmentResponse&&""!=_insuranceAssessmentResponse){for(let index=0;index<_insuranceAssessmentResponse.length;index++)"Health"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=1:"Life"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=2:"Car"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=3:"Bike"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=4:"Retirement"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=5:"Critical Illness"==_insuranceAssessmentResponse[index].insuranceLabel?_insuranceAssessmentResponse[index].displayOrder=6:_insuranceAssessmentResponse[index].displayOrder=7,"veryLow"==_insuranceAssessmentResponse[index].insCatAsPerRisk?_insuranceAssessmentResponse[index].insCatAsPerRiskDisplayLabel="Very Low":"veryHigh"==_insuranceAssessmentResponse[index].insCatAsPerRisk?_insuranceAssessmentResponse[index].insCatAsPerRiskDisplayLabel="Very High":"medium"==_insuranceAssessmentResponse[index].insCatAsPerRisk?_insuranceAssessmentResponse[index].insCatAsPerRiskDisplayLabel="Medium":"high"==_insuranceAssessmentResponse[index].insCatAsPerRisk?_insuranceAssessmentResponse[index].insCatAsPerRiskDisplayLabel="High":"low"==_insuranceAssessmentResponse[index].insCatAsPerRisk&&(_insuranceAssessmentResponse[index].insCatAsPerRiskDisplayLabel="Low");$scope.insuranceAssessmentRes=_insuranceAssessmentResponse}else null==_insuranceAssessmentResponse?console.log("Unable to make insurance assessment chart ready caused by _insuranceAssessmentResponse is null"):""==_insuranceAssessmentResponse?console.log("Unable to make insurance assessment chart ready caused by _insuranceAssessmentResponse is empty"):void 0==_insuranceAssessmentResponse&&console.log("Unable to make insurance assessment chart ready caused by _insuranceAssessmentResponse is undefined")},$scope.plotChart=function(_chartType,_chartTitle,_xAxisTitles,_yAxisTitle,_data){"bar"==_chartType.toLowerCase()?($scope.chartTitle=_chartTitle,$scope.xaxis=_xAxisTitles,$scope.yAxisTitle=_yAxisTitle,$scope.chartType=_chartType,$scope.items=_data,$scope.isChartReady=!0):"pie"==_chartType.toLowerCase()&&($scope.chartTitle=_chartTitle,$scope.dataItems=_data,$scope.isChartReady=!0)},$scope.makeRiskProfileChartReady=function(_riskProfileResponse){if(null!=_riskProfileResponse&&void 0!=_riskProfileResponse&&""!=_riskProfileResponse){var _length_one=_riskProfileResponse.length,legends=new Array(_length_one),_series=new Array(_length_one),_collectedData=[];for(let index=0;index<_length_one;index++){const element=_riskProfileResponse[index];legends[index]=element.name;var _length_tow=element.applicableRisk.length,_xAxisTitles=new Array(_length_tow);new Array(_length_tow);for(let j=0;j<_length_tow;j++){const element_two=element.applicableRisk[j];var _dataElement={};_xAxisTitles[j]=element_two.riskLabel,_dataElement.name=element_two.riskLabel,_dataElement.y=element_two.riskValue,"veryLow"==element_two.riskCat?_dataElement.riskPriority="Very Low":"veryHigh"==element_two.riskCat?_dataElement.riskPriority="Very High":"high"==element_two.riskCat?_dataElement.riskPriority="High":"low"==element_two.riskCat?_dataElement.riskPriority="Low":"medium"==element_two.riskCat&&(_dataElement.riskPriority="Medium"),_collectedData.push(_dataElement)}}_series=_collectedData,$scope.risk_xAxisTitles=_xAxisTitles,$scope.risk_series=_series,$scope.risk_legends=legends,$scope.plotChart("pie","",_xAxisTitles,"",_series)}else null==_riskProfileResponse?console.error("Unable to make risk profile chart ready caused by _riskProfileResponse is null"):""==_riskProfileResponse?console.error("Unable to make risk profile chart ready caused by _riskProfileResponse is empty"):void 0==_riskProfileResponse&&console.error("Unable to make risk profile chart ready caused by _riskProfileResponse is undefined")},$scope.createRiskProfile=function(){$location.path("/professionalJourney")};var readQuote=!0;$scope.readProfessionalQuoteID=function(PROF_QUOTE_ID){if(PROF_QUOTE_ID){if(PROF_QUOTE_ID&&readQuote){$scope.profQuoteIdAvailable=!0;var _request={};_request.docId=PROF_QUOTE_ID,_request.lob=0,RestAPI.invoke("quoteDataReader",_request).then(function(_professionalQuoteCallback){if(1e3==_professionalQuoteCallback.responseCode){var _professionalQuoteData=_professionalQuoteCallback.data;if(_professionalQuoteData){if(_professionalQuoteData.riskDetails&&_professionalQuoteData.riskDetails.algResponse){var riskProfile=_professionalQuoteData.riskDetails.algResponse.riskAnalysis,insuranceAssessment=_professionalQuoteData.riskDetails.algResponse.insuranceAnalysis;_professionalQuoteData.riskDetails.algResponse.productAnalysis;$scope.makeInsuranceAssessmentBlocksReady(insuranceAssessment),$scope.makeRiskProfileChartReady(riskProfile),readQuote=!1}_professionalQuoteData.profession&&($scope.profession.professionName=_professionalQuoteData.profession)}}})}}else $scope.profQuoteIdAvailable=!1,readQuote=!0},$scope.viewQuotes=function(quote){quote.QUOTE_ID&&quote.businessLineId?$window.location=shareQuoteLink+quote.QUOTE_ID+"&LOB="+quote.businessLineId:$rootScope.P365Alert("Policies365","We are not able fetch quotes for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok")},$scope.viewProposal=function(proposal){proposal.proposalId&&proposal.businessLineId?$window.location=sharePaymentLink+proposal.proposalId+"&LOB="+proposal.businessLineId:$rootScope.P365Alert("Policies365","We are not able fetch proposal for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok")},$scope.carrierLogoList=localStorageService.get("carrierLogoList"),$scope.carReponseToken=localStorageService.get("carReponseToken"),$scope.userProfileDetails=localStorageService.get("userProfileDetails"),console.log("$scope.userProfileDetails",$scope.userProfileDetails),$scope.userProfileDetails.profileDetails&&($scope.profileDetails=$scope.userProfileDetails.prospectDetails),$scope.userProfileDetails&&$scope.userProfileDetails.prospectDetails&&($scope.userProfileDetails.prospectDetails.personalDetails&&($scope.commonInfo=$scope.userProfileDetails.prospectDetails.personalDetails.commonInfo,$scope.profession=$scope.userProfileDetails.prospectDetails.personalDetails.profession),$scope.showMyQuotes=function(quotes){angular.forEach(quotes,function(quote){$scope.userProfileDetails.prospectDetails&&(1==quote.businessLineId&&""!=quote.Life&&$scope.userProfileDetails.prospectDetails.personalDetails?quote.showQuoteId=!0:2==quote.businessLineId&&""!=quote.Bike&&$scope.userProfileDetails.prospectDetails.vehicleDetails?$scope.userProfileDetails.prospectDetails.vehicleDetails.bikeInfo&&(quote.showQuoteId=!0):3==quote.businessLineId&&""!=quote.Car&&$scope.userProfileDetails.prospectDetails.vehicleDetails?$scope.userProfileDetails.prospectDetails.vehicleDetails.carInfo&&(quote.showQuoteId=!0):4==quote.businessLineId&&""!=quote.Health&&$scope.userProfileDetails.prospectDetails.familyDetails?quote.showQuoteId=!0:(quote.businessLineId,quote.showQuoteId=!1))}),$scope.myQuotes=angular.copy(quotes)},$scope.showMyQuotes($scope.userProfileDetails.prospectDetails.lobQuoteId),$scope.showMyProposals=function(proposals){angular.forEach(proposals,function(proposal){$scope.userProfileDetails.prospectDetails&&(1==proposal.businessLineId&&""!=proposal.proposalId&&$scope.userProfileDetails.prospectDetails.personalDetails?proposal.showProposalId=!0:2==proposal.businessLineId&&""!=proposal.proposalId&&$scope.userProfileDetails.prospectDetails.vehicleDetails?$scope.userProfileDetails.prospectDetails.vehicleDetails.bikeInfo&&(proposal.showProposalId=!0):3==proposal.businessLineId&&""!=proposal.proposalId&&$scope.userProfileDetails.prospectDetails.vehicleDetails?$scope.userProfileDetails.prospectDetails.vehicleDetails.carInfo&&(proposal.showProposalId=!0):4==proposal.businessLineId&&""!=proposal.proposalId&&$scope.userProfileDetails.prospectDetails.familyDetails?proposal.showProposalId=!0:(5==proposal.businessLineId&&proposal.proposalId,proposal.showProposalId=!1))}),$scope.myProposal=angular.copy(proposals)},$scope.showMyProposals($scope.userProfileDetails.prospectDetails.lobProposalId),$scope.PROF_QUOTE_ID=$scope.userProfileDetails.prospectDetails.profQuoteId,$scope.readProfessionalQuoteID($scope.PROF_QUOTE_ID),$scope.userProfileDetails.prospectDetails.addressDetails&&($scope.addressDetails=$scope.userProfileDetails.prospectDetails.addressDetails.address),$scope.userProfileDetails.prospectDetails.familyDetails&&($scope.familyComp=$scope.userProfileDetails.prospectDetails.familyDetails.familyComp),$scope.userProfileDetails.prospectDetails.vehicleDetails&&($scope.vehicleDetails=$scope.userProfileDetails.prospectDetails.vehicleDetails,$scope.vehicleDetails.carInfo&&($scope.vehicleDetails.carInfo.registrationNumber?$rootScope.showCarRegAreaStatus=!1:$rootScope.showCarRegAreaStatus=!0),$scope.vehicleDetails.bikeInfo&&($scope.vehicleDetails.bikeInfo.registrationNumber?$rootScope.showBikeRegAreaStatus=!1:$rootScope.showBikeRegAreaStatus=!0))),$scope.userLoginInfo=localStorageService.get("userLoginInfo"),console.log(localStorageService.get("userLoginInfo")),$scope.userProfileDetailsCopy=angular.copy($scope.userProfileDetails),$scope.genderType=genderTypeGeneric,$scope.myProfileStatus=!1,$scope.myPolicyStatus=!0,$scope.modalPolicySummary=!1,$scope.todayDate=new Date,$scope.businessLineLogo={1:wp_path+"img/instantIcon/life_grey.png",2:wp_path+"img/instantIcon/bike_grey.png",3:wp_path+"img/instantIcon/carIcon1.png",4:wp_path+"img/instantIcon/health_grey.png",5:wp_path+"img/instantIcon/travel_grey.png"},$scope.tabs=[{title:"My Policies",id:1,url:"myPolicies.tpl.html",className:"tabs policyTab"},{title:"My Profile",id:2,url:"myProfile.tpl.html",className:"tabs profileTab"}],$scope.initDashboard=function(){var dateOption={minimumYearLimit:"-100Y",maximumYearLimit:"-18Y",changeMonth:!0,changeYear:!0,dateFormat:"dd/mm/yy"};$scope.userDateOfBirthOptions=setP365DatePickerProperties(dateOption)},$scope.initDashboard(),$scope.currentTab="myPolicies.tpl.html",$scope.onClickTab=function(tab){$scope.currentTab=tab.url},$scope.isActiveTab=function(tabUrl){return tabUrl==$scope.currentTab},0==$scope.userLoginInfo.status?($rootScope.userLoginStatus=!1,$location.path("/quote")):($rootScope.userLoginStatus=!0,$scope.userProfileDetails.profileDetails&&($scope.userPolices=$scope.userProfileDetails.profileDetails.proposalDetails),$rootScope.username=void 0!=$scope.userLoginInfo.username?$scope.userLoginInfo.username:$scope.userLoginInfo.mobileNumber),$scope.hideModal=function(){$scope.modalSucess=!1},$scope.submitBtn=!1,$scope.editBtn=!0,$scope.toggleChange=function(toggleAction){if($(".firstPane").addClass("opened"),$(".firstPaneContent").show(),1==$(".viewDiv").is(":visible"))$(".modifyDiv").slideDown(),$(".viewDiv").slideUp(),$scope.editBtn=!1,$scope.submitBtn=!0,$scope.cancelBtn=!0;else if(1==$(".modifyDiv").is(":visible"))if("submit"==toggleAction){$(".viewDiv").slideDown(),$(".modifyDiv").slideUp(),$scope.editBtn=!0,$scope.cancelBtn=!1,$scope.submitBtn=!1;var userProfile={};userProfile.firstName=$scope.userProfileDetails.firstName,userProfile.lastName=$scope.userProfileDetails.lastName,userProfile.gender=$scope.userProfileDetails.gender,userProfile.dateOfBirth=$scope.userProfileDetails.dateOfBirth,userProfile.emailId=$scope.userProfileDetails.emailId,userProfile.mobile=$scope.userProfileDetails.mobile,getDocUsingParam(RestAPI,"profileDetails",userProfile,function(responseProfile){responseProfile.responseCode==$scope.p365Labels.responseCode.success?($scope.userProfileDetails=responseProfile.data,localStorageService.set("userProfileDetails",$scope.userProfileDetails),$scope.modalSucess=!0,$scope.profileStatus="Profile updated successfully"):($scope.modalSucess=!0,$scope.profileStatus="Technical Issue, please try again later")})}else $(".viewDiv").slideDown(),$(".modifyDiv").slideUp(),$scope.editBtn=!0,$scope.cancelBtn=!1,$scope.submitBtn=!1,$scope.userProfileDetails=$scope.userProfileDetailsCopy},$scope.purchaseStatement=function(){if(4==$scope.selectedPolicyDetails.businessLineId){$scope.selectedPolicyDetails.policyDetails.policyProductType="Health";for(var i=0;i<$scope.selectedPolicyDetails.insuredDetails.insuredMembers.length;i++)$scope.selectedPolicyDetails.insuredDetails.insuredMembers[i].dateOfBirth&&($scope.selectedPolicyDetails.insuredDetails.insuredMembers[i].age=calculateAgeByDOB(String($scope.selectedPolicyDetails.insuredDetails.insuredMembers[i].dateOfBirth)))}localStorageService.set("policyDocDetails",$scope.selectedPolicyDetails),1==$scope.selectedPolicyDetails.businessLineId||(2==$scope.selectedPolicyDetails.businessLineId?$location.path("/bikepolicypurchase"):3==$scope.selectedPolicyDetails.businessLineId?$location.path("/carpolicypurchase"):5==$scope.selectedPolicyDetails.businessLineId?$location.path("/travelpolicypurchase"):$location.path("/medicalPurchasing"))},$scope.viewPolicySummary=function(selectedPolicy){delete selectedPolicy.$$hashKey,$scope.modalPolicySummary=!0,$scope.policySecretKey=selectedPolicy.secretKey,$scope.policyDocData={},$scope.policyDocData.uKey=$scope.userProfileDetails.profileDetails.secretKey,$scope.policyDocData.pKey=selectedPolicy.secretKey,getDocUsingParam(RestAPI,$scope.p365Labels.transactionName.getPurchaseStatement,$scope.policyDocData,function(policyDoc){policyDoc.responseCode==$scope.p365Labels.responseCode.success?($scope.selectedPolicyDetails=policyDoc.data,$scope.selectedPolicyDetails&&$scope.selectedPolicyDetails.businessLineId?$scope.purchaseStatement():$rootScope.P365Alert("Policies365","Your Policy is not  yet available.please,try after 30 minutes","Ok")):$rootScope.P365Alert("Policies365","Your Policy is not  yet available.please,try after 30 minutes","Ok")})},$scope.viewPolicyDocument=function(selectedPolicy){delete selectedPolicy.$$hashKey,$scope.modalPolicySummary=!0,$scope.policySecretKey=selectedPolicy.secretKey,$scope.policyDocData={},$scope.policyDocData.uKey=$scope.userProfileDetails.profileDetails.secretKey,$scope.policyDocData.pKey=selectedPolicy.secretKey,RestAPI.invoke("policyDocDownloadService",$scope.policyDocData).then(function(policyDoc){if($scope.policyDocumentResp=policyDoc,1e3==$scope.policyDocumentResp.responseCode)if("DownloadDocument"==$scope.policyDocumentResp.performDocumentAction){var pdfName=$scope.policyDocumentResp.data.policyNo+".pdf";kendo.saveAs({dataURI:$scope.policyDocumentResp.data.policyDocData,fileName:pdfName})}else $window.open($scope.policyDocumentResp.data.policyDocData,"_blank");else $rootScope.P365Alert("Policies365","Your Policy is not  yet available.please,try after 30 minutes","Ok")})},$scope.generateHealthCard=function(){},$scope.openMenu=function($mdOpenMenu,ev){$mdOpenMenu(ev),setTimeout(function(){$(".md-click-catcher").click(function(){$scope.activeMenu=""})},100)},$rootScope.signout=function(){$rootScope.userLoginStatus=!1;var userLoginInfo={username:void 0};userLoginInfo.status=$rootScope.userLoginStatus,localStorageService.set("userLoginInfo",userLoginInfo),$location.path("/quote")},$rootScope.showLoginForm=function(){$rootScope.userLoginStatus=!1},$scope.showRenewPolicyModal=function(policyData){policyData&&($scope.userPolicyData=policyData,console.log($scope.userPolicyData.renewPolicyDetails.QUOTE_ID),localStorageService.set("renewPolicyDetails",policyData.renewPolicyDetails),$window.location=shareQuoteLink+$scope.userPolicyData.renewPolicyDetails.QUOTE_ID+"&LOB="+policyData.businessLineId)};$location.path();var redirectURL=$location.$$absUrl;$location.search().proposalId;redirectURL=redirectURL.split("?")[0],$scope.hideRenewPolicyModal=function(){$scope.renewPolicyModal=!1},$scope.gotoResultScreen=function(){$scope.renewPolicyModal=!1},$scope.gotoProposalScreen=function(){$scope.renewPolicyModal=!1,$location.path("/proposalresdata").search({proposalId:$scope.userPolicyData.renewPolicyDetails.proposalId,LOB:$scope.userPolicyData.businessLineId})}}]);var sessionIDvar,defaultMetroListVar=[{cityName:"Hyderabad",RTODetails:[{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"HYDERABAD",trafficeIndex:0,zone:"ZoneB",display:"AP-09 Hyderabad",regisCode:"AP09",state:"Andhra Pradesh",isCostal:"N",pollutionIndex:1,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"SECUNDERABAD",trafficeIndex:0,zone:"ZoneB",display:"AP-10 Secunderabad",regisCode:"AP10",state:"Andhra Pradesh",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"MALAKPET HYDERABAD EAST",trafficeIndex:0,zone:"ZoneB",display:"AP-11 Malakpet Hyderabad East",regisCode:"AP11",state:"Andhra Pradesh",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"KISANBAGH HYDERABAD SOUTH",trafficeIndex:0,zone:"ZoneB",display:"AP-12 Kisanbagh Hyderabad South",regisCode:"AP12",state:"Andhra Pradesh",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"TOLI CHOWKI HYDERABAD WEST",trafficeIndex:0,zone:"ZoneB",display:"AP-13 Toli Chowki Hyderabad West",regisCode:"AP13",state:"Andhra Pradesh",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"HYDERABAD",trafficeIndex:0,zone:"ZoneB",display:"TS-14 Hyderabad",regisCode:"TS14",state:"Telangana",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"HYDERABAD CENTRAL",trafficeIndex:0,zone:"ZoneB",display:"TS-09 Hyderabad Central",regisCode:"TS09",state:"Telangana",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"MALAKPET HYDERABAD EAST",trafficeIndex:0,zone:"ZoneB",display:"TS-11 Malakpet Hyderabad East",regisCode:"TS11",state:"Telangana",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"TOLI CHOWKI HYDERABAD WEST",trafficeIndex:0,zone:"ZoneB",display:"TS-13 Toli Chowki Hyderabad West",regisCode:"TS13",state:"Telangana",isCostal:"N",pollutionIndex:0,popularCityName:"Hyderabad"}]},{cityName:"Delhi",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"DELHI NORTH HILL ROAD",trafficeIndex:1,zone:"ZoneA",display:"DL-01 Delhi North Hill Road",regisCode:"DL01",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"NEW DELHI",trafficeIndex:1,zone:"ZoneA",display:"DL-02 New Delhi",regisCode:"DL02",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"SOUTH DELHI",trafficeIndex:1,zone:"ZoneA",display:"DL-03 South Delhi",regisCode:"DL03",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"DELHI WEST RAJA GARDEN",trafficeIndex:1,zone:"ZoneA",display:"DL-04 Delhi West Raja Garden",regisCode:"DL04",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"DELHI NORTH LONI ROAD",trafficeIndex:1,zone:"ZoneA",display:"DL-05 Delhi North Loni Road",regisCode:"DL05",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"DELHI CENTRAL SARAI KALE KHAN",trafficeIndex:1,zone:"ZoneA",display:"DL-06 Delhi Central Sarai Kale Khan",regisCode:"DL06",state:"Delhi",isCostal:"N",pollutionIndex:1,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"DELHI EAST",trafficeIndex:0,zone:"ZoneA",display:"DL-07 Delhi East",regisCode:"DL07",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"NORTH WEST DELHI",trafficeIndex:0,zone:"ZoneA",display:"DL-08 North West Delhi",regisCode:"DL08",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"SOUTH WEST DELHI",trafficeIndex:0,zone:"ZoneA",display:"DL-09 South West Delhi",regisCode:"DL09",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"WEST DELHI",trafficeIndex:0,zone:"ZoneA",display:"DL-10 West Delhi",regisCode:"DL10",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"NORTH WEST DELHI",trafficeIndex:0,zone:"ZoneA",display:"DL-11 North West Delhi",regisCode:"DL11",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"SOUTH WEST DELHI VASANT VIHAR",trafficeIndex:0,zone:"ZoneA",display:"DL-12 South West Delhi Vasant Vihar",regisCode:"DL12",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"EAST DELHI SHAHDARA",trafficeIndex:0,zone:"ZoneA",display:"DL-13 East Delhi Shahdara",regisCode:"DL13",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"SONIPAT",trafficeIndex:0,zone:"ZoneA",display:"DL-14 Sonipat",regisCode:"DL14",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Delhi"}]},{cityName:"Gurgaon",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"GURGAON",trafficeIndex:0,zone:"ZoneA",display:"DL-15 Gurgaon",regisCode:"DL15",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Gurgaon"},{floodIndex:1,isEarthQuakeArea:"N",crimeIndex:1,city:"GURGAON",trafficeIndex:1,zone:"ZoneB",display:"HR-26 Gurgaon",regisCode:"HR26",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Gurgaon"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"GURGAON",trafficeIndex:0,zone:"ZoneB",display:"HR-55 Gurgaon",regisCode:"HR55",state:"Haryana",isCostal:"N",pollutionIndex:1,popularCityName:"Gurgaon"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"GURGAON",trafficeIndex:0,zone:"ZoneB",display:"HR-72 Gurgaon",regisCode:"HR72",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Gurgaon"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"PATAUDI",trafficeIndex:0,zone:"ZoneB",display:"HR-76 Pataudi",regisCode:"HR76",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Gurgaon"}]},{cityName:"Faridabad",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"FARIDABAD",trafficeIndex:0,zone:"ZoneA",display:"DL-16 Faridabad",regisCode:"DL16",state:"Delhi",isCostal:"N",pollutionIndex:0,popularCityName:"Faridabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BALLABGARH",trafficeIndex:0,zone:"ZoneB",display:"HR-29 Ballabgarh",regisCode:"HR29",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Faridabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"FARIDABAD",trafficeIndex:0,zone:"ZoneB",display:"HR-38 Faridabad",regisCode:"HR38",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Faridabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"FARIDABAD",trafficeIndex:0,zone:"ZoneB",display:"HR-51 Faridabad",regisCode:"HR51",state:"Haryana",isCostal:"N",pollutionIndex:0,popularCityName:"Faridabad"}]},{cityName:"Ahmedabad",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"AHMEDABAD",trafficeIndex:0,zone:"ZoneA",display:"GJ-01 Ahmedabad",regisCode:"GJ01",state:"Gujarat",isCostal:"N",pollutionIndex:0,popularCityName:"Ahmedabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"AHMEDABAD EAST",trafficeIndex:0,zone:"ZoneB",display:"GJ-27 Ahmedabad East",regisCode:"GJ27",state:"Gujarat",isCostal:"N",pollutionIndex:0,popularCityName:"Ahmedabad"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"GIR SOMNATH VERAVAL",trafficeIndex:0,zone:"ZoneB",display:"GJ-38 Gir Somnath Veraval",regisCode:"GJ38",state:"Gujarat",isCostal:"N",pollutionIndex:0,popularCityName:"Ahmedabad"}]},{cityName:"Bangalore",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"BANGALORE KORMANGALA",trafficeIndex:1,zone:"ZoneA",display:"KA-01 Bangalore Kormangala",regisCode:"KA01",state:"Karnataka",isCostal:"N",pollutionIndex:1,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"BANGALORE RAJAJINAGAR",trafficeIndex:1,zone:"ZoneA",display:"KA-02 Bangalore Rajajinagar",regisCode:"KA02",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"BANGALORE INDIRANAGAR",trafficeIndex:1,zone:"ZoneA",display:"KA-03 Bangalore Indiranagar",regisCode:"KA03",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"BANGALORE YASHWANTHPUR",trafficeIndex:1,zone:"ZoneA",display:"KA-04 Bangalore Yashwanthpur",regisCode:"KA04",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"BANGALORE JAYANAGAR",trafficeIndex:1,zone:"ZoneA",display:"KA-05 Bangalore Jayanagar",regisCode:"KA05",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BANGALORE KENGERI",trafficeIndex:0,zone:"ZoneB",display:"KA-41 Bangalore Kengeri",regisCode:"KA41",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"RAMANAGAR",trafficeIndex:0,zone:"ZoneB",display:"KA-42 Ramanagar",regisCode:"KA42",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"DEVANAHALLI BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-43 Devanahalli Bangalore",regisCode:"KA43",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BANGALORE YALAHANKA",trafficeIndex:0,zone:"ZoneB",display:"KA-50 Bangalore Yalahanka",regisCode:"KA50",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BANGALORE ELECTRONIC CITY",trafficeIndex:0,zone:"ZoneB",display:"KA-51 Bangalore Electronic City",regisCode:"KA51",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"NELAMANGALA BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-52 Nelamangala Bangalore",regisCode:"KA52",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BANGALORE KRISHNARAJPURAM",trafficeIndex:0,zone:"ZoneB",display:"KA-53 Bangalore Krishnarajpuram",regisCode:"KA53",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"SHANTINAGAR BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-57 Shantinagar Bangalore",regisCode:"KA57",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHAMRAJPET BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-59 Chamrajpet Bangalore",regisCode:"KA59",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"RT NAGAR BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-60 RT Nagar Bangalore",regisCode:"KA60",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"MARATHAHALLI BANGALORE",trafficeIndex:0,zone:"ZoneB",display:"KA-61 Marathahalli Bangalore",regisCode:"KA61",state:"Karnataka",isCostal:"N",pollutionIndex:0,popularCityName:"Bangalore"}]},{cityName:"Mumbai",RTODetails:[{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"MUMBAI",trafficeIndex:1,zone:"ZoneA",display:"MH-01 Mumbai Tardeo",regisCode:"MH01",state:"Maharashtra",isCostal:"N",pollutionIndex:1,popularCityName:"Mumbai"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"MUMBAI ANDHERI",trafficeIndex:1,zone:"ZoneA",display:"MH-02 Mumbai Andheri",regisCode:"MH02",state:"Maharashtra",isCostal:"Y",pollutionIndex:1,popularCityName:"Mumbai"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"MUMBAI WORLI",trafficeIndex:1,zone:"ZoneA",display:"MH-03 Mumbai Worli",regisCode:"MH03",state:"Maharashtra",isCostal:"Y",pollutionIndex:1,popularCityName:"Mumbai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:1,city:"THANE MUMBAI",trafficeIndex:0,zone:"ZoneB",display:"MH-04 Thane Mumbai",regisCode:"MH04",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Mumbai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:1,city:"KALYAN MUMBAI",trafficeIndex:0,zone:"ZoneB",display:"MH-05 Kalyan Mumbai",regisCode:"MH05",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Mumbai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"NAVI MUMBAI",trafficeIndex:0,zone:"ZoneB",display:"MH-43 Navi Mumbai",regisCode:"MH43",state:"Maharashtra",isCostal:"Y",pollutionIndex:0,popularCityName:"Mumbai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BORIVALI MUMBAI",trafficeIndex:0,zone:"ZoneB",display:"MH-47 Borivali Mumbai",regisCode:"MH47",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Mumbai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"VIRAR VASAI MUMBAI",trafficeIndex:0,zone:"ZoneB",display:"MH-48 Virar Vasai Mumbai",regisCode:"MH48",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Mumbai"}]},{cityName:"Pune",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:1,city:"PUNE",trafficeIndex:1,zone:"ZoneA",display:"MH-12 Pune",regisCode:"MH12",state:"Maharashtra",isCostal:"N",pollutionIndex:1,popularCityName:"Pune"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"PIMPRI CHINCHWAD",trafficeIndex:0,zone:"ZoneB",display:"MH-14 Pimpri Chinchwad",regisCode:"MH14",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Pune"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"BARAMATI",trafficeIndex:0,zone:"ZoneB",display:"MH-42 Baramati",regisCode:"MH42",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Pune"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"PUNE SOUTH",trafficeIndex:0,zone:"ZoneB",display:"MH-53 Pune South",regisCode:"MH53",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Pune"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"PUNE NORTH",trafficeIndex:0,zone:"ZoneB",display:"MH-54 Pune North",regisCode:"MH54",state:"Maharashtra",isCostal:"N",pollutionIndex:0,popularCityName:"Pune"}]},{cityName:"Chennai",RTODetails:[{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI TONDIARPET",trafficeIndex:0,zone:"ZoneA",display:"TN-03 Chennai Tondiarpet",regisCode:"TN03",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI AYANAVARAM",trafficeIndex:0,zone:"ZoneA",display:"TN-01 Chennai Ayanavaram",regisCode:"TN01",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI ANNANAGAR",trafficeIndex:0,zone:"ZoneA",display:"TN-02 Chennai Annanagar",regisCode:"TN02",state:"Tamil Nadu",isCostal:"Y",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI KOLATHUR",trafficeIndex:0,zone:"ZoneA",display:"TN-04 Chennai Kolathur",regisCode:"TN04",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI NORTH",trafficeIndex:0,zone:"ZoneA",display:"TN-05 Chennai North",regisCode:"TN05",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI MANDAVELI",trafficeIndex:0,zone:"ZoneA",display:"TN-06 Chennai Mandaveli",regisCode:"TN06",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI THIRUVANMIYUR",trafficeIndex:0,zone:"ZoneA",display:"TN-07 Chennai Thiruvanmiyur",regisCode:"TN07",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"Y",crimeIndex:0,city:"CHENNAI KK NAGAR",trafficeIndex:0,zone:"ZoneA",display:"TN-09 Chennai KK Nagar",regisCode:"TN09",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI VIRUGAMBAKKAM",trafficeIndex:0,zone:"ZoneA",display:"TN-10 Chennai Virugambakkam",regisCode:"TN10",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI TAMBARAM",trafficeIndex:0,zone:"ZoneA",display:"TN-11 Chennai Tambaram",regisCode:"TN11",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI POONAMALLEE",trafficeIndex:0,zone:"ZoneA",display:"TN-12 Chennai Poonamallee",regisCode:"TN12",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI AMBATTUR",trafficeIndex:0,zone:"ZoneA",display:"TN-13 Chennai Ambattur",regisCode:"TN13",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI SHOLINGANALLUR",trafficeIndex:0,zone:"ZoneA",display:"TN-14 Chennai Sholinganallur",regisCode:"TN14",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI RED HILLS",trafficeIndex:0,zone:"ZoneA",display:"TN-18 Chennai Red Hills",regisCode:"TN18",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"MEENAMBAKKAM CHENNAI",trafficeIndex:0,zone:"ZoneB",display:"TN-22 Meenambakkam Chennai",regisCode:"TN22",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"CHENNAI SOUTH WEST",trafficeIndex:0,zone:"ZoneB",display:"TN-85 Chennai South West",regisCode:"TN85",state:"Tamil Nadu",isCostal:"N",pollutionIndex:0,popularCityName:"Chennai"}]},{cityName:"Kolkata",RTODetails:[{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA",trafficeIndex:1,zone:"ZoneA",display:"WB-01 Kolkata",regisCode:"WB01",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA",trafficeIndex:1,zone:"ZoneA",display:"WB-02 Kolkata",regisCode:"WB02",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA BELTALA",trafficeIndex:1,zone:"ZoneA",display:"WB-03 Kolkata Beltala",regisCode:"WB03",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA BELTALA",trafficeIndex:1,zone:"ZoneA",display:"WB-04 Kolkata Beltala",regisCode:"WB04",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA KASBA",trafficeIndex:1,zone:"ZoneA",display:"WB-05 Kolkata Kasba",regisCode:"WB05",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA KASBA",trafficeIndex:1,zone:"ZoneA",display:"WB-06 Kolkata Kasba",regisCode:"WB06",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA SALT LAKE",trafficeIndex:1,zone:"ZoneA",display:"WB-07 Kolkata Salt Lake",regisCode:"WB07",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:1,isEarthQuakeArea:"Y",crimeIndex:1,city:"KOLKATA SALT LAKE",trafficeIndex:1,zone:"ZoneA",display:"WB-08 Kolkata Salt Lake",regisCode:"WB08",state:"West Bengal",isCostal:"N",pollutionIndex:1,popularCityName:"Kolkata"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"KOLKATA NEW TOWN",trafficeIndex:0,zone:"ZoneA",display:"WB-09 Kolkata New Town",regisCode:"WB09",state:"West Bengal",isCostal:"N",pollutionIndex:0,popularCityName:"Kolkata"},{floodIndex:0,isEarthQuakeArea:"N",crimeIndex:0,city:"KOLKATA NEW TOWN",trafficeIndex:0,zone:"ZoneA",display:"WB-10 Kolkata New Town",regisCode:"WB10",state:"West Bengal",isCostal:"N",pollutionIndex:0,popularCityName:"Kolkata"}]}];angular.module("claims",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("claimsController",["$scope","$window","$rootScope","$location","$http","RestAPI","localStorageService","$anchorScroll",function($scope,$window,$rootScope,$location,$http,RestAPI,localStorageService,$anchorScroll){wordPressEnabled&&($rootScope.wordPressEnabled=wordPressEnabled),$rootScope.wp_path=wp_path,$scope.tabs=[{title:"Register Claim",id:1,url:"registerClaim.tpl.html",className:" registerTab tabs",bgcolor:"wp_pinkBg",icon:wp_path+"img/Register_claim.png",wp_tabtoshow:!0},{title:"Track Claim",id:3,url:"trackClaim.tpl.html",className:" trackTab tabs",bgcolor:"wp_greenBg",icon:wp_path+"img/Track_claim.png",wp_tabtoshow:!0},{title:"Garage List",id:4,url:"garageList.tpl.html",className:" garageTab tabs",bgcolor:"wp_lightblueBg",icon:wp_path+"img/Garage_list.png",wp_tabtoshow:!0},{title:"Hospital List",id:5,url:"hospitalList.tpl.html",className:" hospitalTab tabs",bgcolor:"wp_lightGreyBg",icon:wp_path+"img/Hospital_List.png",wp_tabtoshow:!0}],$scope.tabHorizontal=[{title:"Online Claim Registration",id:1,url:"onlineClaimForm.tpl.html"},{title:"Download Claim Form",id:2,url:"claimForm.tpl.html"},{title:"Intimate Policies365",id:3,url:"registerClaimForm.tpl.html"}],$scope.insuranceType=[{id:1,name:"Car Insurance",value:"car",label:"Motor"},{id:2,name:"Bike Insurance",value:"bike",label:"Bike"},{id:3,name:"Life Insurance",value:"life",label:"Life"},{id:4,name:"Health Insurance",value:"health",label:"Health"}];var applicationLabels=localStorageService.get("applicationLabels");if($scope.globalLabel=applicationLabels.globalLabels,$rootScope.title=$scope.globalLabel.policies365Title.claims,$scope.disableSubmit=!1,$scope.getInsuranceType=function(){for(var i=0;i<$scope.insuranceType.length;i++)$scope.insuranceType[i].value==localStorage.getItem("insurType")&&($scope.selectedInsuranceType=$scope.insuranceType[i])},$scope.selectedInsuranceType=$scope.insuranceType[0],$scope.setDefault=function(){localStorage.getItem("fromPillarPage")?($scope.getInsuranceType(),$scope.showRegistrationNo($scope.selectedInsuranceType)):$scope.selectedInsuranceType=$scope.insuranceType[0]},$scope.currentTab="onlineClaimForm.tpl.html",$scope.onClickHorizontalTab=function(tab){$scope.claimDetailsUserInfo={},$scope.currentTab=tab.url,1!=tab.id&&2!=tab.id&&3!=tab.id||($scope.selectedInsuranceType=$scope.insuranceType[0],$scope.showRegistrationNo($scope.selectedInsuranceType))},$scope.isActiveHorizontalTab=function(tabUrl){return tabUrl==$scope.currentTab},$rootScope.setFlagVal){$anchorScroll("home");for(var i=0;i<$scope.tabs.length;i++)$rootScope.setTabVal.id==$scope.tabs[i].id&&($scope.tabs[i].wp_tabtoshow=!1);1==$rootScope.setTabVal.id||3==$rootScope.setTabVal.id||4==$rootScope.setTabVal.id?$scope.selectedInsuranceType=$scope.insuranceType[0]:$scope.selectedInsuranceType=$scope.insuranceType[3],$scope.currentTabClaims=$rootScope.setTabVal.url}else $scope.currentTabClaims="registerClaim.tpl.html";$scope.currentHeading="Register Claim",$scope.onClickTab=function(tab){$anchorScroll("home");for(var i=0;i<$scope.tabs.length;i++)$scope.tabs[i].wp_tabtoshow=!0;tab.wp_tabtoshow=!1,$scope.claimDetailsUserInfo={},$scope.currentTabClaims=tab.url,$scope.currentHeading=tab.title,$rootScope.wordPressEnabled&&($rootScope.bgcolorFromClaimsSelection=tab.bgcolor),1==tab.id&&($scope.selectedInsuranceType=$scope.insuranceType[0],$scope.showRegistrationNo($scope.selectedInsuranceType)),4==tab.id&&($scope.selectedInsuranceType=$scope.insuranceType[0],$scope.showRegistrationNo($scope.selectedInsuranceType)),5==tab.id&&($scope.selectedInsuranceType=$scope.insuranceType[3],$scope.showRegistrationNo($scope.selectedInsuranceType))},$scope.isActiveTab=function(tabUrl){return tabUrl==$scope.currentTabClaims},$scope.filterOnlineClaimData=function(res){if($scope.onlineClaimLinkFlag=!0,"Register your claim"===res.displayLabel)return $scope.onlineClaimLinkFlag=!1,!0},$scope.filterClaimData=function(res){return"Claim form"===res.displayLabel||"Reimbursement form"===res.displayLabel},$scope.filterTrackData=function(res){if("Track your claim"==res.displayLabel&&$scope.trackDataLink.push(res.displayLabel),$scope.trackDataLink.length>0?$scope.trackDataLinkFlag=!1:$scope.trackDataLinkFlag=!0,"Track your claim"==res.displayLabel)return!0},$scope.filterGarageListData=function(res){if("Get garage list"===res.displayLabel&&$scope.garageDataLink.push(res.displayLabel),$scope.garageDataLink.length>0?$scope.garageListFlag=!1:$scope.garageListFlag=!0,"Get garage list"===res.displayLabel)return!0},$scope.filterHospitalListData=function(res){if("Get hospital list"===res.displayLabel&&$scope.hospitalDataLink.push(res.displayLabel),$scope.hospitalDataLink.length>0?$scope.hospitalListFlag=!1:$scope.hospitalListFlag=!0,"Get hospital list"===res.displayLabel)return!0},$scope.validateRegistrationNumber=function(registrationNumber){"undefined"!=String(registrationNumber)&&((registrationNumber=registrationNumber.replace(/[^a-zA-Z0-9]/gi,"")).trim().match(/([a-zA-Z]{2}[0-9]{2}[a-zA-Z]{1,3}[0-9]{1,4})/g)&&registrationNumber.trim().length<=11&&registrationNumber.trim().length>4?$scope.regNumStatus=!1:$scope.regNumStatus=!0)},$scope.claimDetailsUserInfo=localStorageService.get("quoteUserInfo"),$scope.showRegistrationNo=function(selectedInsuranceType){if($scope.selectedInsuranceType=selectedInsuranceType,1==selectedInsuranceType.id||2==selectedInsuranceType.id?$scope.regNo=!0:$scope.regNo=!1,1==selectedInsuranceType.id)var documentType="CarCarrier";else if(2==selectedInsuranceType.id)documentType="BikeCarrier";else if(3==selectedInsuranceType.id)documentType="LifeCarrier";else if(4==selectedInsuranceType.id)documentType="HealthCarrier";$scope.InsType=selectedInsuranceType,getListFromDB(RestAPI,"",documentType,findAppConfig,function(CarrierList){if(1e3==CarrierList.responseCode)if($scope.carrierList=CarrierList.data,localStorage.getItem("fromPillarPage")){for(var i=0;i<$scope.carrierList.length;i++)$scope.carrierList[i].carrierId==localStorage.getItem("carrierId")&&($scope.selectedCarrierName=$scope.carrierList[i]);$scope.showDisplayLabel($scope.selectedCarrierName)}else $scope.selectedCarrierName=$scope.carrierList[0],$scope.showDisplayLabel($scope.selectedCarrierName)})},$scope.showRegistrationNo($scope.selectedInsuranceType),$scope.showDisplayLabel=function(selectedCarrierName){var request={};$scope.selectedCarrierName=selectedCarrierName;var carrierName=$scope.selectedCarrierName.carrierName;request.carrierName=carrierName.trim(),request.carrierId=$scope.selectedCarrierName.carrierId,request.insuranceType=$scope.selectedInsuranceType.value,RestAPI.invoke($scope.globalLabel.transactionName.ClaimDetails,request).then(function(callback){$rootScope.loading=!1,$scope.displayURL=callback,localStorage.removeItem("fromPillarPage"),localStorage.removeItem("insurType"),localStorage.removeItem("carrierId"),$scope.trackDataLink=[],$scope.garageDataLink=[],$scope.hospitalDataLink=[]})},$scope.modalEmailConfirm=!1,$scope.inputValidStatus=!1,$scope.composeEmail={},$scope.composeEmail.paramMap={},$scope.hideEmailConfirmModal=function(){$scope.modalEmailConfirm=!1,$location.path("/quote")},$scope.sendClaimInfo=function(claimForm){$scope.disableSubmit=!0,claimForm.$invalid?($scope.inputValidStatus=!0,angular.forEach($scope.claimForm.$invalid,function(field){field.$setTouched()})):($scope.inputValidStatus=!1,$scope.composeEmail.paramMap.selectedLineOfBusiness=$scope.selectedInsuranceType.name,$scope.composeEmail.paramMap.insuranceCompany=$scope.selectedCarrierName.carrierName,$scope.composeEmail.paramMap.USERNAME=$scope.claimDetailsUserInfo.firstName,$scope.composeEmail.paramMap.lastName=$scope.claimDetailsUserInfo.lastName,$scope.composeEmail.paramMap.userEmail=$scope.claimDetailsUserInfo.emailId,$scope.composeEmail.paramMap.mobileNumber=$scope.claimDetailsUserInfo.mobileNumber,$scope.composeEmail.paramMap.insuranceType="Register Claim",RestAPI.invoke("createTicket",$scope.composeEmail).then(function(callback){callback.responseCode==$scope.globalLabel.responseCode.success&&($scope.disableSubmit=!1,$scope.composeEmail={},$scope.claimDetailsUserInfo={},$scope.modalEmailConfirm=!0,claimForm.$setPristine(),claimForm.$setUntouched())}))}}]);var rampURL,messageIDVar,campaignIDVar,campaign_id,requestSource,campaignSource={};angular.module("headerApp",["LocalStorageModule"]).controller("headerController",function($rootScope,$scope,$http,localStorageService,$anchorScroll,RestAPI,$location,$sce,$window,$timeout){var wp_path;wp_path=wordPressEnabled&&iquoteEnabled?localized:"",!wordPressEnabled&&pospEnabled&&(wp_path=localized),$rootScope.wp_path=wp_path,$scope.callToFetch=function(){$rootScope.professionalJourney=professionalJourney,wordPressEnabled&&(window.location.href.indexOf("/about-us")>-1?$rootScope.title="About Us":window.location.href.indexOf("/products")>-1?$rootScope.title="Products":window.location.href.indexOf("/claims-main")>-1?$rootScope.title="Claims":window.location.href.indexOf("/contact-us")>-1?$rootScope.title="Contact Us":window.location.href.indexOf("/sign-in")>-1?$rootScope.title="Sign In":window.location.href.indexOf("/logout")>-1&&($rootScope.title="Logout"),setTimeout(function(){localStorageService.get("userProfileDetails")?($(".logout_link").closest("li").attr("style","display:inline-block !important"),$scope.userLoginInfo=localStorageService.get("userProfileDetails"),$scope.userLoginInfo.firstName?($(".signin_link").text($scope.userLoginInfo.firstName+" Account"),localStorage.setItem("loggedIn","true")):($(".logout_link").closest("li").attr("style","display:none !important"),localStorage.setItem("loggedIn","false"))):($(".logout_link").closest("li").attr("style","display:none !important"),localStorage.setItem("loggedIn","false"))},500),localStorageService.get("userProfileDetails")?($(".logout_link").closest("li").attr("style","display:inline-block !important"),$scope.userLoginInfo=localStorageService.get("userProfileDetails"),$scope.userLoginInfo.firstName&&($(".signin_link").text($scope.userLoginInfo.firstName+" Account"),localStorage.setItem("loggedIn","true"))):($(".logout_link").closest("li").attr("style","display:none !important"),localStorage.setItem("loggedIn","false"))),$scope.surveyFlag=!1,$scope.init=function(){$rootScope.accessDenied=!1,$scope.quoteUserInfo=localStorageService.get("quoteUserInfo"),null!=$scope.quoteUserInfo&&(messageIDVar=$scope.quoteUserInfo.messageId),$rootScope.bodyHeight=$window.innerHeight+"px",$rootScope.baseEnvEnabled=baseEnvEnabled,$rootScope.customEnvEnabled=customEnvEnabled,$rootScope.wordPressEnabled=wordPressEnabled,$rootScope.idepProdEnv=idepProdEnv,$rootScope.agencyPortalEnabled=agencyPortalEnabled,$scope.callQuoteController=function(tab){$anchorScroll("home"),tab.businessLineId!=localStorageService.get("selectedBusinessLineId")&&($rootScope.loading=!0,$rootScope.selTabObject=tab,$scope.$broadcast("callMethodFromHeader",{}))},$scope.modalTerms=!1,$scope.toggleTerms=function(){$scope.modalTerms=!$scope.modalTerms,$(".md-click-catcher").click(function(){$(".md-select-menu-container").hide()})},$scope.closePreExistingDiseaseModal=function(){$scope.modalTerms=!1},$scope.modalPol=!1,$scope.togglePol=function(){$scope.modalPol=!$scope.modalPol,$(".md-click-catcher").click(function(){$(".md-select-menu-container").hide()})},$scope.closePreExistingDiseaseModalp=function(){$scope.modalPol=!1},$scope.modalContact=!1,$scope.toggleCont=function(){$scope.modalContact=!$scope.modalContact,$(".md-click-catcher").click(function(){$(".md-select-menu-container").hide()})},$scope.closePreExistingDiseaseModala=function(){$scope.modalContact=!1},$scope.modalAbout=!1,$scope.toggleAbout=function(){$scope.modalAbout=!$scope.modalAbout,$(".md-click-catcher").click(function(){$(".md-select-menu-container").hide()})},$scope.closePreExistingDiseaseModalx=function(){$scope.modalAbout=!1},$rootScope.showFeedbackForm=function(feedType){$scope.modalFeedback=!0,$scope.feedback=[{name:"",mobileNumber:"",emailId:"",description:""}],"userLikes"==feedType?($scope.docType="What you liked",$scope.placeholder="for e.g. I like the way website is very sleek and easy to navigate."):($scope.docType="What can be better",$scope.placeholder="for e.g. It was not evident that i am on Policy Quote page of the website. I prefer a heading or page title bar in each page would help."),$scope.docTypeVal=feedType},$rootScope.closeFeedbackForm=function(){$scope.modalFeedback=!1,$scope.feedback=[{name:"",mobileNumber:"",emailId:"",description:""}]},$scope.modalFeedbackSuccess=!1,$rootScope.feedbackSuccessForm=function(){$scope.modalFeedbackSuccess=!0},$rootScope.closefeedbackSuccess=function(){$scope.modalFeedbackSuccess=!1,$scope.feedback=[{name:"",mobileNumber:"",emailId:"",description:""}]},$scope.submitFeedback=function(type){var feedbackParam={};feedbackParam.name=$scope.feedback.name,feedbackParam.mobile=$scope.feedback.mobileNumber,feedbackParam.email=$scope.feedback.emailId,feedbackParam.description=$scope.feedback.description,feedbackParam.documentType=type;var request={},header={transactionName:"logFeedbackRequest"};header.deviceId=deviceIdOrigin,request.header=header,request.body=feedbackParam,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){(callback=JSON.parse(callback)).responseCode==$scope.globalLabel.responseCode.success&&($scope.modalFeedback=!1,$rootScope.feedbackSuccessForm())}).error(function(callback,status){})},$scope.modalEmailConfirm=!1,$scope.inputValidStatus=!1,$scope.composeEmail={},$scope.composeEmail.paramMap={},$scope.hideEmailConfirmModal=function(){$scope.modalEmailConfirm=!1},$scope.sendEmail=function(contactUsForm){if(contactUsForm.$invalid)$scope.inputValidStatus=!0,$scope.contactUsForm&&angular.forEach($scope.contactUsForm.$invalid,function(field){field.$setTouched()});else{$scope.inputValidStatus=!1,$scope.composeEmail.paramMap.userEmail=$scope.composeEmail.userEmail;var userInfoWithQuoteParam={},quoteUserInfo={};$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),quoteUserInfo.firstName=$scope.composeEmail.paramMap.USERNAME,quoteUserInfo.mobileNumber=$scope.composeEmail.paramMap.mobileNumber,quoteUserInfo.emailId=$scope.composeEmail.paramMap.userEmail,localStorageService.set("quoteUserInfo",quoteUserInfo),1==$scope.selectedBusinessLineId?(userInfoWithQuoteParam.quoteParam=localStorageService.get("lifeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("lifeQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("LIFE_UNIQUE_QUOTE_ID"),"/life"==$location.path()&&($scope.composeEmail.paramMap.insuranceType="life")):2==$scope.selectedBusinessLineId?(userInfoWithQuoteParam.quoteParam=localStorageService.get("bikeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("BIKE_UNIQUE_QUOTE_ID")):3==$scope.selectedBusinessLineId?(userInfoWithQuoteParam.quoteParam=localStorageService.get("carQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("CAR_UNIQUE_QUOTE_ID"),"/car"==$location.path()&&($scope.composeEmail.paramMap.insuranceType="car")):4==$scope.selectedBusinessLineId&&("/health"==$location.path()&&($scope.composeEmail.paramMap.insuranceType="health"),userInfoWithQuoteParam.quoteParam=localStorageService.get("healthQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("HEALTH_UNIQUE_QUOTE_ID")),userInfoWithQuoteParam.quoteParam&&(userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId);var urlPattern=$location.path();"/life"!=urlPattern&&"/car"!=urlPattern&&"/health"!=urlPattern&&-1==urlPattern.indexOf("pay")&&-1==urlPattern.indexOf("proposalresdata")&&-1==urlPattern.indexOf("sharefromAPI")&&-1==urlPattern.indexOf("ipos")&&(userInfoWithQuoteParam.requestSource=sourceOrigin),$scope.composeEmail.userInfoWithQuoteParam=userInfoWithQuoteParam,"query"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType="USERENQUIRY":"complaint"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType="COMPLAINT":"request"==$scope.composeEmail.paramMap.ticketType?$scope.composeEmail.funcType="REQUEST":$scope.composeEmail.funcType="USERENQUIRY",RestAPI.invoke("createTicket",$scope.composeEmail).then(function(callback){1e3==callback.responseCode&&($scope.modalContact=!1,$scope.modalEmailConfirm=!0,$scope.composeEmail={},$scope.contactUsForm&&($scope.contactUsForm.$setPristine(),$scope.contactUsForm.$setUntouched()))})}},$rootScope.$on("callCreateTicket",function(contactUsForm){$scope.sendEmail(contactUsForm)}),$rootScope.displayTimer=function(maxDuration){$timeout(function(){$rootScope.displayTime=maxDuration-1,maxDuration--,1==$rootScope.displayTime&&($window.top.location.href=$rootScope.redirectionURL),$rootScope.displayTime>1&&$rootScope.displayTimer(maxDuration)},1e3)},$scope.closeFeedbackModal=function(){$rootScope.modalSurvey=!1,$rootScope.affilateRedirection&&($rootScope.displayTime=10,$rootScope.displayTimer($rootScope.displayTime))},$scope.onIframeLoad=function(src){var key=src.split("?")[1];"undefined"!=String(key)&&key.contains("success")&&($scope.modalSurvey=!1,$scope.$apply())},$scope.getCampaignFunction=function(){if($scope.sourceValidationResponse&&(campaign_id=$scope.sourceValidationResponse.campaignId,$scope.sourceValidationResponse.requestSource&&(requestSource=$scope.sourceValidationResponse.requestSource)),$location.search().isForRenewal&&$location.search().campaign){(campaign_id=$location.search().campaign)||(campaign_id="46b3bf3d-52fb-38a7-40be-59cc9e8728800");var request={};messageIdVar=$location.search().messageId,request.isRenewal=!0,RestAPI.invoke("readEmailStatus",request).then(function(readStatus){readStatus.responseCode}),requestSource=sourceOrigin}},$scope.$on("invokeCampaignTemplate",function(){$scope.getCampaignFunction()}),$scope.$broadcast("invokeCampaignTemplate",{})};var a,affilateCookie,request,p365cookie=(a="wpam_id",(affilateCookie=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?affilateCookie.pop():"");if(p365cookie)requestSource=sourceOrigin,(request={}).deviceId=p365cookie,deviceIdOrigin=request.deviceId,RestAPI.invoke("validateSource",request).then(function(callback){1e3==callback.responseCode&&($scope.sourceValidationResponse=callback.data,sourceOrigin=$scope.sourceValidationResponse.source,deviceIdOrigin=$scope.sourceValidationResponse.deviceId,requestSource=$scope.sourceValidationResponse.deviceId,$rootScope.affilateUser=$scope.sourceValidationResponse.affilateUser,$rootScope.affilateRedirection=$scope.sourceValidationResponse.redirectToAffilateScreen,$scope.sourceValidationResponse.redirectionURL&&($rootScope.redirectionURL=$scope.sourceValidationResponse.redirectionURL),$scope.sourceValidationResponse.hideLOB?$rootScope.hideLOB=$scope.sourceValidationResponse.hideLOB:$rootScope.hideLOB=!1,$scope.init())});else if((request={}).deviceId=deviceIdOrigin,agencyPortalEnabled){if($location.search().P365Token){var verifyTokenReq=angular.copy(request);verifyTokenReq.token=$location.search().P365Token,RestAPI.invoke("verifyToken",verifyTokenReq).then(function(tokenVerificationCallback){1e3==tokenVerificationCallback.responseCode?($rootScope.accessDenied=!1,tokenVerificationResp=tokenVerificationCallback.data,tokenVerificationResp&&"Policies365"==tokenVerificationResp.issuer?RestAPI.invoke("validateSource",request).then(function(callback){1e3==callback.responseCode&&($scope.sourceValidationResponse=callback.data,sourceOrigin=$scope.sourceValidationResponse.source,deviceIdOrigin=$scope.sourceValidationResponse.deviceId,requestSource=$scope.sourceValidationResponse.deviceId,$rootScope.affilateURL=$scope.sourceValidationResponse.affilateURL,$rootScope.affilateUser=$scope.sourceValidationResponse.affilateUser,$rootScope.affilateRedirection=$scope.sourceValidationResponse.redirectToAffilateScreen,campaign_id=$scope.sourceValidationResponse.campaignId,$scope.sourceValidationResponse.hideLOB?$rootScope.hideLOB=$scope.sourceValidationResponse.hideLOB:$rootScope.hideLOB=!1,$scope.sourceValidationResponse.rampURL&&(rampURL=$scope.sourceValidationResponse.rampURL),$scope.init())}):($rootScope.accessDenied=!0,$location.path("/accessDenied"))):($rootScope.accessDenied=!0,$location.path("/accessDenied"))})}}else $rootScope.accessDenied=!1,RestAPI.invoke("validateSource",request).then(function(callback){1e3==callback.responseCode&&($scope.sourceValidationResponse=callback.data,sourceOrigin=$scope.sourceValidationResponse.source,deviceIdOrigin=$scope.sourceValidationResponse.deviceId,requestSource=$scope.sourceValidationResponse.deviceId,$rootScope.affilateUser=$scope.sourceValidationResponse.affilateUser,$rootScope.affilateRedirection=$scope.sourceValidationResponse.redirectToAffilateScreen,campaign_id=$scope.sourceValidationResponse.campaignId,$scope.sourceValidationResponse.hideLOB?$rootScope.hideLOB=$scope.sourceValidationResponse.hideLOB:$rootScope.hideLOB=!1,$scope.init())})},loadDatbase(function(){null!=localStorageService.get("policies365-application-version")&&"undefined"!=localStorageService.get("policies365-application-version")&&String(localStorageService.get("policies365-application-version"))==APPLICATION_VERSION?($scope.callToFetch(),localStorageService.set("websiteVisitedOnce",!0),$rootScope.professionalJourneyInit=!0):(localStorageService.clearAll(),localStorageService.clearCollection(),$http.get(wp_path+"ApplicationLabels.json").then(function(response){$scope.callToFetch(),localStorageService.set("applicationLabels",response.data),localStorageService.set("policies365-application-version",APPLICATION_VERSION),localStorage.removeItem("selectedBusinessLineId"),localStorageService.set("selectedBusinessLineId",3),localStorageService.set("websiteVisitedOnce",!1),$scope.globalLabel=response.data.globalLabels,$rootScope.professionalJourneyInit=!0}))})}),angular.module("headerNavigationApp",["LocalStorageModule"]).controller("headerNavigationController",["$scope","$rootScope","$window","$filter","RestAPI","localStorageService","$timeout","$location","$interval","$http","$sce","$q",function($scope,$rootScope,$window,$filter,RestAPI,localStorageService,$timeout,$location,$interval,$http,$sce,$q){if($rootScope.headerNavigation=wp_path+"buy/common/html/headerNavigationPHP.html",$scope.lifeURL=wp_path+"buy/life/html/AssuranceInstantQuote.html",$scope.healthURL=wp_path+"buy/health/html/MedicalInstantQuote.html",$scope.carURL=wp_path+"buy/caheaderNavigationr/html/FourWheelerInstantQuote.html",$scope.bikeURL=wp_path+"buy/bike/html/TwoWheelerInstantQuote.html",$scope.travelURL=wp_path+"buy/travel/html/TravelInstantQuote.html",$scope.criticalIllnessQuoteURL=wp_path+"buy/criticalIllness/html/CriticalIllnessInstantQuote.html",$scope.personalAccidentQuoteURL=wp_path+"buy/personalAccident/html/PersonalAccidentInstantQuote.html",$scope.professionalQuoteURL=wp_path+"buy/common/html/professionalJourney.html",pospEnabled?$rootScope.tabsMenu=[{businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car"},{businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike"},{businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Life",inputTitle:"life",flagToShow:$rootScope.idepProdEnv},{businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family",flagToShow:$rootScope.idepProdEnv},{businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel",tabImgId:4,flagToShow:$rootScope.idepProdEnv},{businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",tabImgId:5,flagToShow:$rootScope.idepProdEnv},{businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA",tabImgId:6,flagToShow:$rootScope.idepProdEnv},{businessLineId:0,url:$scope.professionalQuoteURL,className:"professionalTab tabs wp_border32",name:"professional",title:"Professional",inputTitle:"Professional",tabImgId:0}]:$rootScope.tabsMenu=[{businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car"},{businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike"},{businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Life",inputTitle:"life"},{businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family"},{businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel",tabImgId:4},{businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",tabImgId:5,flagToShow:$rootScope.idepProdEnv},{businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA",tabImgId:6,flagToShow:$rootScope.idepProdEnv},{businessLineId:0,url:$scope.professionalQuoteURL,className:"professionalTab tabs wp_border32",name:"professional",title:"Professional",inputTitle:"Professional",tabImgId:0}],$scope.className=$rootScope.idepProdEnv||agencyPortalEnabled||$rootScope.wordPressEnabled?"iPOS14Width":"iPOS17Width",$scope.tabsWidthClassName=$rootScope.idepProdEnv&&$rootScope.wordPressEnabled?"wid35":"wid40",$scope.tabs_li_width=$rootScope.idepProdEnv&&$rootScope.wordPressEnabled?"20%":"16%",agencyPortalEnabled&&!pospEnabled){var lob=localStorage.getItem("lob_array");if(null!=lob&&"0"!=lob&&void 0!=lob){var lob_arr=lob.split(",");console.log(" lob_arr : ",lob_arr),$rootScope.tabsMenu=[];for(var i=0;i<lob_arr.length;i++)"3"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car"})<0&&($rootScope.tabsMenu.push({businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car"}),console.log("$rootScope.tabsMenu --d",$rootScope.tabsMenu)),"2"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike"})<0&&$rootScope.tabsMenu.push({businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike"}),"1"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Term",inputTitle:"life"})<0&&$rootScope.tabsMenu.push({businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Term",inputTitle:"life"}),"4"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family"})<0&&$rootScope.tabsMenu.push({businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family"}),"5"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel"})<0&&$rootScope.tabsMenu.push({businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel"}),"6"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",flagToShow:$rootScope.idepProdEnv})<0&&$rootScope.tabsMenu.push({businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",flagToShow:$rootScope.idepProdEnv}),"8"==lob_arr[i]&&$rootScope.tabsMenu.indexOf({businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA",flagToShow:$rootScope.idepProdEnv})<0&&$rootScope.tabsMenu.push({businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA",flagToShow:$rootScope.idepProdEnv})}}3==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car"}:2==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike"}:1==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Term",inputTitle:"life"}:4==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family"}:5==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel"}:6==localStorageService.get("selectedBusinessLineId")?$scope.tabMenu={businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",flagToShow:$rootScope.idepProdEnv}:8==localStorageService.get("selectedBusinessLineId")&&($scope.tabMenu={businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA"}),localStorageService.get("selectedBusinessLineId")||localStorageService.set("selectedBusinessLineId",3),$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$rootScope.isActiveTab2=$scope.selectedBusinessLineId;for(i=0;i<$rootScope.tabsMenu.length;i++)if($rootScope.tabsMenu[i].businessLineId==$scope.selectedBusinessLineId){$scope.inputTitle=$rootScope.tabsMenu[i].inputTitle,$scope.currentTab=$rootScope.tabsMenu[i].url;break}var quoteUserInfoCookie=localStorageService.get("quoteUserInfo");null!=quoteUserInfoCookie&&(void 0==quoteUserInfoCookie.messageId&&null==quoteUserInfoCookie.messageId&&""==quoteUserInfoCookie.messageId||(messageIDVar=quoteUserInfoCookie.messageId)),$location.search().messageId&&(messageIDVar=$location.search().messageId),$rootScope.setLOB=function(LOB){localStorage.setItem("selectedBusinessLineId",LOB),localStorageService.set("selectedBusinessLineId",LOB),"/dashboard"!=$location.path()?$location.path("/quote"):window.location.href=window.location.protocol+"//"+window.location.host},$scope.redirectToResult=function(){$scope.LOB=localStorageService.get("selectedBusinessLineId"),1==Number($scope.LOB)?$rootScope.lifeQuoteRequest.length==$scope.lifeQuoteResponse.length&&($rootScope.loading=!1,$location.path("/assuranceResult")):2==Number($scope.LOB)?$rootScope.bikeQuoteResult.length>0&&($rootScope.loading=!1,$location.path("/bikeResult")):3==Number($scope.LOB)?$rootScope.carQuoteResult.length>0&&($rootScope.loading=!1,$location.path("/carResult")):4==Number($scope.LOB)?$rootScope.healthQuoteRequest.length==$scope.healthQuoteResponse.length&&($rootScope.loading=!1,$location.path("/healthResult")):5==Number($scope.LOB)?$rootScope.travelQuoteRequest.length==$scope.travelQuoteResponse.length&&($rootScope.loading=!1,$location.path("/travelResult")):6==Number($scope.LOB)?$rootScope.ciQuoteRequest.length==$scope.ciQuoteResponse.length&&($rootScope.loading=!1,$location.path("/criticalIllnessResult")):8==Number($scope.LOB)&&$rootScope.paQuoteRequest.length==$scope.paQuoteResponse.length&&($rootScope.loading=!1,$location.path("/personalAccidentResult"))},$scope.getQuoteTemplateFunction=function(){if($rootScope.wordPressEnabled||($scope.displayResult=!0),null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){var userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}$scope.globalLabel=localStorageService.get("applicationLabels").globalLabels;var quoteUserInfoCookie=localStorageService.get("quoteUserInfo");if(quoteUserInfoCookie?$scope.quoteUserInfo=quoteUserInfoCookie:($scope.quoteUserInfo={},$scope.quoteUserInfo.messageId="",$scope.quoteUserInfo.termsCondition=!0),$rootScope.selectedRegData=void 0,localStorageService.get("userLoginInfo")&&($rootScope.userLoginStatus=localStorageService.get("userLoginInfo").status,$rootScope.username=localStorageService.get("userLoginInfo").username),$scope.menuItems=menuItemsGeneric,$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),null!=quoteUserInfoCookie&&(messageIDVar=void 0!=quoteUserInfoCookie.messageId||null!=quoteUserInfoCookie.messageId||""!=quoteUserInfoCookie.messageId?quoteUserInfoCookie.messageId:""),$location.search().messageId&&(messageIDVar=$location.search().messageId),$scope.bikeQuoteRequestFormation=function(bikeQuoteRequestParam){$scope.quoteRequest={},$scope.quoteRequest.vehicleInfo={},$scope.quoteRequest.quoteParam={},$scope.quoteRequest.vehicleInfo.IDV=bikeQuoteRequestParam.vehicleInfo.IDV,$scope.quoteRequest.vehicleInfo.PreviousPolicyExpiryDate=bikeQuoteRequestParam.vehicleInfo.PreviousPolicyExpiryDate,$scope.quoteRequest.vehicleInfo.RTOCode=bikeQuoteRequestParam.vehicleInfo.RTOCode,$scope.quoteRequest.vehicleInfo.city=bikeQuoteRequestParam.vehicleInfo.city,bikeQuoteRequestParam.vehicleInfo.dateOfRegistration&&($scope.quoteRequest.vehicleInfo.dateOfRegistration=bikeQuoteRequestParam.vehicleInfo.dateOfRegistration),$scope.quoteRequest.vehicleInfo.idvOption=bikeQuoteRequestParam.vehicleInfo.idvOption,$scope.quoteRequest.vehicleInfo.best_quote_id=bikeQuoteRequestParam.vehicleInfo.best_quote_id,$scope.quoteRequest.vehicleInfo.previousClaim=bikeQuoteRequestParam.vehicleInfo.previousClaim,$scope.quoteRequest.vehicleInfo.registrationNumber=bikeQuoteRequestParam.vehicleInfo.registrationNumber,$scope.quoteRequest.vehicleInfo.registrationPlace=bikeQuoteRequestParam.vehicleInfo.registrationPlace,$scope.quoteRequest.vehicleInfo.state=bikeQuoteRequestParam.vehicleInfo.state,$scope.quoteRequest.vehicleInfo.make=bikeQuoteRequestParam.vehicleInfo.make,$scope.quoteRequest.vehicleInfo.model=bikeQuoteRequestParam.vehicleInfo.model,$scope.quoteRequest.vehicleInfo.variant=bikeQuoteRequestParam.vehicleInfo.variant.toString(),$scope.quoteRequest.quoteParam.ncb=bikeQuoteRequestParam.quoteParam.ncb,$scope.quoteRequest.quoteParam.ownedBy=bikeQuoteRequestParam.quoteParam.ownedBy,$scope.quoteRequest.quoteParam.policyType=bikeQuoteRequestParam.quoteParam.policyType,bikeQuoteRequestParam.quoteParam.riders&&($scope.quoteRequest.quoteParam.riders=bikeQuoteRequestParam.quoteParam.riders)},$scope.carQuoteRequestFormation=function(carQuoteRequestParam){$scope.quoteRequest={},$scope.quoteRequest.vehicleInfo={},$scope.quoteRequest.quoteParam={},$scope.quoteRequest.vehicleInfo.IDV=carQuoteRequestParam.vehicleInfo.IDV,$scope.quoteRequest.vehicleInfo.PreviousPolicyExpiryDate=carQuoteRequestParam.vehicleInfo.PreviousPolicyExpiryDate,$scope.quoteRequest.vehicleInfo.RTOCode=carQuoteRequestParam.vehicleInfo.RTOCode,$scope.quoteRequest.vehicleInfo.city=carQuoteRequestParam.vehicleInfo.city,carQuoteRequestParam.vehicleInfo.dateOfRegistration&&($scope.quoteRequest.vehicleInfo.dateOfRegistration=carQuoteRequestParam.vehicleInfo.dateOfRegistration),$scope.quoteRequest.vehicleInfo.idvOption=carQuoteRequestParam.vehicleInfo.idvOption,$scope.quoteRequest.vehicleInfo.best_quote_id=carQuoteRequestParam.vehicleInfo.best_quote_id,$scope.quoteRequest.vehicleInfo.previousClaim=carQuoteRequestParam.vehicleInfo.previousClaim,$scope.quoteRequest.vehicleInfo.registrationNumber=carQuoteRequestParam.vehicleInfo.registrationNumber,$scope.quoteRequest.vehicleInfo.registrationPlace=carQuoteRequestParam.vehicleInfo.registrationPlace,$scope.quoteRequest.vehicleInfo.state=carQuoteRequestParam.vehicleInfo.state,$scope.quoteRequest.vehicleInfo.make=carQuoteRequestParam.vehicleInfo.make,$scope.quoteRequest.vehicleInfo.model=carQuoteRequestParam.vehicleInfo.model,$scope.quoteRequest.vehicleInfo.variant=carQuoteRequestParam.vehicleInfo.variant.toString(),$scope.quoteRequest.vehicleInfo.fuel=carQuoteRequestParam.vehicleInfo.fuel,$scope.quoteRequest.vehicleInfo.cubicCapacity=carQuoteRequestParam.vehicleInfo.cubicCapacity,$scope.quoteRequest.quoteParam.ncb=carQuoteRequestParam.quoteParam.ncb,$scope.quoteRequest.quoteParam.ownedBy=carQuoteRequestParam.quoteParam.ownedBy,$scope.quoteRequest.quoteParam.policyType=carQuoteRequestParam.quoteParam.policyType,carQuoteRequestParam.quoteParam.riders&&($scope.quoteRequest.quoteParam.riders=carQuoteRequestParam.quoteParam.riders)},$scope.getRegPlaceListUsingIPCity=function(cityName,callback){if(null!=cityName&&"undefined"!=String(cityName))return $http.get(getServiceLink+$scope.globalLabel.documentType.RTODetails+"&q="+cityName).then(function(response){var rtoDetailsResponse=JSON.parse(response.data),rtoDetail={};rtoDetailsResponse.responseCode!=$scope.globalLabel.responseCode.noRecordsFound?($rootScope.vehicleInfo={},$rootScope.vehicleInfo.selectedRegistrationObject=rtoDetailsResponse.data[0],rtoDetail.rtoName=rtoDetailsResponse.data[0].display,rtoDetail.rtoCity=rtoDetailsResponse.data[0].city,rtoDetail.rtoState=rtoDetailsResponse.data[0].state,rtoDetail.rtoObject=rtoDetailsResponse.data[0],rtoDetail.rtoStatus=!0,getPincodeFromCity($http,rtoDetail,function(resultedRTOInfo){resultedRTOInfo.responseCode==$scope.globalLabel.responseCode.success?rtoDetail.rtoPincode=resultedRTOInfo.data[0].pincode:rtoDetail.rtoPincode="",localStorageService.set("registrationPlaceUsingIP",rtoDetail)})):(rtoDetail.rtoName=void 0,rtoDetail.rtoCity=void 0,rtoDetail.rtoState=void 0,rtoDetail.rtoObject=void 0,rtoDetail.rtoStatus=!1,localStorageService.set("registrationPlaceUsingIP",rtoDetail)),callback()});var rtoDetail={rtoName:void 0,rtoCity:void 0,rtoState:void 0,rtoObject:void 0,rtoStatus:!1};localStorageService.set("registrationPlaceUsingIP",rtoDetail),callback()},localStorageService.get("websiteVisitedOnce")){var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")?$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)):2==$scope.selectedBusinessLineId&&localStorageService.get("bikeQuoteInputParamaters")&&$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)),$scope.getRegPlaceListUsingIPCity(cityName,function(){if($rootScope.vehicleInfo&&!(null!=$rootScope.vehicleInfo.registrationPlace&&void 0!=$rootScope.vehicleInfo.registrationPlace||void 0!=localStorageService.get("registrationPlaceUsingIP")&&0!=localStorageService.get("registrationPlaceUsingIP").rtoStatus)){var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";$scope.getRegPlaceListUsingIPCity(cityName,function(){3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickBikeQuote",{})})}for(var i=0;i<$rootScope.tabsMenu.length;i++)if($rootScope.tabsMenu[i].businessLineId==$scope.selectedBusinessLineId){$scope.inputTitle=$rootScope.tabsMenu[i].inputTitle,$scope.currentTab1=$rootScope.tabsMenu[i].url;break}$scope.defaultMetroList=localStorageService.get("defaultMetroCityList")});var vehicleDetailsCookie=localStorageService.get("selectedCarDetails");vehicleDetailsCookie&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookie.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedCarDetails",vehicleDetailsCookie));var vehicleDetailsCookieBike=localStorageService.get("selectedBikeDetails");vehicleDetailsCookieBike&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookieBike.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedBikeDetails",vehicleDetailsCookieBike))}else{var popularRTOParam={popularRTOList:"Y"};getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.getPopularRTO,popularRTOParam,function(callbackMetro){callbackMetro.data?(console.log("defaultMetroListNotVar"),localStorageService.set("defaultMetroCityList",callbackMetro.data),$scope.defaultMetroList=callbackMetro.data):(console.log("defaultMetroListVar"),localStorageService.set("defaultMetroCityList",defaultMetroListVar),$scope.defaultMetroList=defaultMetroListVar);var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")?$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)):2==$scope.selectedBusinessLineId&&localStorageService.get("bikeQuoteInputParamaters")&&$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)),$scope.getRegPlaceListUsingIPCity(cityName,function(){for(var i=0;i<$rootScope.tabsMenu.length;i++)if($rootScope.tabsMenu[i].businessLineId==$scope.selectedBusinessLineId){$scope.inputTitle=$rootScope.tabsMenu[i].inputTitle,$scope.currentTab1=$rootScope.tabsMenu[i].url;break}});var vehicleDetailsCookie=localStorageService.get("selectedCarDetails");vehicleDetailsCookie&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookie.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedCarDetails",vehicleDetailsCookie));var vehicleDetailsCookieBike=localStorageService.get("selectedBikeDetails");vehicleDetailsCookieBike&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookieBike.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedBikeDetails",vehicleDetailsCookieBike))})}function getLocationDetails(position){findCityBasedIP($http,position,$scope.globalLabel.responseCode.success,function(cityFromIP,pincodeFromIP,stateFromIP,cityFoundStatus){var IPBasedCityDetails={};IPBasedCityDetails.cityName=cityFromIP,IPBasedCityDetails.pincode=pincodeFromIP,IPBasedCityDetails.state=stateFromIP,IPBasedCityDetails.cityStatus=cityFoundStatus,localStorageService.set("cityDataFromIP",IPBasedCityDetails),$scope.getRegPlaceListUsingIPCity(cityFromIP,function(){3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickBikeQuote",{})})})}if(!localStorageService.get("websiteVisitedOnce"))if(navigator.geolocation)navigator.geolocation.getCurrentPosition(getLocationDetails);else{console.log("Geolocation is not supported by this browser.");getLocationDetails(void 0)}$rootScope.showBikeRegAreaStatus=!0,$rootScope.showCarRegAreaStatus=!0,$scope.modalVehicleRegistration=!1,$scope.getHospitalList=function(){var documentId;4==localStorageService.get("selectedBusinessLineId")&&(documentId=$scope.globalLabel.documentType.hospitalDetails+"-"+localStorageService.get("healthQuoteInputParamaters").personalInfo.pincode,getDocUsingId(RestAPI,documentId,function(hospitalList){null!=hospitalList&&"undefined"!=String(hospitalList)?(localStorageService.set("hospitalList",hospitalList.hospitalDetails),localStorageService.set("hospitalListReset",hospitalList.hospitalDetails)):localStorageService.set("hospitalList",void 0)}))},$scope.getGarageList=function(){3==localStorageService.get("selectedBusinessLineId")&&($scope.garageList={},$scope.garageList.make=localStorageService.get("carQuoteInputParamaters").vehicleInfo.make,$scope.garageList.city=localStorageService.get("carQuoteInputParamaters").vehicleInfo.city,$scope.garageList.regisCode=localStorageService.get("carQuoteInputParamaters").vehicleInfo.RTOCode,RestAPI.invoke($scope.globalLabel.transactionName.getGarageDetails,$scope.garageList).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){var garageResponse=callback;null!=garageResponse&&"undefined"!=String(garageResponse)?localStorageService.set("garageDetails",garageResponse.data):localStorageService.set("garageDetails",void 0)}else localStorageService.set("garageDetails",void 0)}))}},$scope.$on("onClickTabID",function(event,tab){console.log("tab : ",tab),$http.get(wp_path+"ApplicationLabels.json").then(function(response){if(localStorageService.set("applicationLabels",response.data),$scope.globalLabel=response.data.globalLabels,$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$rootScope.wp_path="",pospEnabled&&($rootScope.wp_path=localized),console.log("typeOf tab : ",typeof tab),1==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife,$rootScope.loaderContent={businessLine:"1",header:"Life Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.life.proverbInstantQuote)}):2==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelBike,$rootScope.loaderContent={businessLine:"2",header:"Bike Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.bike.proverbInstantQuote)}):3==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCar,$rootScope.loaderContent={businessLine:"3",header:"Car Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.car.proverbInstantQuote)}):4==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelHealth,$rootScope.loaderContent={businessLine:"4",header:"Health Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.health.proverbInstantQuote)}):5==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelTravel,$rootScope.loaderContent={businessLine:"5",header:"Travel Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.travel.proverbInstantQuote)}):6==tab?($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCriticalIllness,$rootScope.loaderContent={businessLine:"6",header:"CriticalIllness Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.criticalIllness.proverbInstantQuote)}):8==tab&&($rootScope.loading=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelPersonalAccident,$rootScope.loaderContent={businessLine:"8",header:"PersonalAccident Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.personalAccident.proverbInstantQuote)}),3==tab){console.log("car tab clicked from dcp"),$scope.focusInput=!0,$rootScope.instantQuoteSummaryStatus=!0,$rootScope.instantQuoteInvalidSummaryStatus=!0,$scope.instantQuoteCalculation=function(addOnCoverForCar){$scope.quoteParam={},$scope.vehicleInfo={},$scope.vehicleDetails={},$rootScope.vehicleInfo={},$rootScope.vehicleDetails={},$scope.toggleCounter=0,$scope.carInsuranceTypes=[],$scope.yearList=[],$scope.makeNames=[],$scope.modelNames=[],$scope.variantNames=[],$scope.fuelNames=[],$scope.defaultMetroList=[],$scope.cityDetails={},$scope.quoteFinalResult=[];var carQuoteCookie=localStorageService.get("carQuoteInputParamaters"),vehicleDetailsCookie=localStorageService.get("selectedCarDetails");if(null!=localStorageService.get("defaultMetroCityList"))$scope.defaultMetroList=localStorageService.get("defaultMetroCityList");else{var popularRTOParam={popularRTOList:"Y"};getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.getPopularRTO,popularRTOParam,function(callbackMetro){callbackMetro.data?(console.log("defaultMetroListNotVar"),localStorageService.set("defaultMetroCityList",callbackMetro.data),$scope.defaultMetroList=callbackMetro.data):(console.log("defaultMetroListVar"),localStorageService.set("defaultMetroCityList",defaultMetroListVar),$scope.defaultMetroList=defaultMetroListVar)})}$scope.carInsuranceTypes=carInsuranceTypeGeneric,$scope.policyStatusList=policyStatusListGeneric,$scope.ncbList=ncbListGeneric,$scope.previousClaimStatus=previousClaimStatusGeneric,$rootScope.regNumStatus=!1,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$rootScope.disableCarRegPopup=!0,$scope.instantQuoteCarForm=!0,$scope.changePolStatus=function(){$scope.vehicleDetails.insuranceType.type==$scope.carInsuranceTypes[1].type?($scope.renewal=!0,$scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.vehicleDetails.policyStatus.expiryDate):($scope.renewal=!1,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")),3==$scope.vehicleDetails.policyStatus.key?$scope.vehicleDetails.previousPolicyExpired="N":$scope.vehicleDetails.previousPolicyExpired="Y",1==$scope.toggleCounter&&($rootScope.wordPressEnabled||$scope.singleClickCarQuote())},$scope.alterRenewal=function(){$scope.vehicleDetails.insuranceType.type!=$scope.carInsuranceTypes[1].type?($scope.polStatus=!1,$scope.renewal=!1,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.vehicleDetails.regYear=$scope.yearList[0]):($scope.polStatus=!0,$scope.renewal=!0,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge)),$scope.quoteParam.policyType=$scope.vehicleDetails.insuranceType.value,$scope.changePolStatus()},$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!=String($rootScope.carQuoteResult)&&0!=$rootScope.carQuoteResult.length?$rootScope.carQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1):($scope.errorRespCounter=!1,$scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1),$rootScope.loading=!1},$scope.tooltipPrepare=function(carResult){var i;$rootScope.tooltipContent&&($rootScope.exclusiveDiscounts=$rootScope.tooltipContent.discountOptions,$rootScope.quotesDesc=$rootScope.tooltipContent.quotesDesc);var resultCarrierId=[],testCarrierId=[];for(i=0;i<carResult.length;i++)if(Number(carResult[i].netPremium)>0){var carrierInfo={};carrierInfo.id=carResult[i].carrierId,carrierInfo.name=carResult[i].insuranceCompany,carrierInfo.annualPremium=carResult[i].netPremium,carrierInfo.claimsRating=carResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.insuredDeclareValue=carResult[i].insuredDeclareValue,carrierInfo.businessLineId="2"),0==p365Includes(testCarrierId,carResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(carResult[i].carrierId))}$rootScope.resultedCarriers=resultCarrierId,$rootScope.resultCarrierId=resultCarrierId,$rootScope.tooltipContent&&($rootScope.exclusiveDiscountsLength=$rootScope.tooltipContent.countDiscountOptions),$rootScope.calculatedQuotesLength=2==String(carResult.length).length?String(carResult.length):"0"+String(carResult.length),$rootScope.calculatedRidersLength=2==String(0).length?String(0):"0"+String(0),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:1})},2e3)},$scope.processResult=function(){if($rootScope.carQuoteResult.length>0){$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.modalShown=!1,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.enabledProgressLoader=!1,$rootScope.carQuoteResult=$filter("orderBy")($rootScope.carQuoteResult,"grossPremium");for(var minAnnualPremiumValue=$rootScope.carQuoteResult[0].grossPremium,annualPremiumSliderArray=[],j=0;j<$rootScope.carQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.carQuoteResult[j].discountDetails;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i]["com.sutrr.quote.carquotecalc.DiscountDetails"].discountAmount;calculatedDiscAmt+=$rootScope.carQuoteResult[j].grossPremium,annualPremiumSliderArray.push(calculatedDiscAmt)}else annualPremiumSliderArray.push($rootScope.carQuoteResult[j].grossPremium)}annualPremiumSliderArray=$filter("orderBy")(annualPremiumSliderArray),$scope.updateAnnualPremiumRange(minAnnualPremiumValue,annualPremiumSliderArray[annualPremiumSliderArray.length-1]),localStorageService.set("carQuoteCalculationResult",$rootScope.carQuoteResult),console.log("redirecting to carResult from process Result"),$location.path("/carResult")}},$scope.singleClickCarQuote=function(){setTimeout(function(){$scope.quote={},$rootScope.instantQuoteSummaryStatus=!0,$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.errorRespCounter=!0,$scope.instantQuoteCarForm=!0,$rootScope.disableCarRegPopup=!0,$rootScope.loading=!0;var todayDate=new Date;$scope.quoteParam.policyType==$scope.carInsuranceTypes[0].value?($scope.vehicleInfo.dateOfRegistration=("0"+todayDate.getDate().toString()).substr(-2)+"/"+("0"+(Number(todayDate.getMonth())+1).toString()).substr(-2)+"/"+$scope.vehicleDetails.regYear,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")):(todayDate.getFullYear()==$scope.vehicleDetails.regYear?$scope.vehicleInfo.dateOfRegistration="01/01/"+$scope.vehicleDetails.regYear:$scope.vehicleInfo.dateOfRegistration="01/07/"+$scope.vehicleDetails.regYear,convertStringFormatToDate($scope.vehicleInfo.PreviousPolicyExpiryDate,function(formattedPolicyExpiryDate){var tempPreviousPolicyExpiryDate=new Date(angular.copy(formattedPolicyExpiryDate)),tempCalcPrevPolStartDate=new Date(tempPreviousPolicyExpiryDate.setFullYear(new Date(tempPreviousPolicyExpiryDate).getFullYear()-1));(tempCalcPrevPolStartDate=new Date(new Date(String(tempCalcPrevPolStartDate)).setDate(new Date(String(tempCalcPrevPolStartDate)).getDate()+1))).setHours(0,0,0,0)<new Date($scope.vehicleInfo.dateOfRegistration).setHours(0,0,0,0)?$scope.vehicleDetails.PreviousPolicyStartDate=$scope.vehicleInfo.dateOfRegistration:convertDateFormatToString(tempCalcPrevPolStartDate,function(formattedPrevPolStartDate){$scope.vehicleDetails.PreviousPolicyStartDate=formattedPrevPolStartDate})}));if(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject))$scope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$rootScope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$scope.vehicleInfo.city=$rootScope.vehicleInfo.selectedRegistrationObject.city,$scope.vehicleInfo.RTOCode=$rootScope.vehicleInfo.selectedRegistrationObject.regisCode,$scope.vehicleInfo.state=$rootScope.vehicleInfo.selectedRegistrationObject.state;else{var selectedMetroDetails,cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";if($scope.defaultMetroList)for(var i=0;i<$scope.defaultMetroList.length;i++)if($scope.defaultMetroList[i].cityName==cityName)for(var j=0;j<$scope.defaultMetroList[i].RTODetails.length;j++)if((selectedMetroDetails=$scope.defaultMetroList[i].RTODetails[j]).display==$scope.vehicleInfo.registrationPlace){$scope.vehicleInfo.city=selectedMetroDetails.city,$scope.vehicleInfo.RTOCode=selectedMetroDetails.regisCode,$scope.vehicleInfo.state=selectedMetroDetails.state;break}}$scope.vehicleDetails.registrationNumber="undefined"!=String($rootScope.vehicleDetails.registrationNumber)?$rootScope.vehicleDetails.registrationNumber:$scope.vehicleDetails.registrationNumber,$scope.vehicleDetails.showCarRegAreaStatus=$rootScope.showCarRegAreaStatus,localStorageService.set("selectedBusinessLineId",3);var personDob=new Date((new Date).getFullYear()-46);convertDateFormatToString(personDob,function(formattedDateOfBirth){$scope.vehicleDetails.dateOfBirth=personDob,$scope.vehicleDetails.formattedDateOfBirth=formattedDateOfBirth}),"true"==$scope.vehicleInfo.previousClaim||$scope.vehicleDetails.policyStatus.key==$scope.policyStatusList[0].key||"new"==$scope.quoteParam.policyType?$scope.quoteParam.ncb=0:$scope.quoteParam.ncb=$scope.vehicleDetails.ncb.value,$scope.vehicleDetails.idvOption=1,$scope.vehicleDetails.manufacturingYear=$scope.vehicleDetails.regYear,$scope.vehicleInfo.IDV=0,delete $scope.vehicleInfo.IDV_QUOTE_ID,$scope.vehicleInfo.idvOption=$scope.vehicleDetails.idvOption,$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.vehicleInfo=$scope.vehicleInfo,localStorageService.set("carQuoteInputParamaters",$scope.quote),localStorageService.set("selectedCarDetails",$scope.vehicleDetails),$rootScope.idvOptionCopy=angular.copy($scope.vehicleDetails.idvOption),$scope.requestId=null;localStorageService.get("quoteUserInfo");$scope.carQuoteRequestFormation($scope.quote),RestAPI.invoke("carQuote",$scope.quoteRequest).then(function(callback){$rootScope.carQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success1?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("CAR_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("CAR_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("car_best_quote_id",$scope.requestId),$rootScope.carQuoteRequest=callback.data,"undefined"!=String($rootScope.carQuoteResult)&&$rootScope.carQuoteResult.length>0&&($rootScope.carQuoteResult.length=0),$rootScope.carQuoteResult=[],$scope.carQuoteResponse=[],angular.forEach($rootScope.carQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=getCarQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var carQuoteResponse=JSON.parse(callback);if($scope.carQuoteResponse.push(callback),carQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(carQuoteResponse.responseCode),carQuoteResponse.responseCode==$scope.globalLabel.responseCode.success1){for(var i=0;i<$rootScope.carQuoteRequest.length;i++)$rootScope.carQuoteRequest[i].messageId==carQuoteResponse.messageId&&($rootScope.loading=!1,$rootScope.carQuoteResult.push(carQuoteResponse.data.quotes[0]),$rootScope.carQuoteRequest[i].status=1);console.log("process Result is getting called"),$scope.processResult()}else for(i=0;i<$rootScope.carQuoteRequest.length;i++)$rootScope.carQuoteRequest[i].messageId==carQuoteResponse.messageId&&($rootScope.carQuoteRequest[i].status=2,$rootScope.carQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.carQuoteRequest.length){$rootScope.setTooltip=!1;for(var i=0;i<$rootScope.carQuoteRequest.length;i++)0==$rootScope.carQuoteRequest[i].status&&($rootScope.carQuoteRequest[i].status=2,$rootScope.carQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg));p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg)))}},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.carQuoteResult)&&$rootScope.carQuoteResult.length>0&&($rootScope.carQuoteResult.length=0),$rootScope.carQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.prePopulateFields=function(){if(console.log("prePopulateFields()"),localStorageService.get("selectedCarDetails")){$scope.carDetails=localStorageService.get("selectedBikeDetails");var getPolicyStatusKey=localStorageService.get("selectedCarDetails").policyStatusKey;if(getPolicyStatusKey){for(i=0;i<$scope.policyStatusList.length;i++)if(getPolicyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}}else{var getPolicyStatus=localStorageService.get("selectedCarDetails").policyStatus;if(getPolicyStatus)for(i=0;i<$scope.policyStatusList.length;i++)if(getPolicyStatus.key&&getPolicyStatus.key==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}}}else for(var i=0;i<$scope.policyStatusList.length;i++)if($scope.vehicleDetails.policyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}for(i=0;i<$scope.carInsuranceTypes.length;i++)if($scope.quoteParam.policyType==$scope.carInsuranceTypes[i].value){$scope.vehicleDetails.insuranceType=$scope.carInsuranceTypes[i];break}for(i=0;i<$scope.ncbList.length;i++)if($scope.quoteParam.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.alterRenewal(),$scope.toggleCounter=1,""==$scope.vehicleDetails.regYear&&($scope.vehicleDetails.regYear=$rootScope.regYearCopy);var vehicleDetailsCookie=localStorageService.get("vehicleRegistrationDetails");vehicleDetailsCookie&&"undefined"!=String(vehicleDetailsCookie.registrationNumber)&&null!=vehicleDetailsCookie.registrationNumber&&($rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookie.registrationNumber),$rootScope.carQuoteResult?$rootScope.carQuoteResult.length>0?(console.log("redirecting to car result from header navigation"),$location.path("/carResult")):(console.log("calling singleClickCarQuote() step-1"),$scope.singleClickCarQuote()):(console.log("calling singleClickCarQuote() step-2"),$scope.singleClickCarQuote())},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){$scope.renewal=!0,$scope.polStatus=!0,defaultQuoteStatus?($scope.quoteParam=angular.copy(defaultCarQuoteParam.quoteParam),$scope.vehicleDetails=angular.copy(defaultCarQuoteParam.vehicleDetails),$scope.vehicleInfo=angular.copy(defaultCarQuoteParam.vehicleInfo),$scope.vehicleDetails.displayVehicle="Maruti Suzuki Alto 800 LX PETROL",console.log("calling prePopulateFields() step-1"),$scope.prePopulateFields()):(console.log("carQuoteCookie",carQuoteCookie),carQuoteCookie.quoteParam&&($scope.quoteParam=carQuoteCookie.quoteParam),$scope.vehicleDetails=vehicleDetailsCookie,$scope.vehicleInfo=carQuoteCookie.vehicleInfo,$scope.vehicleDetails.selectedAddOnCovers=makeObjectEmpty($scope.vehicleDetails.selectedAddOnCovers,"array"),$scope.vehicleDetails.addOnCoverCustomAmount=makeObjectEmpty($scope.vehicleDetails.addOnCoverCustomAmount,"array"),$scope.vehicleDetails.checkforNonElectrical=!1,$scope.vehicleDetails.checkforElectrical=!1,$scope.vehicleDetails.checkforPsgCover=!1,$scope.vehicleDetails.checkforLpgCngCover=!1,$scope.vehicleDetails.checkforDriverAccCover=!1,$scope.vehicleDetails.checkforAccessoriesCover=!1,console.log('localStorageService.get("registrationPlaceUsingIP") in car',localStorageService.get("registrationPlaceUsingIP")),localStorageService.get("registrationPlaceUsingIP")&&1==localStorageService.get("registrationPlaceUsingIP").rtoStatus&&($scope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.selectedRegistrationObject=localStorageService.get("registrationPlaceUsingIP").rtoObject),$rootScope.showCarRegAreaStatus=vehicleDetailsCookie.showCarRegAreaStatus,$rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookie.registrationNumber,console.log("calling prePopulateFields() step-2"),$scope.prePopulateFields()),defaultInputParamCallback()};carQuoteCookie=localStorageService.get("carQuoteInputParamaters");console.log("carQuoteCookie is: ",carQuoteCookie),null!==carQuoteCookie&&"undefined"!==String(carQuoteCookie)?$scope.fetchDefaultInputParamaters(!1,function(){}):$scope.fetchDefaultInputParamaters(!0,function(){})};var formatedTodaysDate=("0"+((todayDate=new Date).getMonth()+1).toString()).substr(-2)+"/"+("0"+todayDate.getDate().toString()).substr(-2)+"/"+todayDate.getFullYear().toString();getPolicyStatusList(formatedTodaysDate),localStorageService.get("ridersCarStatus")?$scope.instantQuoteCalculation(localStorageService.get("addOnCoverListForCar")):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.car,$scope.globalLabel.request.findAppConfig,function(addOnCoverForCar){localStorageService.set("addOnCoverListForCar",addOnCoverForCar),localStorageService.set("ridersCarStatus",!0),getListFromDB(RestAPI,"","CarDataList",$scope.globalLabel.request.findAppConfig,function(callbackCar5){if(callbackCar5.responseCode==$scope.globalLabel.responseCode.success)if(localStorageService.set("carMakeListDisplay",callbackCar5.data),localStorageService.get("carQuoteInputParamaters")){if($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,$scope.vehicleInfo){var docId="Mobile"+$scope.vehicleInfo.variantId;getDocUsingId(RestAPI,docId,function(getDisplayVehicle){getDisplayVehicle?($scope.vehicleDetails&&($scope.vehicleDetails.displayVehicle=getDisplayVehicle.displayVehicle),$scope.carDetails=localStorageService.get("selectedCarDetails"),$scope.carDetails.displayVehicle=$scope.vehicleDetails.displayVehicle,localStorageService.set("selectedCarDetails",$scope.carDetails),console.log("display vehicle found for car"),$scope.instantQuoteCalculation(addOnCoverForCar)):(console.log("failed to get display vehicle from car variant"),$scope.instantQuoteCalculation(addOnCoverForCar))})}}else $scope.instantQuoteCalculation(addOnCoverForCar)})})}else if(2==tab){var bikeQuoteCookie;$scope.instantQuoteCalculation=function(addOnCoverList){addRidersToDefaultQuoteBike(addOnCoverList,localStorageService.get("selectedBusinessLineId"),function(defaultRiderList,defaultRiderArrayObject){$scope.quoteParam={},$scope.vehicleInfo={},$scope.vehicleDetails={},$rootScope.vehicleInfo={},$rootScope.vehicleDetails={},$scope.toggleCounter=0,$scope.bikeInsuranceTypes=[],$scope.yearList=[],$scope.makeNames=[],$scope.modelNames=[],$scope.variantNames=[],$scope.makeMap={},$scope.modelMap={},$scope.variantMap={},$scope.defaultMetroList=[],$scope.cityDetails={},$scope.quoteFinalResult=[],bikeQuoteCookie=localStorageService.get("bikeQuoteInputParamaters"),vehicleDetailsCookieBike=localStorageService.get("selectedBikeDetails"),$scope.defaultMetroList=localStorageService.get("defaultMetroCityList"),$scope.bikeInsuranceTypes=bikeInsuranceTypeGeneric,$scope.policyStatusList=policyStatusListGeneric,$scope.ncbList=ncbListGeneric,$scope.previousClaimStatus=previousClaimStatusGeneric,$rootScope.regNumStatus=!1,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$rootScope.disableBikeRegPopup=!0,$scope.instantQuoteBikeForm=!0,$scope.changePolStatus=function(){$scope.vehicleDetails.insuranceType.type==$scope.bikeInsuranceTypes[1].type?($scope.renewal=!0,$scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.vehicleDetails.policyStatus.expiryDate):($scope.renewal=!1,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")),1==$scope.toggleCounter&&($rootScope.wordPressEnabled||$scope.singleClickBikeQuote())},$scope.alterRenewal=function(){$scope.vehicleDetails.insuranceType.type!=$scope.bikeInsuranceTypes[1].type?($scope.polStatus=!1,$scope.renewal=!1,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.vehicleDetails.regYear=$scope.yearList[0]):($scope.polStatus=!0,$scope.renewal=!0,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge)),$scope.quoteParam.policyType=$scope.vehicleDetails.insuranceType.value,$scope.changePolStatus()},$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!=String($rootScope.bikeQuoteResult)&&0!=$rootScope.bikeQuoteResult.length?$rootScope.bikeQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScfope.tabSelectionStatus=!0,$scope.instantQuoteBikeForm=!1,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1):($scope.errorRespCounter=!1,$scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteBikeForm=!1,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1)},$scope.tooltipPrepare=function(bikeResult){var riderCount=0;$rootScope.riderOptionList="<ul style='text-align: left;' class='tickpoints'>";for(var i=0;i<defaultRiderArrayObject.length;i++)"Y"==defaultRiderArrayObject[i].isEnable&&(riderCount+=1,$rootScope.riderOptionList+="<li>"+defaultRiderArrayObject[i].riderName+"</li>");$rootScope.riderOptionList+="</ul>";var resultCarrierId=[],testCarrierId=[];for(i=0;i<bikeResult.length;i++)if(Number(bikeResult[i].netPremium)>0){var carrierInfo={};carrierInfo.id=bikeResult[i].carrierId,carrierInfo.name=bikeResult[i].insuranceCompany,carrierInfo.annualPremium=bikeResult[i].netPremium,carrierInfo.claimsRating=bikeResult[i].insurerIndex,0==p365Includes(testCarrierId,bikeResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(bikeResult[i].carrierId))}for($rootScope.resultCarrierId=resultCarrierId,i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(bikeResult.length).length?String(bikeResult.length):"0"+String(bikeResult.length),$rootScope.calculatedRidersLength=2==String(riderCount).length?String(riderCount):"0"+String(riderCount),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:1})},2e3)},$scope.processResult=function(){if($rootScope.bikeQuoteResult.length>0){$rootScope.enabledProgressLoader=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.modalShown=!1,$scope.instantQuoteBikeForm=!1,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.bikeQuoteResult=$filter("orderBy")($rootScope.bikeQuoteResult,"grossPremium");for(var minAnnualPremiumValue=$rootScope.bikeQuoteResult[0].grossPremium,annualPremiumSliderArray=[],j=0;j<$rootScope.bikeQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.bikeQuoteResult[j].bikeDiscountDetails;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i]["com.sutrr.quote.bikequotecalc.BikeDiscountDetails"].discountAmount;calculatedDiscAmt+=$rootScope.bikeQuoteResult[j].grossPremium,annualPremiumSliderArray.push(calculatedDiscAmt)}else annualPremiumSliderArray.push($rootScope.bikeQuoteResult[j].grossPremium)}annualPremiumSliderArray=$filter("orderBy")(annualPremiumSliderArray),$scope.updateAnnualPremiumRange(minAnnualPremiumValue,annualPremiumSliderArray[annualPremiumSliderArray.length-1])}$location.path("/bikeResult")},$scope.singleClickBikeQuote=function(){setTimeout(function(){if($scope.quote={},$rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.errorRespCounter=!0,$scope.instantQuoteBikeForm=!0,$rootScope.disableBikeRegPopup=!0,$rootScope.loading=!0,null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject))$scope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$rootScope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$scope.vehicleInfo.city=$rootScope.vehicleInfo.selectedRegistrationObject.city,$scope.vehicleInfo.RTOCode=$rootScope.vehicleInfo.selectedRegistrationObject.regisCode,$scope.vehicleInfo.state=$rootScope.vehicleInfo.selectedRegistrationObject.state;else{var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";if($scope.defaultMetroList)for(var i=0;i<$scope.defaultMetroList.length;i++)if($scope.defaultMetroList[i].cityName==cityName)for(var j=0;j<$scope.defaultMetroList[i].RTODetails.length;j++){var selectedMetroDetails=$scope.defaultMetroList[i].RTODetails[j];if(selectedMetroDetails.display==$scope.vehicleInfo.registrationPlace){$scope.vehicleInfo.city=selectedMetroDetails.city,$scope.vehicleInfo.RTOCode=selectedMetroDetails.regisCode,$scope.vehicleInfo.state=selectedMetroDetails.state;break}}}$scope.vehicleDetails.registrationNumber="undefined"!=String($rootScope.vehicleDetails.registrationNumber)?$rootScope.vehicleDetails.registrationNumber:$scope.vehicleDetails.registrationNumber,$scope.vehicleDetails.showBikeRegAreaStatus=$rootScope.showBikeRegAreaStatus;var todayDate=new Date;$scope.quoteParam.policyType==$scope.bikeInsuranceTypes[0].value?($scope.vehicleInfo.dateOfRegistration=("0"+todayDate.getDate().toString()).substr(-2)+"/"+("0"+(Number(todayDate.getMonth())+1).toString()).substr(-2)+"/"+$scope.vehicleDetails.regYear,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")):(todayDate.getFullYear()==$scope.vehicleDetails.regYear?$scope.vehicleInfo.dateOfRegistration="01/01/"+$scope.vehicleDetails.regYear:$scope.vehicleInfo.dateOfRegistration="01/07/"+$scope.vehicleDetails.regYear,convertStringFormatToDate($scope.vehicleInfo.PreviousPolicyExpiryDate,function(formattedPolicyExpiryDate){var tempPreviousPolicyExpiryDate=new Date(angular.copy(formattedPolicyExpiryDate)),tempCalcPrevPolStartDate=new Date(tempPreviousPolicyExpiryDate.setFullYear(new Date(tempPreviousPolicyExpiryDate).getFullYear()-1));(tempCalcPrevPolStartDate=new Date(new Date(String(tempCalcPrevPolStartDate)).setDate(new Date(String(tempCalcPrevPolStartDate)).getDate()+1))).setHours(0,0,0,0)<new Date($scope.vehicleInfo.dateOfRegistration).setHours(0,0,0,0)||convertDateFormatToString(tempCalcPrevPolStartDate,function(formattedPrevPolStartDate){})}));localStorageService.set("selectedBusinessLineId",2),$scope.vehicleDetails.manufacturingYear=$scope.vehicleDetails.regYear,"true"==$scope.vehicleInfo.previousClaim||$scope.vehicleDetails.policyStatus.key==$scope.policyStatusList[0].key||"new"==$scope.quoteParam.policyType||1==$scope.vehicleDetails.policyStatus.key?$scope.quoteParam.ncb=0:$scope.quoteParam.ncb=$scope.vehicleDetails.ncb.value,$scope.vehicleDetails.idvOption=1,$scope.vehicleInfo.IDV=0,delete $scope.vehicleInfo.best_quote_id,$scope.vehicleInfo.idvOption=$scope.vehicleDetails.idvOption,$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.vehicleInfo=$scope.vehicleInfo,localStorageService.set("bikeQuoteInputParamaters",$scope.quote),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),$rootScope.idvOptionCopy=angular.copy($scope.vehicleDetails.idvOption),$scope.requestId=null,$rootScope.bikeQuoteResult=[],$scope.bikeQuoteRequestFormation($scope.quote),RestAPI.invoke("bikeQuote",$scope.quoteRequest).then(function(callback){$rootScope.bikeQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success1?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("BIKE_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,console.log("$scope.UNIQUE_QUOTE_ID_ENCRYPTED is",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("BIKE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("bike_best_quote_id",$scope.requestId),$rootScope.bikeQuoteRequest=callback.data,"undefined"!=String($rootScope.bikeQuoteResult)&&$rootScope.bikeQuoteResult.length>0&&($rootScope.bikeQuoteResult.length=0),$scope.bikeQuoteResponse=[],olarkCustomParam(localStorageService.get("BIKE_UNIQUE_QUOTE_ID"),localStorageService.get("selectedBusinessLineId"),localStorageService.get("quoteUserInfo"),!0),angular.forEach($rootScope.bikeQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=$scope.globalLabel.transactionName.bikeQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var bikeQuoteResponse=JSON.parse(callback);if($scope.bikeQuoteResponse.push(callback),bikeQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(bikeQuoteResponse.responseCode),bikeQuoteResponse.responseCode==$scope.globalLabel.responseCode.success1){for(i=0;i<$rootScope.bikeQuoteRequest.length;i++)$rootScope.bikeQuoteRequest[i].messageId==bikeQuoteResponse.messageId&&($rootScope.loading=!1,$rootScope.bikeQuoteResult.push(bikeQuoteResponse.data.quotes[0]),$rootScope.bikeQuoteRequest[i].status=1);$scope.processResult()}else for(i=0;i<$rootScope.bikeQuoteRequest.length;i++)$rootScope.bikeQuoteRequest[i].messageId==bikeQuoteResponse.messageId&&($rootScope.bikeQuoteRequest[i].status=2,$rootScope.bikeQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.bikeQuoteRequest.length&&($rootScope.loading=!1,p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg))))},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.bikeQuoteResult)&&$rootScope.bikeQuoteResult.length>0&&($rootScope.bikeQuoteResult.length=0),$rootScope.bikeQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.prePopulateFields=function(){if(localStorageService.get("selectedBikeDetails")){$scope.bikeDetails=localStorageService.get("selectedBikeDetails");var getPolicyStatusKey=localStorageService.get("selectedBikeDetails").policyStatusKey;if(getPolicyStatusKey){for(i=0;i<$scope.policyStatusList.length;i++)if(getPolicyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}}else{var getPolicyStatus=localStorageService.get("selectedBikeDetails").policyStatus;if(getPolicyStatus)for(i=0;i<$scope.policyStatusList.length;i++)if(getPolicyStatus.key&&getPolicyStatus.key==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}}}else for(var i=0;i<$scope.policyStatusList.length;i++)if($scope.vehicleDetails.policyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}for(i=0;i<$scope.bikeInsuranceTypes.length;i++)if($scope.quoteParam.policyType==$scope.bikeInsuranceTypes[i].value){$scope.vehicleDetails.insuranceType=$scope.bikeInsuranceTypes[i];break}for(i=0;i<$scope.ncbList.length;i++)if($scope.quoteParam.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.alterRenewal(),$scope.toggleCounter=1,vehicleDetailsCookieBike=localStorageService.get("vehicleRegistrationDetails"),vehicleDetailsCookieBike&&"undefined"!=String(vehicleDetailsCookieBike.registrationNumber)&&null!=vehicleDetailsCookieBike.registrationNumber&&($rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookieBike.registrationNumber),$rootScope.bikeQuoteResult&&$rootScope.bikeQuoteResult.length>0?$location.path("/bikeResult"):$scope.singleClickBikeQuote()},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){$scope.renewal=!1,$scope.polStatus=!1,console.log("inside fetchDefaultInputParamaters"),defaultQuoteStatus?($scope.quoteParam=defaultBikeQuoteParam.quoteParam,$scope.vehicleDetails=defaultBikeQuoteParam.vehicleDetails,$scope.vehicleInfo=defaultBikeQuoteParam.vehicleInfo,$scope.PACoverDetails=defaultBikeQuoteParam.PACoverDetails,$scope.vehicleInfo.make="Hero MotoCorp",$scope.vehicleInfo.model="Duet",$scope.vehicleInfo.variant="VX",console.log("inside fetchDefaultInputParamaters")):(localStorageService.get("bikeQuoteInputParamaters")&&($scope.quoteParam.ownedBy=localStorageService.get("bikeQuoteInputParamaters").quoteParam.ownedBy),$scope.vehicleDetails=vehicleDetailsCookieBike,$scope.vehicleInfo=bikeQuoteCookie.vehicleInfo,localStorageService.get("BikePACoverDetails")&&($scope.PACoverDetails=localStorageService.get("BikePACoverDetails")),console.log('localStorageService.get("registrationPlaceUsingIP") in bike',localStorageService.get("registrationPlaceUsingIP")),localStorageService.get("registrationPlaceUsingIP")&&1==localStorageService.get("registrationPlaceUsingIP").rtoStatus&&($scope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.selectedRegistrationObject=localStorageService.get("registrationPlaceUsingIP").rtoObject),vehicleDetailsCookieBike.showBikeRegAreaStatus&&($rootScope.showBikeRegAreaStatus=vehicleDetailsCookieBike.showBikeRegAreaStatus),vehicleDetailsCookieBike.registrationNumber&&($rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookieBike.registrationNumber)),$scope.prePopulateFields(),defaultInputParamCallback()},bikeQuoteCookie=localStorageService.get("bikeQuoteInputParamaters"),console.log("bikeQuoteCookie is: ",bikeQuoteCookie),null!==bikeQuoteCookie&&"undefined"!==String(bikeQuoteCookie)?$scope.fetchDefaultInputParamaters(!1,function(){}):$scope.fetchDefaultInputParamaters(!0,function(){})})};var todayDate;formatedTodaysDate=("0"+((todayDate=new Date).getMonth()+1).toString()).substr(-2)+"/"+("0"+todayDate.getDate().toString()).substr(-2)+"/"+todayDate.getFullYear().toString();getPolicyStatusList(formatedTodaysDate),localStorageService.get("ridersBikeStatus")?$scope.instantQuoteCalculation(localStorageService.get("addOnCoverListForBike")):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.bike,$scope.globalLabel.request.findAppConfig,function(addOnCoverList){localStorageService.set("addOnCoverListForBike",addOnCoverList),localStorageService.set("ridersBikeStatus",!0),getListFromDB(RestAPI,"","BikeVariants",$scope.globalLabel.request.findAppConfig,function(callbackCar5){callbackCar5.responseCode==$scope.globalLabel.responseCode.success&&(localStorageService.set("bikeMakeListDisplay",callbackCar5.data),localStorageService.get("bikeQuoteInputParamaters")?($scope.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,$scope.instantQuoteCalculation(addOnCoverList)):$scope.instantQuoteCalculation(addOnCoverList))})})}else if(1==tab){function getAllProductFeatures(selectedProduct,productFetchStatus){var variableReplaceArray=[],productFeatureJSON={};$rootScope.consolidatedBenefitsList=[],$rootScope.consolidatedSavingsList=[],$rootScope.consolidatedFlexibilityList=[],productFeatureJSON.documentType=$scope.globalLabel.documentType.lifeProduct,productFeatureJSON.carrierId=selectedProduct.carrierId,productFeatureJSON.productId=selectedProduct.productId,productFeatureJSON.businessLineId=1;for(var selectedCarrierId=selectedProduct.carrierId,selectedProductId=selectedProduct.productId,i=0;i<$rootScope.carrierDetails.brochureList.length;i++)selectedProduct.carrierId==$rootScope.carrierDetails.brochureList[i].carrierId&&($scope.brochureUrl=$rootScope.carrierDetails.brochureList[i].brochureUrl);variableReplaceArray.push({id:"{{sumInsured}}",value:Math.round(selectedProduct.sumInsured)}),variableReplaceArray.push({id:"{{monthlyPayout}}",value:selectedProduct.monthlyPayout}),variableReplaceArray.push({id:"{{policyTerm}}",value:selectedProduct.policyTerm}),productFetchStatus&&RestAPI.invoke($scope.globalLabel.transactionName.getProductFeatures,productFeatureJSON).then(function(callback){var scopeVariableName="productFeaturesList_"+selectedCarrierId+"_"+selectedProductId,productFeatureJSONName="productFeaturesJSON_"+selectedCarrierId+"_"+selectedProductId;$rootScope[productFeatureJSONName]={},$scope[scopeVariableName]=callback.data[0].Features;for(var i=0;i<variableReplaceArray.length;i++)p365Includes($scope[scopeVariableName][1].details,variableReplaceArray[i].id)&&($scope[scopeVariableName][1].details=$scope[scopeVariableName][1].details.replace(variableReplaceArray[i].id,variableReplaceArray[i].value));for(i=0;i<$scope[scopeVariableName].length;i++)$rootScope[productFeatureJSONName][callback.data[0].Features[i].titleForCompareView]=callback.data[0].Features[i].detailsForCompareView;selectedProduct.features=$rootScope[productFeatureJSONName];for(i=0;i<$scope[scopeVariableName].length;i++)"Benefits"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedBenefitsList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedBenefitsList.push($scope[scopeVariableName][i].titleForCompareView),"Savings"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedSavingsList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedSavingsList.push($scope[scopeVariableName][i].titleForCompareView),"Flexibility"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedFlexibilityList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedFlexibilityList.push($scope[scopeVariableName][i].titleForCompareView)})}$rootScope.carrierDetails={},getDocUsingId(RestAPI,$scope.globalLabel.applicationLabels.life.ridersDocInDB,function(carrierDetails){$rootScope.carrierDetails=carrierDetails,$scope.instantQuoteCalculation=function(addOnCoverForLife){addRidersToDefaultQuote(addOnCoverForLife,localStorageService.get("selectedBusinessLineId"),function(defaultRiderList,defaultRiderArrayObject){var lifeQuoteCookie=localStorageService.get("lifeQuoteInputParamaters"),personalDetailsCookie=localStorageService.get("lifePersonalDetails");$scope.quote={},$scope.quoteParam={},$scope.personalDetails={},$scope.relationType=relationLifeQuoteGeneric,$scope.healthConditionType=healthConditionGeneric,$scope.annualIncomesRange=annualIncomesGeneric,$scope.genderType=genderTypeGeneric,$scope.tobaccoAddictionStatus=tobaccoAddictionStatusGeneric,$scope.payoutOptions=lifePayoutOptionsGeneric,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteLifeForm=!0,$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){"undefined"==String($rootScope.lifeQuoteResult)||0==$rootScope.lifeQuoteResult.length?($scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteLifeForm=!1):$rootScope.lifeQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteLifeForm=!1),$rootScope.loading=!1},$scope.tooltipPrepare=function(lifeResult){$rootScope.riderOptionList="<ul style='text-align: left;' class='tickpoints'>";for(var i=0;i<addOnCoverForLife.length;i++)$rootScope.riderOptionList+="<li>"+addOnCoverForLife[i].riderName+"</li>";$rootScope.riderOptionList+="</ul>";var resultCarrierId=[],testCarrierId=[];for(i=0;i<lifeResult.length;i++)if(Number(lifeResult[i].annualPremium)>0){var carrierInfo={};carrierInfo.id=lifeResult[i].carrierId,carrierInfo.name=lifeResult[i].insuranceCompany,carrierInfo.annualPremium=lifeResult[i].annualPremium,carrierInfo.isMonthlyPremium=!1,carrierInfo.claimsRating=lifeResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.sumInsured=lifeResult[i].sumInsured,carrierInfo.businessLineId="1"),0==p365Includes(testCarrierId,lifeResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(lifeResult[i].carrierId))}$rootScope.resultCarrierId=resultCarrierId;for(i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(lifeResult.length).length?String(lifeResult.length):"0"+String(lifeResult.length),$rootScope.calculatedRidersLength=2==String(addOnCoverForLife.length).length?String(addOnCoverForLife.length):"0"+String(addOnCoverForLife.length),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:1})},2e3)},$scope.processResult=function(){if($rootScope.lifeQuoteResult.length>0){$rootScope.enabledProgressLoader=!1,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteLifeForm=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.lifeQuoteResult=$filter("orderBy")($rootScope.lifeQuoteResult,"dailyPremium");for(var minDailyPremiumValue=$rootScope.lifeQuoteResult[0].dailyPremium,dailyPremiumSliderArray=[],j=0;j<$rootScope.lifeQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.lifeQuoteResult[j].discountList;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i].discountAmount;calculatedDiscAmt+=$rootScope.lifeQuoteResult[j].dailyPremium,dailyPremiumSliderArray.push(calculatedDiscAmt)}else dailyPremiumSliderArray.push($rootScope.lifeQuoteResult[j].dailyPremium)}dailyPremiumSliderArray=$filter("orderBy")(dailyPremiumSliderArray),$scope.updateAnnualPremiumRange(minDailyPremiumValue,dailyPremiumSliderArray[dailyPremiumSliderArray.length-1]),setTimeout(function(){$rootScope.loading=!1,$location.path("/lifeResult")},100)}},$scope.singleClickLifeQuote=function(){setTimeout(function(){if($rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.instantQuoteLifeForm=!0,$rootScope.loading=!0,localStorageService.set("selectedBusinessLineId",1),$scope.quoteParam.documentType=$scope.globalLabel.documentType.quoteRequest,$scope.quoteParam.quoteType=localStorageService.get("selectedBusinessLineId"),$scope.quoteParam.personType=relationLifeQuoteGeneric[0],$scope.quoteParam.payoutId=$scope.payoutOptions[0].id,$scope.quoteParam.annualIncome=$scope.personalDetails.annualIncomeObject.annualIncome,$scope.quoteParam.annualIncomeInterval=$scope.personalDetails.annualIncomeObject.annualIncomeInterval,$scope.quoteParam.sumInsured=$scope.personalDetails.sumInsuredObject.amount,$scope.quoteParam.frequency="Annual",$scope.quoteParam.age>35)var policyTerm=maturityAgeConstant-$scope.quoteParam.age;else policyTerm=40;policyTerm<$scope.personalDetails.minPolicyTermLimit?$scope.quoteParam.policyTerm=$scope.personalDetails.minPolicyTermLimit:$scope.quoteParam.policyTerm=policyTerm,$scope.personalDetails.minMaturityAge=$scope.quoteParam.age+5,$scope.personalDetails.dateOfBirth=calcDOBFromAge($scope.quoteParam.age),$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.personalDetails=$scope.personalDetails,$scope.quote.requestType=$scope.globalLabel.request.lifeRequestType,localStorageService.set("lifeQuoteInputParamaters",$scope.quote),localStorageService.set("lifePersonalDetails",$scope.personalDetails),$scope.requestId=null,RestAPI.invoke($scope.globalLabel.getRequest.quoteLife,$scope.quote).then(function(callback){$rootScope.lifeQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("LIFE_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("LIFE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$rootScope.lifeQuoteRequest=callback.data,"undefined"!=String($scope.quoteResult)&&$scope.quoteResult.length>0&&($scope.quoteResult.length=0),"undefined"!=String($rootScope.lifeQuoteResult)&&$rootScope.lifeQuoteResult.length>0&&($rootScope.lifeQuoteResult.length=0),$rootScope.lifeQuoteResult=[],$scope.lifeQuoteResponse=[],angular.forEach($rootScope.lifeQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.deviceId=deviceIdOrigin,header.transactionName=$scope.globalLabel.transactionName.lifeQuoteResult,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var lifeQuoteResponse=JSON.parse(callback);if($scope.lifeQuoteResponse.push(callback),lifeQuoteResponse.QUOTE_ID==$scope.requestId&&($scope.responseCodeList.push(lifeQuoteResponse.responseCode),lifeQuoteResponse.responseCode==$scope.globalLabel.responseCode.success)){for(var j=0;j<$rootScope.carrierDetails.riderList.length;j++)$rootScope.carrierDetails.riderList[j].carrierId==lifeQuoteResponse.data.quotes[0].carrierId&&$rootScope.carrierDetails.riderList[j].productId==lifeQuoteResponse.data.quotes[0].productId&&(lifeQuoteResponse.data.quotes[0].riders=$rootScope.carrierDetails.riderList[j].riders);for(var k=0;k<lifeQuoteResponse.data.quotes[0].riderList.length;k++)for(var l=0;l<lifeQuoteResponse.data.quotes[0].riders.length;l++)lifeQuoteResponse.data.quotes[0].riderList[k].riderId==lifeQuoteResponse.data.quotes[0].riders[l].id&&(lifeQuoteResponse.data.quotes[0].riders[l].value=lifeQuoteResponse.data.quotes[0].riderList[k].riderPremiumAmount);if(lifeQuoteResponse.data.quotes[0].riders)for(var m=0;m<lifeQuoteResponse.data.quotes[0].riders.length;m++)"At Additional Cost"==lifeQuoteResponse.data.quotes[0].riders[m].riderType?(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="additionalCost",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Additional Cost"):"Not Available"==lifeQuoteResponse.data.quotes[0].riders[m].riderType?(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="notAvailable",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Not Available"):"Included"==lifeQuoteResponse.data.quotes[0].riders[m].riderType&&(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="included",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Included");for(var i=0;i<$rootScope.lifeQuoteRequest.length;i++)$rootScope.lifeQuoteRequest[i].messageId==lifeQuoteResponse.messageId&&($rootScope.loading=!1,lifeQuoteResponse.data.quotes[0].dailyPremium=Math.round(lifeQuoteResponse.data.quotes[0].annualPremium/365),lifeQuoteResponse.data.quotes[0].insuranceCompany=JSON.parse(lifeQuoteResponse.data.quotes[0].insuranceCompany),$rootScope.lifeQuoteResult.push(lifeQuoteResponse.data.quotes[0]),getAllProductFeatures(lifeQuoteResponse.data.quotes[0],!0),$rootScope.lifeQuoteRequest[i].status=1);$scope.processResult()}}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.lifeQuoteRequest.length&&($rootScope.loading=!1,p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedLifeErrMsg))))},!0)):($scope.responseCodeList=[],"undefined"!=String($scope.quoteResult)&&$scope.quoteResult.length>0&&($scope.quoteResult.length=0),"undefined"!=String($rootScope.lifeQuoteResult)&&$rootScope.lifeQuoteResult.length>0&&($rootScope.lifeQuoteResult.length=0),$rootScope.lifeQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.prePopulateFields=function(){for(var i=0;i<annualIncomesGeneric.length;i++)if($scope.quoteParam.annualIncome==annualIncomesGeneric[i].annualIncome){$scope.personalDetails.annualIncomeObject=annualIncomesGeneric[i];break}listSumAssuredAmt($scope.personalDetails.annualIncomeObject.annualIncome,function(sumInsuredArray,selectedSumAssured){$scope.quoteParam.sumInsured=selectedSumAssured.amount,$scope.personalDetails.sumInsuredObject=selectedSumAssured,$scope.personalDetails.sumInsuredList=sumInsuredArray}),console.log("$rootScope.lifeQuoteResult length is: ",$rootScope.lifeQuoteResult),$rootScope.lifeQuoteResult&&$rootScope.lifeQuoteResult.length>0&&$location.path("/lifeResult"),setTimeout(function(){$rootScope.wordPressEnabled||$scope.singleClickLifeQuote()},100)},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){defaultQuoteStatus?($scope.quoteParam=defaultLifeQuoteParam.quoteParam,$scope.personalDetails=defaultLifeQuoteParam.personalDetails):($scope.quoteParam=lifeQuoteCookie.quoteParam,$scope.personalDetails=personalDetailsCookie,$scope.quoteParam.riders=makeObjectEmpty($scope.quoteParam.riders,"array"),$scope.personalDetails.selectedAddOnCovers=makeObjectEmpty($scope.quoteParam.riders,"array")),$scope.ageList=getAgeList($scope.personalDetails.minInsuredAge,$scope.personalDetails.maxInsuredAge),$scope.prePopulateFields(),defaultInputParamCallback()},null!=lifeQuoteCookie&&"undefined"!==String(lifeQuoteCookie)?$scope.fetchDefaultInputParamaters(!1,function(){}):$scope.fetchDefaultInputParamaters(!0,function(){})})},localStorageService.get("ridersLifeStatus")?$scope.instantQuoteCalculation(localStorageService.get("addOnCoverForLife")):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.life,$scope.globalLabel.request.findAppConfig,function(addOnCoverForLife){localStorageService.set("addOnCoverForLife",addOnCoverForLife),localStorageService.set("ridersLifeStatus",!0),$scope.instantQuoteCalculation(addOnCoverForLife)})})}else if(4==tab)$scope.healthInstantQuoteCalculation=function(addOnCoverForHealth){addRidersToDefaultQuote(addOnCoverForHealth,localStorageService.get("selectedBusinessLineId"),function(defaultRiderList,defaultRiderArrayObject){var member,healthQuoteCookie=localStorageService.get("healthQuoteInputParamaters");$scope.quote={},$scope.quoteParam={},$scope.ratingParam={},$scope.personalInfo={},$scope.quote.quoteParam={},$scope.quoteFinalResult={},$scope.selectedDisease={},$scope.medicalInstant={},$scope.quoteFinalResult.quotes=[],$scope.selectedDisease.diseaseList=[],$scope.selectedFamilyArray=[],$scope.diseaseList=localStorageService.get("diseaseList"),$scope.hospitalizationLimitArray=localStorageService.get("hospitalizationLimitList"),$scope.familyList=healthFamilyListGeneric,$scope.genderType=genderTypeGeneric,$scope.preDiseaseStatus=preDiseaseStatusGeneric,$scope.personalInfo.selFamilyMember=selectedFamilyMemberId,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteHealthForm=!0,$scope.medicalInstant.collapseFamilyList=!1,$scope.$watch(function(scope){return scope.familyList},function(){$scope.selectedFamilyArray=[];for(var i=0;i<$scope.familyList.length;i++)1==$scope.familyList[i].val&&((member={}).id=$scope.familyList[i].id,member.display=$scope.familyList[i].member,member.existSince="",member.existSinceError=!1,member.status=!1,"Son"==member.relation||"Daughter"==member.relation?member.label=$scope.familyList[i].member.concat(" aged ").concat($scope.familyList[i].age):member.label=$scope.familyList[i].member,$scope.selectedFamilyArray.push(member))},!0),$scope.calcDefaultAreaDetails=function(areaCode){$http.get(getServiceLink+"Pincode&q="+areaCode).then(function(response){var areaDetails=JSON.parse(response.data);areaDetails.responseCode==$scope.globalLabel.responseCode.success&&$scope.onSelectPinOrArea(areaDetails.data[0])})},$scope.onSelectPinOrArea=function(item){$scope.modalPIN=!1,$scope.selectedArea=item.area,$scope.personalInfo.pincode=item.pincode,$scope.personalInfo.displayArea=item.area+", "+item.district,$scope.personalInfo.city=item.district,$scope.personalInfo.state=item.state,$scope.displayPincodeInfo=item.pincode+" - "+$scope.personalInfo.displayArea,localStorageService.set("commAddressDetails",item)},$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!==$rootScope.healthQuoteResult&&0!=$rootScope.healthQuoteResult.length?$rootScope.healthQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteHealthForm=!1,$rootScope.loading=!1):($scope.errorRespCounter=!1,$scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteHealthForm=!1,$rootScope.loading=!1)},$scope.tooltipPrepare=function(healthResult){var i;for($rootScope.riderOptionList="<ul style='text-align: left;' class='tickpoints'>",i=0;i<addOnCoverForHealth.length;i++)$rootScope.riderOptionList+="<li>"+addOnCoverForHealth[i].riderName+"</li>";$rootScope.riderOptionList+="</ul>";var resultCarrierId=[],testCarrierId=[];for(i=0;i<healthResult.length;i++)if(Number(healthResult[i].annualPremium)>0){var carrierInfo={};carrierInfo.id=healthResult[i].carrierId,carrierInfo.name=healthResult[i].insuranceCompany,carrierInfo.annualPremium=healthResult[i].annualPremium,carrierInfo.claimsRating=healthResult[i].insurerIndex,0==p365Includes(testCarrierId,healthResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(healthResult[i].carrierId))}for($rootScope.resultCarrierId=resultCarrierId,i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(healthResult.length).length?String(healthResult.length):"0"+String(healthResult.length),$rootScope.calculatedRidersLength=2==String(addOnCoverForHealth.length).length?String(addOnCoverForHealth.length):"0"+String(addOnCoverForHealth.length),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:1})},3e3)},$scope.processResult=function(){$rootScope.healthQuoteResult.length>0&&($rootScope.enabledProgressLoader=!1,$rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteHealthForm=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.healthQuoteResult=$filter("orderBy")($rootScope.healthQuoteResult,"annualPremium"),setTimeout(function(){$location.path("/healthResult")},100))},$scope.singleClickHealthQuote=function(){setTimeout(function(){for($rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.errorRespCounter=!0,$scope.instantQuoteHealthForm=!0,$rootScope.loading=!0,$scope.quoteParam.dependent=[],$scope.quoteParam.preExistingDisease=[],$scope.personalInfo.selectedFamilyMembers=[],$scope.personalInfo.minHospitalisationLimit=$scope.hospitalisationLimit.minHosLimit,$scope.personalInfo.maxHospitalisationLimit=$scope.hospitalisationLimit.maxHosLimit,$scope.quoteParam.childCount=0,$scope.quoteParam.adultCount=0,$scope.quoteParam.totalCount=0,1==$scope.isDiseased&&($scope.quoteParam.preExistingDisease=$scope.selectedDisease.diseaseList),i=0;i<$scope.familyList.length;i++)"Self"==$scope.familyList[i].member&&($scope.quoteParam.selfAge=Number($scope.familyList[i].age));for(i=0;i<$scope.familyList.length;i++)"Spouse"==$scope.familyList[i].member&&($scope.ratingParam.spouseAge=Number($scope.familyList[i].age));for($scope.ratingParam.minInsuredAge=Number($scope.familyList[0].age),$scope.ratingParam.maxInsuredAge=Number($scope.familyList[0].age),i=1;i<$scope.familyList.length;i++)$scope.familyList[i].age<$scope.ratingParam.minInsuredAge&&($scope.ratingParam.minInsuredAge=Number($scope.familyList[i].age)),$scope.familyList[i].age>$scope.ratingParam.minInsuredAge&&($scope.ratingParam.maxInsuredAge=Number($scope.familyList[i].age));for(i=0;i<$scope.familyList.length;i++)1==$scope.familyList[i].val&&((member={}).relationShip=$scope.familyList[i].relationship,member.age=Number($scope.familyList[i].age),"F"==$scope.quoteParam.selfGender&&"S"==$scope.quoteParam.selfRelationShip&&"S"==member.relationShip?member.gender="F":"F"==$scope.quoteParam.selfGender&&"S"==$scope.quoteParam.selfRelationShip&&"SP"==member.relationShip?member.gender="M":member.gender=$scope.familyList[i].gender,member.occupationClass=$scope.familyList[i].occupationClass,$scope.quoteParam.dependent.push(member));for($scope.personalInfo.selectedFamilyMembers=[],i=0;i<$scope.familyList.length;i++)1==$scope.familyList[i].val&&((member={}).id=Number($scope.familyList[i].id),member.age=Number($scope.familyList[i].age),member.dob=calcDOBFromAge($scope.familyList[i].age),member.existSince="",member.existSinceError=!1,member.status=!1,member.relationship=$scope.familyList[i].relationship,"F"==$scope.quoteParam.selfGender&&"S"==$scope.quoteParam.selfRelationShip&&"S"==member.relationship?member.gender="Female":"F"==$scope.quoteParam.selfGender&&"S"==$scope.quoteParam.selfRelationShip&&"SP"==member.relationship?member.gender="Male":member.gender="M"==$scope.familyList[i].gender?"Male":"Female",member.salutation="Male"==member.gender?"Mr":"Ms",member.relation=$scope.familyList[i].member,"Son"==member.relation||"Daughter"==member.relation?member.display=member.relation+" aged "+member.age:member.display=member.relation,$scope.personalInfo.selectedFamilyMembers.push(member));for(i=0;i<$scope.personalInfo.selectedFamilyMembers.length;i++){$scope.personalInfo.selectedFamilyMembers[i].dieaseDetails=[],$scope.dieaseDetails=[];for(var j=0;j<$scope.diseaseList.length;j++)if(1==p365Includes($scope.selectedDisease.diseaseList,$scope.diseaseList[j].diseaseId))for(var k=0;k<$scope.diseaseList[j].familyList.length;k++)if($scope.personalInfo.selectedFamilyMembers[i].id==$scope.diseaseList[j].familyList[k].id){$scope.diseaseList[j].familyList[k].status=!0;var dieaseDetails={};dieaseDetails.dieaseCode=$scope.diseaseList[j].diseaseId,dieaseDetails.dieaseName=$scope.diseaseList[j].disease,dieaseDetails.masterDieaseCode=$scope.diseaseList[j].diseaseCode,dieaseDetails.applicable=!0,$scope.dieaseDetails.push(dieaseDetails)}$scope.personalInfo.selectedFamilyMembers[i].dieaseDetails=$scope.dieaseDetails}for(var i=0;i<$scope.quoteParam.dependent.length;i++)"CH"==$scope.quoteParam.dependent[i].relationShip&&$scope.quoteParam.dependent[i].age<=$scope.ratingParam.maxAllowedChildAge?$scope.quoteParam.childCount++:$scope.quoteParam.adultCount++;var familyCounter=0;for(i=0;i<$scope.familyList.length;i++)1==$scope.familyList[i].val&&(familyCounter+=1);$scope.quoteParam.planType=familyCounter>1?"F":"I",localStorageService.set("selectedBusinessLineId",4),$scope.quoteParam.totalCount=$scope.quoteParam.adultCount+$scope.quoteParam.childCount,$scope.quoteParam.documentType=$scope.globalLabel.documentType.quoteRequest,$scope.quoteParam.quoteType=localStorageService.get("selectedBusinessLineId"),$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.ratingParam=$scope.ratingParam,$scope.quote.personalInfo=$scope.personalInfo,$scope.quote.requestType=$scope.globalLabel.request.healthRequestType,localStorageService.set("healthQuoteInputParamaters",$scope.quote),localStorageService.set("selectedArea",$scope.selectedArea),localStorageService.set("isDiseasedForHealth",$scope.isDiseased),localStorageService.set("selectedFamilyForHealth",$scope.familyList),localStorageService.set("selectedDisease",$scope.selectedDisease),localStorageService.set("selectedFamilyArray",$scope.selectedFamilyArray),localStorageService.set("diseaseList",$scope.diseaseList),$rootScope.hospitalisationLimit=$scope.hospitalisationLimit,localStorageService.set("hospitalisationLimitVal",$scope.hospitalisationLimit),localStorageService.set("healthQuoteInputParamatersReset",$scope.quote),localStorageService.set("selectedAreaReset",$scope.selectedArea),localStorageService.set("isDiseasedForHealthReset",$scope.isDiseased),localStorageService.set("selectedFamilyForHealthReset",$scope.familyList),localStorageService.set("selectedDiseaseReset",$scope.selectedDisease),localStorageService.set("selectedFamilyArrayReset",$scope.selectedFamilyArray),localStorageService.set("diseaseListReset",$scope.diseaseList),localStorageService.set("hospitalisationLimitValReset",$scope.hospitalisationLimit),RestAPI.invoke($scope.globalLabel.getRequest.quoteHealth,$scope.quote).then(function(healthQuoteResult){$rootScope.healthQuoteRequest=[],healthQuoteResult.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=healthQuoteResult.QUOTE_ID,localStorageService.set("HEALTH_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=healthQuoteResult.encryptedQuoteId,localStorageService.set("HEALTH_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$rootScope.healthQuoteRequest=healthQuoteResult.data,"undefined"!=String($rootScope.healthQuoteResult)&&$rootScope.healthQuoteResult.length>0&&($rootScope.healthQuoteResult.length=0),$rootScope.healthQuoteResult=[],$scope.healthQuoteResponse=[],angular.forEach($rootScope.healthQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=$scope.globalLabel.transactionName.healthQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var healthQuoteResponse=JSON.parse(callback);if($scope.healthQuoteResponse.push(callback),healthQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(healthQuoteResponse.responseCode),healthQuoteResponse.responseCode==$scope.globalLabel.responseCode.success){for(var i=0;i<$rootScope.healthQuoteRequest.length;i++)$rootScope.healthQuoteRequest[i].messageId==healthQuoteResponse.messageId&&($rootScope.loading=!1,$rootScope.healthQuoteResult.push(healthQuoteResponse.data.quotes[0]),$rootScope.healthQuoteRequest[i].status=1);$scope.processResult()}else for(i=0;i<$rootScope.healthQuoteRequest.length;i++)$rootScope.healthQuoteRequest[i].messageId==healthQuoteResponse.messageId&&($rootScope.healthQuoteRequest[i].status=2,$rootScope.healthQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMedicalErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.healthQuoteRequest.length){$rootScope.loading=!1;for(var i=0;i<$rootScope.healthQuoteRequest.length;i++)0==$rootScope.healthQuoteRequest[i].status&&($rootScope.healthQuoteRequest[i].status=2,$rootScope.healthQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMedicalErrMsg));p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMedicalErrMsg)))}},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.healthQuoteResult)&&$rootScope.healthQuoteResult.length>0&&($rootScope.healthQuoteResult.length=0),$rootScope.healthQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.fetchDefaultInputParamaters=function(defaultInputParamCallback){$scope.isDiseased=!1,$scope.quoteParam=defaultHealthQuoteParam.quoteParam,$scope.ratingParam=defaultHealthQuoteParam.ratingParam,$scope.personalInfo=defaultHealthQuoteParam.personalInfo;for(var i=0;i<$scope.hospitalizationLimitArray.length;i++)if($scope.hospitalizationLimitArray[i].minHosLimit<=$scope.personalInfo.hospitalisationLimit&&$scope.hospitalizationLimitArray[i].maxHosLimit>$scope.personalInfo.hospitalisationLimit){$scope.hospitalisationLimit=$scope.hospitalizationLimitArray[i];break}$scope.personalInfo.preDiseaseStatus="No",$scope.personalInfo.pincode=localStorageService.get("cityDataFromIP")&&1==localStorageService.get("cityDataFromIP").cityStatus?localStorageService.get("cityDataFromIP").pincode:$scope.personalInfo.pincode,$scope.calcDefaultAreaDetails($scope.personalInfo.pincode)};healthQuoteCookie=localStorageService.get("healthQuoteInputParamaters");if(console.log("healthQuoteCookie is: ",healthQuoteCookie),null!=healthQuoteCookie&&"undefined"!==String(healthQuoteCookie)){$scope.quote=healthQuoteCookie,$scope.quoteParam=healthQuoteCookie.quoteParam,$scope.personalInfo=healthQuoteCookie.personalInfo,$scope.ratingParam=healthQuoteCookie.ratingParam,$scope.familyList=localStorageService.get("selectedFamilyForHealth"),$scope.isDiseased=localStorageService.get("isDiseasedForHealth"),$scope.selectedArea=localStorageService.get("selectedArea"),$scope.selectedDisease=localStorageService.get("selectedDisease");var item=localStorageService.get("commAddressDetails");$scope.modalPIN=!1,$scope.selectedArea=item.area,$scope.personalInfo.pincode=item.pincode,$scope.personalInfo.displayArea=item.area+", "+item.district,$scope.personalInfo.city=item.district,$scope.displayPincodeInfo=item.pincode+" - "+$scope.personalInfo.displayArea,$scope.selectedFamilyArray=localStorageService.get("selectedFamilyArray"),$scope.diseaseList=localStorageService.get("diseaseList"),$scope.hospitalizationLimitArray=localStorageService.get("hospitalizationLimitList");for(var i=0;i<$scope.hospitalizationLimitArray.length;i++)if($scope.hospitalizationLimitArray[i].minHosLimit<=$scope.personalInfo.hospitalisationLimit&&$scope.hospitalizationLimitArray[i].maxHosLimit>$scope.personalInfo.hospitalisationLimit){localStorageService.get("hospitalisationLimitVal")?$scope.hospitalisationLimit=localStorageService.get("hospitalisationLimitVal"):$scope.hospitalisationLimit=$scope.hospitalizationLimitArray[i];break}for(console.log("$scope.selectedFamilyArray is: ",$scope.selectedFamilyArray),i=0;i<$scope.selectedFamilyArray.length;i++)if($scope.dieaseDetails=[],$scope.selectedFamilyArray[i].dieaseDetails)for(var j=0;j<$scope.selectedFamilyArray[i].dieaseDetails.length;j++)for(var k=0;k<$scope.diseaseList.length;k++)$scope.selectedFamilyArray[i].dieaseDetails[j].dieaseCode==$scope.diseaseList[k].diseaseId&&($scope.selectedFamilyArray[i].label=$scope.selectedFamilyArray[i].relation,$scope.selectedFamilyArray[i].display=$scope.selectedFamilyArray[i].relation,$scope.diseaseList[k].familyList.push($scope.selectedFamilyArray[i]));localStorageService.set("hospitalisationLimitVal",$scope.hospitalisationLimit),$rootScope.healthQuoteResult&&$rootScope.healthQuoteResult.length>0?(console.log("redirecting to healthResult from header navigation is:",$rootScope.healthQuoteResult.length),$location.path("/healthResult")):setTimeout(function(){$scope.singleClickHealthQuote()},100)}else $scope.fetchDefaultInputParamaters(function(){}),$rootScope.healthQuoteResult&&$rootScope.healthQuoteResult.length>0?(console.log("redirecting to healthResult from header navigation is:",$rootScope.healthQuoteResult.length),$location.path("/healthResult")):setTimeout(function(){$scope.singleClickHealthQuote()},100)})},localStorageService.get("ridersHealthStatus")?$scope.healthInstantQuoteCalculation(localStorageService.get("addOnCoverForHealth")):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.health,$scope.globalLabel.request.findAppConfig,function(addOnCoverForHealth){getListFromDB(RestAPI,"","Disease",$scope.globalLabel.request.findAppConfig,function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){for(var diseaseData=callback.data,i=0;i<diseaseData.length;i++)diseaseData[i].familyList=[];localStorageService.set("diseaseList",diseaseData),getListFromDB(RestAPI,"",$scope.globalLabel.documentType.hospitalizationLimit,$scope.globalLabel.request.findAppConfig,function(hospitalizationLimitList){hospitalizationLimitList.responseCode==$scope.globalLabel.responseCode.success&&(localStorageService.set("hospitalizationLimitList",hospitalizationLimitList.data),localStorageService.set("hospitalizationLimitListReset",hospitalizationLimitList.data)),localStorageService.set("addOnCoverForHealth",addOnCoverForHealth),localStorageService.set("ridersHealthStatus",!0),$scope.healthInstantQuoteCalculation(addOnCoverForHealth)})}else $rootScope.P365Alert("Policies365",$scope.globalLabel.validationMessages.generalisedErrMsg,"Ok")})});else if(5==tab)$scope.travelInstantQuoteCalculation=function(){var travelQuoteCookie=localStorageService.get("travelQuoteInputParamaters"),travelDetailsCookie=localStorageService.get("travelDetails");$scope.quote={},$scope.quoteParam={},$scope.quoteParam.travellers=[],$scope.sumInsuredList=[],$scope.continentList=[],$scope.selectedDisease={},$scope.selectedDisease.diseaseList=[],$scope.diseaseList=[],$scope.destinations=[],$scope.travelDetails={},$scope.ratingParam={},$scope.travelInstantQuoteForm={},$scope.pedStatus=preDiseaseStatusGen,$scope.numberOfTravellers=getList(8),$scope.numberOfTraveller=$scope.numberOfTravellers[0],$scope.genderType=travelGenderTypeGeneric,$scope.questionStatus=questionStatusGeneric,$scope.tripTypeList=tripTypeListGeneric,$scope.tripDurationList=tripDurationListGeneric,$scope.travelDetails.tripDuration=$scope.tripDurationList[0].duration,$scope.diseaseList=localStorageService.get("diseaseList"),$scope.errorMessage=function(errorMsg){"undefined"==String($rootScope.travelQuoteResult)||0==$rootScope.travelQuoteResult.length?($scope.errorRespCounter=!1,$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteTravelForm=!1):$rootScope.travelQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteTravelForm=!1)},$scope.tooltipPrepare=function(travelResult){var i,resultCarrierId=[],testCarrierId=[];for($rootScope.resultCarrierId=[],i=0;i<travelResult.length;i++)if(Number(travelResult[i].netPremium)>0){var carrierInfo={};carrierInfo.productInfo=travelResult[i],carrierInfo.id=travelResult[i].carrierId,carrierInfo.name=travelResult[i].insuranceCompany,carrierInfo.annualPremium=travelResult[i].grossPremium,carrierInfo.claimsRating=travelResult[i].insurerIndex,0==p365Includes(testCarrierId,travelResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(travelResult[i].carrierId))}for($rootScope.resultedCarriers=resultCarrierId,$rootScope.resultCarrierId=resultCarrierId,i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(travelResult.length).length?String(travelResult.length):"0"+String(travelResult.length),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:4,mousedrag:!0})},2e3)},$scope.processResult=function(){$rootScope.travelQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$scope.instantQuoteTravelForm=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.travelQuoteResult=$filter("orderBy")($rootScope.travelQuoteResult,"grossPremium"),$location.path("/travelResult"))},$scope.singleClickTravelQuote=function(){setTimeout(function(){$rootScope.tabSelectionStatus=!1,$rootScope.loading=!0,$scope.instantQuoteTravelForm=!0,$scope.quote={},localStorageService.set("selectedBusinessLineId",$scope.globalLabel.businessLineType.travel),$scope.quoteParam.documentType=$scope.globalLabel.documentType.quoteRequest,$scope.quoteParam.quoteType=localStorageService.get("selectedBusinessLineId"),$scope.quote.requestType=$scope.globalLabel.request.travelRequestType,delete $scope.quote.documentType,$scope.quote.quoteParam=$scope.quoteParam,"Y"==$scope.quote.quoteParam.pedStatus&&localStorageService.set("pedDetails",$scope.selectedDisease.diseaseList),$scope.ageList=[];for(var i=0;i<$scope.quoteParam.travellers.length;i++)$scope.ageList.push($scope.quoteParam.travellers[i].age);$scope.quote.quoteParam.quoteMinAge=getMinAge($scope.ageList),$scope.quote.quoteParam.quoteMaxAge=getMaxAge($scope.ageList),$scope.quote.travelDetails=$scope.travelDetails,localStorageService.set("quote",$scope.quote),localStorageService.set("travelQuoteInputParamaters",$scope.quote),localStorageService.set("travelDetails",$scope.travelDetails),localStorageService.set("isDiseasedForTravel",$scope.isDiseased),localStorageService.set("selectedDisease",$scope.selectedDisease),localStorageService.set("diseaseList",$scope.diseaseList),localStorageService.set("selectedTravellersForTravel",$scope.travellersList),localStorageService.set("selectedTravellerArray",$scope.selectedTravellerArray),localStorageService.set("quoteReset",$scope.quote),localStorageService.set("travelQuoteInputParamatersReset",$scope.quote),localStorageService.set("travelDetailsReset",$scope.travelDetails),localStorageService.set("isDiseasedForTravelReset",$scope.isDiseased),localStorageService.set("selectedDiseaseReset",$scope.selectedDisease),localStorageService.set("diseaseListReset",$scope.diseaseList),localStorageService.set("selectedTravellersForTravelReset",$scope.travellersList),localStorageService.set("selectedTravellerArrayReset",$scope.selectedTravellerArray),$scope.quote=prepareQuoteRequest($scope.quote),$scope.requestId=null;localStorageService.get("quoteUserInfo");RestAPI.invoke($scope.globalLabel.getRequest.quoteTravel,$scope.quote).then(function(callback){$rootScope.travelQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("TRAVEL_UNIQUE_QUOTE_ID",$scope.requestId),$rootScope.travelQuoteRequest=callback.data,olarkCustomParam(localStorageService.get("TRAVEL_UNIQUE_QUOTE_ID"),localStorageService.get("selectedBusinessLineId"),localStorageService.get("quoteUserInfo"),!0),"undefined"!=String($rootScope.travelQuoteResult)&&$rootScope.travelQuoteResult.length>0&&($rootScope.travelQuoteResult.length=0),$rootScope.travelQuoteResult=[],$scope.travelQuoteResponse=[],angular.forEach($rootScope.travelQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=$scope.globalLabel.transactionName.travelQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var travelQuoteResponse=JSON.parse(callback);if($scope.travelQuoteResponse.push(callback),travelQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(travelQuoteResponse.responseCode),travelQuoteResponse.responseCode==$scope.globalLabel.responseCode.success){for(var i=0;i<$rootScope.travelQuoteRequest.length;i++)$rootScope.travelQuoteRequest[i].messageId==travelQuoteResponse.messageId&&($rootScope.loading=!1,$rootScope.travelQuoteResult.push(travelQuoteResponse.data.quotes[0]),$rootScope.travelQuoteRequest[i].status=1);$scope.processResult()}else for(i=0;i<$rootScope.travelQuoteRequest.length;i++)$rootScope.travelQuoteRequest[i].messageId==travelQuoteResponse.messageId&&($rootScope.travelQuoteRequest[i].status=2,$rootScope.travelQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedTravelErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.travelQuoteRequest.length){$rootScope.setTooltip=!1;for(var i=0;i<$rootScope.travelQuoteRequest.length;i++)0==$rootScope.travelQuoteRequest[i].status&&($rootScope.travelQuoteRequest[i].status=2,$rootScope.travelQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedTravelErrMsg));p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedTravelErrMsg))}},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.travelQuoteResult)&&$rootScope.travelQuoteResult.length>0&&($rootScope.travelQuoteResult.length=0),$rootScope.travelQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.callSingleClickQuote=function(){$rootScope.wordPressEnabled||$scope.singleClickTravelQuote()},$scope.checkQuestionStatus=function(quoteParam){"Y"==quoteParam.travellingFromIndia?$scope.show_error_msg_1=!1:$scope.show_error_msg_1=!0,"Y"==quoteParam.isIndian?$scope.show_error_msg_2=!1:($scope.show_error_msg_2=!0,"Y"==quoteParam.isOciPioStatus?($scope.show_error_msg_1=!1,$scope.show_error_msg_2=!0,$scope.show_error_msg_3=!1):($scope.show_error_msg_1=!1,$scope.show_error_msg_2=!0,$scope.show_error_msg_3=!0))},$scope.initPolicyDates=function(){var startDateOptions={},endDateOptions={},tripType=$scope.travelDetails.tripType;if("single"==tripType){startDateOptions.minimumDayLimit=0,startDateOptions.maximumDayLimit=60,startDateOptions.changeMonth=!0,startDateOptions.changeYear=!0,startDateOptions.dateFormat="dd/mm/yy",$scope.travelStartDateOptions=setP365DatePickerProperties(startDateOptions);var endDay=(startDate=angular.copy($scope.travelDetails.startdate)).split("/")[0],endMonth=startDate.split("/")[1],endYear=startDate.split("/")[2];(travelEndDateMin=new Date(Date.parse(endMonth+"/"+endDay+"/"+endYear))).setDate(travelEndDateMin.getDate()+1);var travelEndDateMax=new Date(travelEndDateMin);travelEndDateMax.setDate(travelEndDateMin.getDate()+179),endDateOptions.minimumDateStringFormat=travelEndDateMin,endDateOptions.maximumDateStringFormat=travelEndDateMax,endDateOptions.changeMonth=!0,endDateOptions.changeYear=!0,endDateOptions.dateFormat="dd/mm/yy",$scope.travelEndDateOptions=setP365DatePickerProperties(endDateOptions)}else if("multi"==tripType){startDateOptions.minimumDayLimit=0,startDateOptions.maximumDayLimit=60,startDateOptions.changeMonth=!0,startDateOptions.changeYear=!0,startDateOptions.dateFormat="dd/mm/yy",$scope.travelStartDateOptions=setP365DatePickerProperties(startDateOptions);var startDate,travelEndDateMin;endDay=(startDate=angular.copy($scope.travelDetails.startdate)).split("/")[0],endMonth=startDate.split("/")[1],endYear=startDate.split("/")[2];(travelEndDateMin=new Date(Date.parse(endMonth+"/"+endDay+"/"+endYear))).setDate(travelEndDateMin.getDate()+364);var d=travelEndDateMin.getDate(),m=travelEndDateMin.getMonth()+1;$scope.travelDetails.enddate=String((d<=9?"0"+d:d)+"/"+(m<=9?"0"+m:m)+"/"+travelEndDateMin.getFullYear()),endDateOptions.minimumDateStringFormat=$scope.travelDetails.enddate,endDateOptions.maximumDateStringFormat=$scope.travelDetails.enddate,endDateOptions.changeMonth=!0,endDateOptions.changeYear=!0,endDateOptions.dateFormat="dd/mm/yy",$scope.travelEndDateOptions=setP365DatePickerProperties(endDateOptions)}},$scope.prePopulateFields=function(){if(localStorageService.get("pedDetails")&&($scope.selectedDisease.diseaseList=localStorageService.get("pedDetails")),travelDetailsCookie)$scope.initPolicyDates(),$scope.travelDetails=travelDetailsCookie;else{var today=new Date,d=today.getDate(),m=today.getMonth()+1;$scope.travelDetails.startdate=String((d<=9?"0"+d:d)+"/"+(m<=9?"0"+m:m)+"/"+today.getFullYear());var travelEndDate=new Date(Date.parse((m<=9?"0"+m:m)+"/"+(d<=9?"0"+d:d)+"/"+today.getFullYear()));travelEndDate.setDate(travelEndDate.getDate()+2),d=travelEndDate.getDate(),m=travelEndDate.getMonth()+1,$scope.travelDetails.enddate=String((d<=9?"0"+d:d)+"/"+(m<=9?"0"+m:m)+"/"+travelEndDate.getFullYear()),$scope.travelDetails.tripType=$scope.tripTypeList[0].tripType,$scope.initPolicyDates()}if(travelQuoteCookie){$scope.quoteParam=travelQuoteCookie.quoteParam,$scope.ageList=[];for(var i=0;i<$scope.quoteParam.travellers.length;i++)$scope.ageList.push($scope.quoteParam.travellers[i].age);$scope.numberOfTraveller=$scope.quoteParam.travellers.length,$scope.travellersList=$scope.quoteParam.travellers}else $scope.numberOfTraveller=$scope.quoteParam.travellers.length,$scope.travellersList=$scope.quoteParam.travellers},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){defaultQuoteStatus?(travelQuoteCookie.quoteParam&&($scope.quoteParam=travelQuoteCookie.quoteParam),localStorageService.get("SumInsuredList")?$scope.sumInsuredList=localStorageService.get("SumInsuredList"):$scope.fetchSumInsured(),localStorageService.get("diseaseList")&&($scope.diseaseList=localStorageService.get("diseaseList")),localStorageService.get("isDiseasedForTravel")&&($scope.isDiseased=localStorageService.get("isDiseasedForTravel")),travelDetailsCookie&&($scope.travelDetails=travelDetailsCookie)):($scope.quoteParam=defaultTravelQuoteParam.quoteParam,$scope.travelDetails=defaultTravelQuoteParam.travelDetails,$scope.quote={},$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.travelDetails=$scope.travelDetails,localStorageService.set("selectedBusinessLineId",$scope.globalLabel.businessLineType.travel),localStorageService.set("travelQuoteInputParamaters",$scope.quote),localStorageService.set("travelDetails",$scope.travelDetails),$scope.fetchSumInsured(),$scope.isDiseased=!1),$scope.checkQuestionStatus($scope.quoteParam),$scope.prePopulateFields(),$scope.callSingleClickQuote()},null!==travelQuoteCookie&&"undefined"!==String(travelQuoteCookie)?($scope.fetchDefaultInputParamaters(!0,function(){}),setTimeout(function(){$rootScope.wordPressEnabled||$scope.singleClickTravelQuote()},100)):$scope.fetchDefaultInputParamaters(!1,function(){})},$scope.fetchSumInsured=function(){var sumInsuredDocId=$scope.globalLabel.documentType.travelSumInsuredList;getDocUsingId(RestAPI,sumInsuredDocId,function(suminsuredList){$scope.sumInsuredList=suminsuredList.SumInsured,localStorageService.set("SumInsuredList",$scope.sumInsuredList),$scope.fetchDiseaseListFormDB()})},$scope.fetchDiseaseListFormDB=function(){getListFromDB(RestAPI,"","Disease",$scope.globalLabel.request.findAppConfig,function(callback){callback.responseCode==$scope.globalLabel.responseCode.success&&($scope.diseaseList=callback.data,localStorageService.set("diseaseList",$scope.diseaseList))})},$scope.travelInstantQuoteCalculation();else if(6==tab){var ciQuoteCookie=localStorageService.get("criticalIllnessQuoteInputParamaters"),personalDetailsCookie=localStorageService.get("criticalIllnessPersonalDetails"),premiumFrequencyListCookie=localStorageService.get("premiumFrequencyList");if($scope.quote={},$scope.quoteParam={},$scope.personalDetails={},$scope.relationType=relationLifeQuoteGeneric,$scope.healthConditionType=healthConditionGeneric,$scope.annualIncomesRange=annualIncomesGeneric,$scope.genderType=genderTypeGeneric,$scope.tobaccoAddictionStatus=tobaccoAddictionStatusGeneric,$scope.payoutOptions=lifePayoutOptionsGeneric,$scope.healthTypeCondition=healthTypeConditionGeneric,$scope.sumamount=20,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCriticalIllnessForm=!0,$scope.healthError=!1,$scope.criticalIllnessInstantQuoteCalculation=function(){$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){"undefined"==String($rootScope.ciQuoteResult)||0==$rootScope.ciQuoteResult.length?($scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCriticalIllnessForm=!1):$rootScope.ciQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCriticalIllnessForm=!1),$rootScope.loading=!1},$scope.tooltipPrepare=function(ciResult){for(var resultCarrierId=[],testCarrierId=[],i=0;i<ciResult.length;i++){var carrierInfo={};carrierInfo.id=ciResult[i].carrierId,carrierInfo.name=ciResult[i].insuranceCompany,carrierInfo.annualPremium=ciResult[i].annualPremium,carrierInfo.isMonthlyPremium=!0,carrierInfo.claimsRating=ciResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.sumInsured=ciResult[i].sumInsured,carrierInfo.businessLineId="6"),0==p365Includes(testCarrierId,ciResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(ciResult[i].carrierId))}$rootScope.resultCarrierId=resultCarrierId,$rootScope.quoteResultInsurerList="\n<ul style='text-align: left;' class='tickpoints'>";for(i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(ciResult.length).length?String(ciResult.length):"0"+String(ciResult.length),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:4,mousedrag:!0})},2e3)},$scope.processResult=function(){$rootScope.enabledProgressLoader=!1,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCriticalIllnessForm=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.ciQuoteResult=$filter("orderBy")($rootScope.ciQuoteResult,"dailyPremium");for(var minDailyPremiumValue=$rootScope.ciQuoteResult[0].dailyPremium,dailyPremiumSliderArray=[],j=0;j<$rootScope.ciQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.ciQuoteResult[j].discountList;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i].discountAmount;calculatedDiscAmt+=$rootScope.ciQuoteResult[j].dailyPremium,dailyPremiumSliderArray.push(calculatedDiscAmt)}else dailyPremiumSliderArray.push($rootScope.ciQuoteResult[j].dailyPremium)}dailyPremiumSliderArray=$filter("orderBy")(dailyPremiumSliderArray),$scope.updateAnnualPremiumRange(minDailyPremiumValue,dailyPremiumSliderArray[dailyPremiumSliderArray.length-1]),setTimeout(function(){$rootScope.loading=!1,$location.path("/criticalIllnessResult")},100)},$scope.singleClickCriticalIllnessQuote=function(){setTimeout(function(){if($rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.instantQuoteCriticalIllnessForm=!0,$rootScope.loading=!0,localStorageService.set("selectedBusinessLineId",6),$scope.quoteParam.documentType=$scope.globalLabel.documentType.quoteRequest,$scope.quoteParam.quoteType=localStorageService.get("selectedBusinessLineId"),$scope.quoteParam.personType=relationLifeQuoteGeneric[0],$scope.quoteParam.payoutId=$scope.payoutOptions[0].id,$scope.quoteParam.annualIncome=$scope.personalDetails.annualIncomeObject.annualIncome,$scope.quoteParam.annualIncomeInterval=$scope.personalDetails.annualIncomeObject.annualIncomeInterval,$scope.quoteParam.sumInsured=1e5*Math.round(parseInt($scope.personalDetails.sumInsuredObject.amount)/1e5),$scope.quoteParam.age>35)var policyTerm=20;else policyTerm=20;policyTerm<$scope.personalDetails.minPolicyTermLimit?$scope.quoteParam.policyTerm=$scope.personalDetails.minPolicyTermLimit:$scope.quoteParam.policyTerm=policyTerm,$scope.personalDetails.minMaturityAge=$scope.quoteParam.age+5,$scope.personalDetails.dateOfBirth=calcDOBFromAge($scope.quoteParam.age),$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.personalDetails=$scope.personalDetails,$scope.quote.requestType=$scope.globalLabel.request.criticalIllnessRequestType,localStorageService.set("criticalIllnessQuoteInputParamaters",$scope.quote),localStorageService.set("criticalIllnessPersonalDetails",$scope.personalDetails),$scope.requestId=null,RestAPI.invoke($scope.globalLabel.getRequest.quoteCriticalIllness,$scope.quote).then(function(callback){$rootScope.ciQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("CRITICAL_ILLNESS_UNIQUE_QUOTE_ID",$scope.requestId),$rootScope.ciQuoteRequest=callback.data,"undefined"!=String($scope.quoteResult)&&$scope.quoteResult.length>0&&($scope.quoteResult.length=0),"undefined"!=String($rootScope.ciQuoteResult)&&$rootScope.ciQuoteResult.length>0&&($rootScope.ciQuoteResult.length=0),$rootScope.ciQuoteResult=[],angular.forEach($rootScope.ciQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.deviceId=deviceIdOrigin,header.browser=browser.name+" V - "+browser.version,header.transactionName=$scope.globalLabel.transactionName.criticalIllnessQuoteResult,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var ciQuoteResponse=JSON.parse(callback);if(ciQuoteResponse.QUOTE_ID==$scope.requestId&&($scope.responseCodeList.push(ciQuoteResponse.responseCode),ciQuoteResponse.responseCode==$scope.globalLabel.responseCode.success)){for(var i=0;i<$rootScope.ciQuoteRequest.length;i++)$rootScope.ciQuoteRequest[i].messageId==ciQuoteResponse.messageId&&(ciQuoteResponse.data.quotes[0].dailyPremium=Math.round(ciQuoteResponse.data.quotes[0].annualPremium/365),ciQuoteResponse.data.quotes[0].insuranceCompany=ciQuoteResponse.data.quotes[0].insuranceCompany,$rootScope.ciQuoteResult.push(ciQuoteResponse.data.quotes[0]),$rootScope.ciQuoteRequest[i].status=1);$scope.processResult()}}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&($rootScope.loading=!1),$scope.responseCodeList.length==$rootScope.ciQuoteRequest.length&&($rootScope.loading=!1,p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedLifeErrMsg))))},!0)):($scope.responseCodeList=[],"undefined"!=String($scope.quoteResult)&&$scope.quoteResult.length>0&&($scope.quoteResult.length=0),"undefined"!=String($rootScope.ciQuoteResult)&&$rootScope.ciQuoteResult.length>0&&($rootScope.ciQuoteResult.length=0),$rootScope.ciQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.prePopulateFields=function(){for(var i=0;i<annualIncomesGeneric.length;i++)if($scope.quoteParam.annualIncome==annualIncomesGeneric[i].annualIncome){$scope.personalDetails.annualIncomeObject=annualIncomesGeneric[i];break}listSumAssuredAmt($scope.personalDetails.annualIncomeObject.annualIncome,function(sumInsuredArray,selectedSumAssured){$scope.quoteParam.sumInsured=selectedSumAssured.amount,$scope.personalDetails.sumInsuredObject=selectedSumAssured}),setTimeout(function(){$location.path();$rootScope.wordPressEnabled?$scope.instantQuoteCriticalIllnessForm=!1:$scope.singleClickCriticalIllnessQuote()},100)},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){defaultQuoteStatus?($scope.quoteParam=defaultCriticalIllnessQuoteParam.quoteParam,$scope.personalDetails=defaultCriticalIllnessQuoteParam.personalDetails,$scope.PremiumFrequencyList=defaultCriticalIllnessQuoteParam.premiumFrequencyList,$scope.quote={},$scope.quote.personalDetails=$scope.personalDetails,$scope.quote.quoteParam=$scope.quoteParam,localStorageService.set("selectedBusinessLineId",6),localStorageService.set("criticalIllnessQuoteInputParamaters",$scope.quote),localStorageService.set("criticalIllnessPersonalDetails",$scope.personalDetails),localStorageService.set("premiumFrequencyList",$scope.PremiumFrequencyList)):($scope.quoteParam=ciQuoteCookie.quoteParam,$scope.personalDetails=personalDetailsCookie,$scope.PremiumFrequencyList=premiumFrequencyListCookie,$scope.quoteParam.riders=makeObjectEmpty($scope.quoteParam.riders,"array"),$scope.personalDetails.selectedAddOnCovers=makeObjectEmpty($scope.quoteParam.riders,"array")),$scope.ageList=getAgeList($scope.personalDetails.minInsuredAge,$scope.personalDetails.maxInsuredAge),$scope.prePopulateFields(),$rootScope.loading=!1,defaultInputParamCallback()},null!=ciQuoteCookie&&"undefined"!==String(ciQuoteCookie)?($scope.fetchDefaultInputParamaters(!1,function(){}),setTimeout(function(){$rootScope.wordPressEnabled||$scope.singleClickCriticalIllnessQuote()},100)):$scope.fetchDefaultInputParamaters(!0,function(){})},localStorageService.get("criticalIllnessInstantQuoteTooltipContent"))$rootScope.tooltipContent=localStorageService.get("criticalIllnessInstantQuoteTooltipContent"),$scope.criticalIllnessInstantQuoteCalculation();else{var docId=$scope.globalLabel.documentType.instantQuoteScreen+"-"+localStorageService.get("selectedBusinessLineId");getDocUsingId(RestAPI,docId,function(tooltipContent){localStorageService.set("criticalIllnessInstantQuoteTooltipContent",tooltipContent.toolTips),$rootScope.tooltipContent=tooltipContent.toolTips,$scope.criticalIllnessInstantQuoteCalculation()})}}else if(8==tab){var paQuoteCookie=localStorageService.get("personalAccidentQuoteInputParamaters");personalDetailsCookie=localStorageService.get("personalAccidentPersonalDetails");if($scope.quote={},$scope.quoteParam={},$scope.personalDetails={},$scope.relationType=relationLifeQuoteGeneric,$scope.healthConditionType=healthConditionGeneric,$scope.genderType=genderTypeGeneric,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuotePersonalAccidentForm=!0,$scope.personalAccidentInstantQuoteCalculation=function(){if($scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.errorMessage=function(errorMsg){"undefined"==String($rootScope.paQuoteResult)||0==$rootScope.paQuoteResult.length?($scope.updateAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuotePersonalAccidentForm=!1):$rootScope.paQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuotePersonalAccidentForm=!1),$rootScope.loading=!1},$scope.tooltipPrepare=function(paResult){for(var resultCarrierId=[],testCarrierId=[],i=0;i<paResult.length;i++){var carrierInfo={};carrierInfo.id=paResult[i].carrierId,carrierInfo.name=paResult[i].insuranceCompany,carrierInfo.annualPremium=paResult[i].grossPremium,carrierInfo.claimsRating=paResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.sumInsured=paResult[i].sumInsured,carrierInfo.businessLineId="8"),0==p365Includes(testCarrierId,paResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(paResult[i].carrierId))}$rootScope.resultCarrierId=resultCarrierId,$rootScope.quoteResultInsurerList="\n<ul style='text-align: left;' class='tickpoints'>";for(i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(paResult.length).length?String(paResult.length):"0"+String(paResult.length),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:4,mousedrag:!0})},2e3)},$scope.processResult=function(){$rootScope.enabledProgressLoader=!1,$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuotePersonalAccidentForm=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.paQuoteResult=$filter("orderBy")($rootScope.paQuoteResult,"grossPremium");for(var minAnnualPremiumValue=$rootScope.paQuoteResult[0].grossPremium,annualPremiumSliderArray=[],j=0;j<$rootScope.paQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.paQuoteResult[j].discountList;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i].discountAmount;calculatedDiscAmt+=$rootScope.paQuoteResult[j].grossPremium,annualPremiumSliderArray.push(calculatedDiscAmt)}else annualPremiumSliderArray.push($rootScope.paQuoteResult[j].grossPremium)}annualPremiumSliderArray=$filter("orderBy")(annualPremiumSliderArray),$scope.updateAnnualPremiumRange(minAnnualPremiumValue,annualPremiumSliderArray[annualPremiumSliderArray.length-1]),setTimeout(function(){$rootScope.loading=!1,$location.path("/personalAccidentResult")},100)},$scope.singleClickPersonalAccidentQuote=function(){setTimeout(function(){$rootScope.instantQuoteSummaryStatus=!0,$rootScope.progressBarStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.instantQuotePersonalAccidentForm=!0,$rootScope.loading=!0,localStorageService.set("selectedBusinessLineId",8),$scope.quoteParam.documentType=$scope.globalLabel.documentType.quoteRequest,$scope.quoteParam.quoteType=localStorageService.get("selectedBusinessLineId"),$scope.quoteParam.personType=relationLifeQuoteGeneric[0];var today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),today=dd+"/"+mm+"/"+yyyy,$scope.quoteParam.policyStartDate=today,$scope.quoteParam.annualIncome=Number($scope.quoteParam.annualIncome),$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.personalDetails=$scope.personalDetails,$scope.quote.requestType=$scope.globalLabel.request.personalAccidentRequestType,localStorageService.set("personalAccidentQuoteInputParamaters",$scope.quote),localStorageService.set("personalAccidentPersonalDetails",$scope.personalDetails),$scope.requestId=null;var quoteUserInfo=localStorageService.get("quoteUserInfo");quoteUserInfo&&($scope.quote.mobileNumber=quoteUserInfo.mobileNumber),RestAPI.invoke($scope.globalLabel.getRequest.quotePersonalAccident,$scope.quote).then(function(callback){$rootScope.paQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("PERSONAL_ACCIDENT_UNIQUE_QUOTE_ID",$scope.requestId),$rootScope.paQuoteRequest=callback.data,"undefined"!=String($scope.paQuoteResult)&&$scope.paQuoteResult.length>0&&($scope.paQuoteResult.length=0),$rootScope.paQuoteResult=[],angular.forEach($rootScope.paQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.deviceId=deviceIdOrigin,header.browser=browser.name+" V - "+browser.version,header.transactionName=$scope.globalLabel.transactionName.personalAccidentQuoteResult,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var paQuoteResponse=JSON.parse(callback);if(paQuoteResponse.QUOTE_ID==$scope.requestId&&($scope.responseCodeList.push(paQuoteResponse.responseCode),paQuoteResponse.responseCode==$scope.globalLabel.responseCode.success)){for(var i=0;i<$rootScope.paQuoteRequest.length;i++)$rootScope.paQuoteRequest[i].messageId==paQuoteResponse.messageId&&(paQuoteResponse.data.quotes[0].insuranceCompany=paQuoteResponse.data.quotes[0].insuranceCompany,$rootScope.paQuoteResult.push(paQuoteResponse.data.quotes[0]),$rootScope.paQuoteRequest[i].status=1);$scope.processResult()}}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&($rootScope.loading=!1),$scope.responseCodeList.length==$rootScope.paQuoteRequest.length&&($rootScope.loading=!1,p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedLifeErrMsg))))},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.paQuoteResult)&&$rootScope.paQuoteResult.length>0&&($rootScope.paQuoteResult.length=0),$rootScope.paQuoteResult=[],$scope.errorMessage(callback.message))})},100)},$scope.calcDefaultAreaDetails=function(areaCode){$http.get(getServiceLink+"Pincode&q="+areaCode).then(function(response){var areaDetails=JSON.parse(response.data);areaDetails.responseCode==$scope.globalLabel.responseCode.success&&$scope.onSelectPinOrArea(areaDetails.data[0])})},$scope.onSelectPinOrArea=function(item){$scope.modalPIN=!1,$scope.selectedArea=item.area,$scope.personalDetails.pincode=item.pincode,$scope.personalDetails.displayArea=item.area+", "+item.district,$scope.personalDetails.city=item.district,$scope.displayPincodeInfo=item.pincode+" - "+$scope.personalDetails.displayArea,$scope.personalDetails.state=item.state,localStorageService.set("commAddressDetails",item),setTimeout(function(){$rootScope.wordPressEnabled||$scope.singleClickPersonalAccidentQuote()},100)},$scope.fetchDefaultInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){getDocUsingId(RestAPI,$scope.globalLabel.documentType.defaultPersonalAccidentQuoteParam,function(callback){defaultQuoteStatus?($scope.quoteParam=callback.quoteParam,$scope.personalDetails=callback.personalDetails,$scope.PremiumFrequencyList=callback.premiumFrequencyList,$rootScope.wordPressEnabled&&($scope.quote={},$scope.quote.personalDetails=$scope.personalDetails,$scope.quote.quoteParam=$scope.quoteParam,localStorageService.set("selectedBusinessLineId",8),localStorageService.set("personalAccidentQuoteInputParamaters",$scope.quote),localStorageService.set("personalAccidentPersonalDetails",$scope.personalDetails))):($scope.quoteParam=paQuoteCookie.quoteParam,$scope.personalDetails=personalDetailsCookie),$scope.ageList=getAgeList($scope.personalDetails.minInsuredAge,$scope.personalDetails.maxInsuredAge),$scope.personalDetails.pincode=localStorageService.get("cityDataFromIP")&&1==localStorageService.get("cityDataFromIP").cityStatus?localStorageService.get("cityDataFromIP").pincode:$scope.personalDetails.pincode,$scope.calcDefaultAreaDetails($scope.personalDetails.pincode),$rootScope.loading=!1,defaultInputParamCallback()})},null!=paQuoteCookie&&"undefined"!==String(paQuoteCookie)){if($scope.quote=paQuoteCookie,$scope.quoteParam=paQuoteCookie.quoteParam,$scope.personalDetails=paQuoteCookie.personalDetails,$rootScope.wordPressEnabled)$scope.displayPincodeInfo=$scope.personalDetails.pincode+" - "+$scope.personalDetails.displayArea;else{var item=localStorageService.get("commAddressDetails");$scope.modalPIN=!1,$scope.selectedArea=item.area,$scope.personalDetails.pincode=item.pincode,$scope.personalDetails.displayArea=item.area+", "+item.district,$scope.personalDetails.city=item.district,$scope.displayPincodeInfo=item.pincode+" - "+$scope.personalDetails.displayArea}$scope.fetchDefaultInputParamaters(!1,function(){})}else $scope.fetchDefaultInputParamaters(!0,function(){})},localStorageService.get("personalAccidentInstantQuoteTooltipContent"))$rootScope.tooltipContent=localStorageService.get("personalAccidentInstantQuoteTooltipContent"),$scope.personalAccidentInstantQuoteCalculation();else{docId=$scope.globalLabel.documentType.instantQuoteScreen+"-"+localStorageService.get("selectedBusinessLineId");getDocUsingId(RestAPI,docId,function(tooltipContent){localStorageService.set("personalAccidentInstantQuoteTooltipContent",tooltipContent.toolTips),$rootScope.tooltipContent=tooltipContent.toolTips,$scope.personalAccidentInstantQuoteCalculation()})}}})}),$rootScope.onClickMainTab=function(tab){"iquote"==tab.name?$location.path("/dcpResult"):$location.path("/proposalNotAvailable")},$rootScope.onClickTab=function(tab){tab.disabled||($scope.currentTab!=tab.url?($rootScope.isFromProfessionalJourney=!1,$scope.inputTitle=tab.inputTitle,$rootScope.minAnnualPremium=1e3,$rootScope.maxAnnualPremium=5e3,$rootScope.exclusiveDiscountsLength="00",$rootScope.calculatedQuotesLength="00",$rootScope.calculatedRidersLength="00",$rootScope.resultCarrierId=[],localStorageService.set("selectedBusinessLineId",tab.businessLineId),$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$rootScope.isActiveTab2=$scope.selectedBusinessLineId,$scope.isFromDCP||$scope.getQuoteTemplateFunction(),1==tab.businessLineId?($scope.$broadcast("onClickTabID",1),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife):2==tab.businessLineId?($scope.$broadcast("onClickTabID",2),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelBike):3==tab.businessLineId?($scope.$broadcast("onClickTabID",3),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCar):4==tab.businessLineId?($scope.$broadcast("onClickTabID",4),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelHealth):5==tab.businessLineId?($scope.$broadcast("onClickTabID",5),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelTravel):6==tab.businessLineId?($scope.$broadcast("onClickTabID",6),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCriticalIllness):8==tab.businessLineId?($scope.$broadcast("onClickTabID",8),$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelPersonalAccident):0==tab.businessLineId&&(localStorageService.get("PROF_QUOTE_ID")?($location.path("/professionalJourneyResult"),console.log("Planning to redirect to professional Result with  : ",localStorageService.get("PROF_QUOTE_ID"))):$location.path("/professionalJourney")),0!=tab.businessLineId&&($scope.selectedBusinessLineId=tab.businessLineId,$scope.currentTab=tab.url)):console.log("current tab and selected tab is same...."))},$scope.$on("invokeGetQuoteTemplate",function(){$scope.isFromDCP=!0,$scope.getQuoteTemplateFunction()})}]);var organizationName,sourceOrigin,deviceIdOrigin,scrollv;campaignSource={};angular.module("quote",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("quoteController",["RestAPI","$scope","$rootScope","$location","$http","localStorageService","$timeout","$filter","$anchorScroll","$sce","$window",function(RestAPI,$scope,$rootScope,$location,$http,localStorageService,$timeout,$filter,$anchorScroll,$sce,$window){$rootScope.bodyHeight=$window.innerHeight+"px",$scope.login={},$scope.authenticate={},$scope.globalLabel={},$location.search().utm_source&&(campaignSource.utm_source=$location.search().utm_source),$location.search().utm_medium&&(campaignSource.utm_medium=$location.search().utm_medium),$rootScope.disableNextScreen=!1,$scope.headerForLanding=wp_path+"buy/common/html/headerLanding.html",$scope.headerForLandingMonsoon=wp_path+"buy/MonsoonLanding/html/headerLanding.html",$scope.headerForLandingIndependence=wp_path+"buy/IndependenceLanding/html/headerLanding.html",$scope.headerForLandingPension=wp_path+"buy/insuranceLanding/headerLanding.html",campaignIDVar=$rootScope.campaignId,$rootScope.campaignFlag=!1,$scope.globalLabel.policies365Details={},$rootScope.loading=!0,$rootScope.instantQuoteSummaryStatus=!0,$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.exclusiveDiscountsLength="00",$rootScope.calculatedQuotesLength="00",$rootScope.calculatedRidersLength="00",$rootScope.reloadStatus=!0,$rootScope.modalChildPlanConfirm=!1,$scope.instantQuoteBikeForm=!1,$rootScope.isCarLanding=!1,$rootScope.isBikeLanding=!1,$rootScope.isLifeLanding=!1,$rootScope.isHealthLanding=!1,$scope.disabledRedirectToResult=!1,$rootScope.displayInstantScreen=!0,$scope.createLeadScreen=!1,$scope.displayResult=!1,$scope.isFromLanding=!1,$scope.pensionLanding=!1,idepProdEnv&&($rootScope.idepProdEnv=idepProdEnv),wordPressEnabled?($rootScope.wordPressEnabled=wordPressEnabled,$rootScope.wp_path=wp_path):$rootScope.wp_path="",$rootScope.isBackButtonPressed&&($rootScope.displayInstantScreen=!1,$scope.createLeadScreen=!0,$scope.displayResult=!0),$scope.carouselIndex2=0,$scope.slides2=[{id:0,content:"Test Message 1",person:"Test Person 1"}],$scope.$on("callMethodFromHeader",function(){tab=$rootScope.selTabObject,$scope.onClickTab(tab)}),$scope.$on("invokeGetQuoteTemplate",function(){$scope.getQuoteTemplateFunction()}),console.log("$location.path() for landing page is: ",$location.path()),"/healthLanding"==$location.path()&&($scope.selectedBusinessLineId=4,$rootScope.isHealthLanding=!0,localStorageService.set("selectedBusinessLineId",4)),"/lifeLanding"==$location.path()&&($scope.selectedBusinessLineId=1,$rootScope.isLifeLanding=!0,localStorageService.set("selectedBusinessLineId",3)),$rootScope.isCarProductTabClicked?(localStorageService.set("selectedBusinessLineId",3),$rootScope.fromPBQuote=!0,$rootScope.isCarProductTabClicked=!1):$rootScope.isBikeProductTabClicked?(localStorageService.set("selectedBusinessLineId",2),$rootScope.fromPBQuote=!0,$rootScope.isBikeProductTabClicked=!1):$rootScope.isHealthProductTabClicked?(localStorageService.set("selectedBusinessLineId",4),$rootScope.fromPBQuote=!0,$rootScope.isHealthProductTabClicked=!1):$rootScope.isLifeProductTabClicked?(localStorageService.set("selectedBusinessLineId",1),$rootScope.fromPBQuote=!0,$rootScope.isLifeProductTabClicked=!1):$rootScope.isTravelProductTabClicked?(localStorageService.set("selectedBusinessLineId",5),$rootScope.fromPBQuote=!0,$rootScope.isTravelProductTabClicked=!1):$rootScope.isCriticalIllnessProductTabClicked&&(localStorageService.set("selectedBusinessLineId",6),$rootScope.fromPBQuote=!0,$rootScope.isCriticalIllnessProductTabClicked=!1),$rootScope.fromPBQuote&&($scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),1==$scope.selectedBusinessLineId?($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBAssuranceInstantQuote.html",$rootScope.professionalImg="TermLife_Slice_Product_jrny",$rootScope.professionalText="Find Your Perfect Term Life Plan"):2==$scope.selectedBusinessLineId?($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBTwoWheelerInstantQuote.html",$rootScope.professionalImg="Bike_Slice_Product_jrny",$rootScope.professionalText="Find the best Bike plan"):3==$scope.selectedBusinessLineId?($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBFourWheelerInstantQuote.html",$rootScope.professionalImg="Car_Slice_Product_jrny",$rootScope.professionalText="Find the best Car plan"):4==$scope.selectedBusinessLineId?($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBMedicalInstantQuote.html",$rootScope.professionalImg="Health_Slice_Product_jrny",$rootScope.professionalText="Find the best Health plan"):5==$scope.selectedBusinessLineId?($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBTravelInstantQuote.html",$rootScope.professionalImg="travel_Insurance_cpl",$rootScope.professionalText="Find the best Travel plan"):6==$scope.selectedBusinessLineId&&($rootScope.professionalTab=wp_path+"buy/common/html/PBHTML/PBCriticalIllnessInstantQuote.html",$rootScope.professionalImg="Critical_Illness_ptnt",$rootScope.professionalText="Find the best Critical Illness plan")),$scope.onClickProfessionalTab=function(tab){$rootScope.isFromProfessionalJourney=!1,$scope.selectedBusinessLineId=tab.businessLineId,localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$rootScope.fromPBQuote=!0,$location.path("/PBQuote")},$scope.getQuoteTemplateFunction=function(){if($rootScope.wordPressEnabled?localStorage.getItem("selectedBusinessLineId")&&($scope.selectedBusinessLineId=localStorage.getItem("selectedBusinessLineId"),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId)):$scope.displayResult=!0,null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){var userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}$scope.globalLabel=localStorageService.get("applicationLabels").globalLabels,$scope.quoteUserInfo={},$scope.quoteUserInfo.messageId="",$scope.quoteUserInfo.termsCondition=!0,$scope.leadHTML=wp_path+"buy/common/html/createLeadTemplate.html",$scope.PBLeadHTML=wp_path+"buy/common/html/PBHTML/PBCreateLeadTemplate.html",$scope.wp_TermsCondition=function(){"/quote"==$location.path()&&(window.location.href=window.location.protocol+"//"+window.location.host+"/termsandconditions")},$scope.wp_PrivacyPolicy=function(){"/quote"==$location.path()&&(window.location.href=window.location.protocol+"//"+window.location.host+"/privacy-policy")},"/criticalIllness"==$location.path()?($scope.selectedBusinessLineId=6,$scope.createLeadForm={},localStorage.setItem("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$scope.criticalIllnessQuoteURL=wp_path+"buy/criticalIllness/html/CriticalIllnessInstantQuote.html"):$scope.criticalIllnessQuoteURL=wp_path+"buy/criticalIllness/html/CriticalIllnessInstantQuote.html","/personalAccident"==$location.path()?($scope.selectedBusinessLineId=8,$scope.createLeadForm={},localStorage.setItem("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$scope.personalAccidentQuoteURL=wp_path+"buy/personalAccident/html/PersonalAccidentInstantQuote.html"):$scope.personalAccidentQuoteURL=wp_path+"buy/personalAccident/html/PersonalAccidentInstantQuote.html","/home"==$location.path()?($scope.selectedBusinessLineId=7,$scope.createLeadForm={},localStorage.setItem("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$scope.homeURL=wp_path+"buy/home/html/HomeInstantQuote.html"):$scope.homeURL=wp_path+"buy/home/html/HomeInstantQuote.html",$scope.tabs=[{businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike",tabImgId:1,flagToShow:!1},{businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car",tabImgId:0,flagToShow:!1},{businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family",tabImgId:3,flagToShow:!1},{businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Term Life",inputTitle:"life",tabImgId:2,flagToShow:!1},{businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"Critical Illnesss",inputTitle:"CI",tabImgId:5,flagToShow:!1},{businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel",tabImgId:4,flagToShow:$rootScope.idepProdEnv},{businessLineId:8,url:$scope.personalAccidentQuoteURL,className:"personalAccidentTab tabs wp_border32",name:"personalAccident",title:"PA",inputTitle:"PA",tabImgId:6,flagToShow:!0},{businessLineId:7,url:$scope.homeURL,className:"homeTab tabs wp_border32",name:"home",title:"Home",inputTitle:"home",tabImgId:7,flagToShow:!0}],$scope.tabsWidth=$rootScope.idepProdEnv&&$rootScope.wordPressEnabled?"100%":"110%",$scope.tabs_li_width=$rootScope.idepProdEnv&&$rootScope.wordPressEnabled?"20%":"16%",$rootScope.selectedRegData=void 0,localStorageService.get("userLoginInfo")&&($rootScope.userLoginStatus=localStorageService.get("userLoginInfo").status,$rootScope.username=localStorageService.get("userLoginInfo").username),$scope.menuItems=menuItemsGeneric;var quoteUserInfoCookie=localStorageService.get("quoteUserInfo");$rootScope.claimDetailsUserInfo=localStorageService.get("quoteUserInfo"),$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),null!=quoteUserInfoCookie&&(messageIDVar=void 0!=quoteUserInfoCookie.messageId||null!=quoteUserInfoCookie.messageId||""!=quoteUserInfoCookie.messageId?quoteUserInfoCookie.messageId:""),$scope.openMenu=function($mdOpenMenu,ev){$mdOpenMenu(ev),setTimeout(function(){$(".md-click-catcher").click(function(){$scope.activeMenu=""})},100)},1==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife,$rootScope.loaderContent={businessLine:"1",header:"Life Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.life.proverbInstantQuote)}):2==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelBike,$rootScope.loaderContent={businessLine:"2",header:"Bike Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.bike.proverbInstantQuote)}):3==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCar,$rootScope.loaderContent={businessLine:"3",header:"Car Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.car.proverbInstantQuote)}):4==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelHealth,$rootScope.loaderContent={businessLine:"4",header:"Health Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.health.proverbInstantQuote)}):5==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelTravel,$rootScope.loaderContent={businessLine:"5",header:"Travel Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.travel.proverbInstantQuote)}):6==$scope.selectedBusinessLineId?($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCriticalIllness,$rootScope.loaderContent={businessLine:"6",header:"CI Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.criticalIllness.proverbInstantQuote)}):8==$scope.selectedBusinessLineId&&($rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelPersonalAccident,$rootScope.loaderContent={businessLine:"8",header:"PA Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.personalAccident.proverbInstantQuote)}),$scope.slides2=[{id:0,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent1,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName1},{id:1,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent2,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName2},{id:2,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent3,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName3},{id:3,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent4,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName4},{id:4,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent5,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName5},{id:5,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent6,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName6},{id:6,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent7,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName7},{id:7,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent8,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName8},{id:8,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent9,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName9},{id:9,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent10,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName10},{id:10,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent11,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName11},{id:11,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent12,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName12},{id:12,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent13,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName13},{id:13,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent14,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName14},{id:14,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent15,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName15},{id:15,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent16,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName16},{id:16,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent17,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName17},{id:17,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent18,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName18},{id:18,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent19,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName19},{id:19,content:$scope.globalLabel.applicationStaticContent.homePageCustSayContent20,person:$scope.globalLabel.applicationStaticContent.homePageCustSayName20}],$scope.getRegPlaceListUsingIPCity=function(city,callback){if(null!=city&&"undefined"!=String(city))return $http.get(getServiceLink+$scope.globalLabel.documentType.RTODetails+"&q="+city).then(function(response){var rtoDetailsResponse=JSON.parse(response.data),rtoDetail={};rtoDetailsResponse.responseCode!=$scope.globalLabel.responseCode.noRecordsFound?($rootScope.vehicleInfo={},3==localStorageService.get("selectedBusinessLineId")?$rootScope.selectedCarRegistrationObject=rtoDetailsResponse.data[0]:2==localStorageService.get("selectedBusinessLineId")&&($rootScope.selectedBikeRegistrationObject=rtoDetailsResponse.data[0]),$rootScope.vehicleInfo.registrationPlace=rtoDetailsResponse.data[0].display,rtoDetail.rtoName=rtoDetailsResponse.data[0].display,rtoDetail.rtoCity=rtoDetailsResponse.data[0].city,rtoDetail.rtoState=rtoDetailsResponse.data[0].state,rtoDetail.rtoObject=rtoDetailsResponse.data[0],rtoDetail.rtoStatus=!0,getPincodeFromCity($http,rtoDetail,function(resultedRTOInfo){resultedRTOInfo.responseCode==$scope.globalLabel.responseCode.success?rtoDetail.rtoPincode=resultedRTOInfo.data[0].pincode:rtoDetail.rtoPincode="",3==localStorageService.get("selectedBusinessLineId")?localStorageService.set("carRegistrationPlaceUsingIP",rtoDetail):2==localStorageService.get("selectedBusinessLineId")&&localStorageService.set("bikeRegistrationPlaceUsingIP",rtoDetail)})):(rtoDetail.rtoName=void 0,rtoDetail.rtoCity=void 0,rtoDetail.rtoState=void 0,rtoDetail.rtoObject=void 0,rtoDetail.rtoStatus=!1,3==localStorageService.get("selectedBusinessLineId")?localStorageService.set("carRegistrationPlaceUsingIP",rtoDetail):2==localStorageService.get("selectedBusinessLineId")&&localStorageService.set("bikeRegistrationPlaceUsingIP",rtoDetail)),$rootScope.loading=!1,callback()});var rtoDetail={rtoName:void 0,rtoCity:void 0,rtoState:void 0,rtoObject:void 0,rtoStatus:!1};3==localStorageService.get("selectedBusinessLineId")?localStorageService.set("carRegistrationPlaceUsingIP",rtoDetail):2==localStorageService.get("selectedBusinessLineId")&&localStorageService.set("bikeRegistrationPlaceUsingIP",rtoDetail),$rootScope.loading=!1,callback()},$rootScope.signout=function(){$rootScope.userLoginStatus=!1;var userLoginInfo={username:void 0};userLoginInfo.status=$rootScope.userLoginStatus,localStorageService.set("userLoginInfo",userLoginInfo),$location.path("/quote")},$rootScope.wordPressEnabled&&($scope.slickConfig1Loaded=!0,3==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=0:2==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=1:1==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=2:4==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=4:5==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=5:6==$scope.selectedBusinessLineId?$scope.slickCurrentIndex=6:8==$scope.selectedBusinessLineId&&($scope.slickCurrentIndex=8),$scope.slickConfig={dots:!1,autoplay:!0,initialSlide:$scope.slickCurrentIndex,infinite:!0,autoplaySpeed:3e3,method:{},event:{beforeChange:function(event,slick,currentSlide,nextSlide){},afterChange:function(event,slick,currentSlide,nextSlide){$scope.slickCurrentIndex=currentSlide},breakpoint:function(event,slick,breakpoint){},destroy:function(event,slick){},edge:function(event,slick,direction){},reInit:function(event,slick){},init:function(event,slick){},setPosition:function(evnet,slick){},swipe:function(event,slick,direction){}}}),$rootScope.showAuthenticateForm=function(){$scope.modalOTP=!0},$scope.closeAuthenticateForm=function(){$rootScope.disableLandingLeadBtn=!1,$scope.modalOTP=!1},$rootScope.showLoginForm=function(){$scope.modalLogin=!0},$scope.closeLoginForm=function(){$scope.modalLogin=!1,$scope.login.MobileNumber=""},$rootScope.validateLandingUser=function(contactUsForm){$scope.login={},contactUsForm?($scope.createTicket=!0,$scope.contactUsForm&&($scope.contactUsForm.$invalid||($scope.login.MobileNumber=$scope.composeEmail.paramMap.mobileNumber,$scope.validateLogin()))):($scope.createTicket=!1,$scope.login.MobileNumber=$scope.quoteUserInfo.mobileNumber,$rootScope.Regpopup&&($rootScope.Regpopup=!1),$scope.validateLogin())},$scope.validateLogin=function(){$scope.disableOTP=!1,$scope.authenticate.enteredOTP="";var transactionName,validateLoginParam={};validateLoginParam.paramMap={},validateLoginParam.mobileNumber=$scope.login.MobileNumber,validateLoginParam.funcType=$scope.globalLabel.functionType.optAuth,validateLoginParam.paramMap.OTP=$scope.globalLabel.functionType.otpGenerate;$location.path();transactionName=$scope.isFromLanding?$scope.globalLabel.transactionName.sendSMS:userValidation,getDocUsingParam(RestAPI,transactionName,validateLoginParam,function(createOTP){createOTP.responseCode==$scope.globalLabel.responseCode.success?($scope.createOTPError="",$scope.modalLogin=!1,$rootScope.showAuthenticateForm()):createOTP.responseCode==$scope.globalLabel.responseCode.userNotExist?($rootScope.disableLandingLeadBtn=!1,$scope.createOTPError=createOTP.message):createOTP.responseCode==$scope.globalLabel.responseCode.blockedMobile?($rootScope.disableLandingLeadBtn=!1,$scope.createOTPError=createOTP.message):createOTP.responseCode==$scope.globalLabel.responseCode.mobileInvalidCode?($rootScope.disableLandingLeadBtn=!1,$scope.createOTPError=createOTP.message):($rootScope.disableLandingLeadBtn=!1,$scope.createOTPError=$scope.globalLabel.errorMessage.createOTP)})},$rootScope.showAuthenticateForm=function(){$scope.modalOTP=!0},$scope.closeAuthenticateForm=function(){$scope.modalOTP=!1,$scope.login.MobileNumber="",$scope.authenticate.enteredOTP=""},$scope.authenticateUser=function(){var authenticateUserParam={};authenticateUserParam.mobileNumber=$scope.login.MobileNumber,authenticateUserParam.OTP=Number($scope.authenticate.enteredOTP),getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.validateOTP,authenticateUserParam,function(createOTP){if(createOTP.responseCode==$scope.globalLabel.responseCode.success){$scope.invalidOTPError="",$scope.modalOTP=!1;$location.path();if($scope.isFromLanding)$scope.createTicket?($rootScope.disableLandingLeadBtn=!1,$rootScope.$broadcast("callCreateTicket",function(contactUsForm){})):$scope.leadCreationUserInfo();else{var userLoginInfo={};userLoginInfo.username=createOTP.data.firstName,userLoginInfo.mobileNumber=createOTP.data.mobile,userLoginInfo.status=!0,localStorageService.set("userLoginInfo",userLoginInfo),localStorageService.set("userProfileDetails",createOTP.data),$location.path("/dashboard")}}else createOTP.responseCode==$scope.globalLabel.responseCode.noRecordsFound?($rootScope.disableLandingLeadBtn=!1,$scope.invalidOTPError=$scope.globalLabel.validationMessages.invalidOTP):createOTP.responseCode==$scope.globalLabel.responseCode.expiredOTP?($rootScope.disableLandingLeadBtn=!1,$scope.invalidOTPError=$scope.globalLabel.validationMessages.expiredOTP):createOTP.responseCode==$scope.globalLabel.responseCode.blockedMobile?($rootScope.disableLandingLeadBtn=!1,$scope.invalidOTPError=createOTP.message):($rootScope.disableLandingLeadBtn=!1,$scope.invalidOTPError=$scope.globalLabel.validationMessages.authOTP)})},$scope.resendOTP=function(){var validateLoginParam={paramMap:{}};validateLoginParam.mobileNumber=$scope.login.MobileNumber,validateLoginParam.funcType=$scope.globalLabel.functionType.optAuth,validateLoginParam.paramMap.OTP=$scope.globalLabel.functionType.otpGenerate,getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.sendSMS,validateLoginParam,function(createOTP){createOTP.responseCode==$scope.globalLabel.responseCode.success?($scope.invalidOTPError="",$rootScope.disableLandingLeadBtn=!1):createOTP.responseCode==$scope.globalLabel.responseCode.userNotExist?($scope.invalidOTPError=createOTP.message,$rootScope.disableLandingLeadBtn=!1):createOTP.responseCode==$scope.globalLabel.responseCode.blockedMobile?($scope.invalidOTPError=createOTP.message,$scope.disableOTP=!0,$rootScope.disableLandingLeadBtn=!1):createOTP.responseCode==$scope.globalLabel.responseCode.mobileInvalidCode?($scope.invalidOTPError=createOTP.message,$rootScope.disableLandingLeadBtn=!1):($scope.invalidOTPError=$scope.globalLabel.errorMessage.createOTP,$rootScope.disableLandingLeadBtn=!1)})};var todayDate=new Date,formatedTodaysDate=("0"+(todayDate.getMonth()+1).toString()).substr(-2)+"/"+("0"+todayDate.getDate().toString()).substr(-2)+"/"+todayDate.getFullYear().toString();if(getPolicyStatusList(formatedTodaysDate),localStorageService.get("websiteVisitedOnce")){if(console.log("city name in step 2 is: ",cityName),3==$scope.selectedBusinessLineId){var cityName=localStorageService.get("carRegAddress")?localStorageService.get("carRegAddress").city:"Mumbai";3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")&&$rootScope.vehicleInfo&&(null!=$rootScope.selectedCarRegistrationObject||"undefined"!=String($rootScope.selectedCarRegistrationObject)?cityName=$rootScope.selectedCarRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city))}else if(2==$scope.selectedBusinessLineId){cityName=null!=localStorageService.get("bikeRegistrationPlaceUsingIP")?localStorageService.get("bikeRegistrationPlaceUsingIP").rtoCity:"MUMBAI";null==$rootScope.selectedBikeRegistrationObject&&"undefined"==String($rootScope.selectedBikeRegistrationObject)||(cityName=$rootScope.selectedBikeRegistrationObject.city)}$scope.getRegPlaceListUsingIPCity(cityName,function(){if($rootScope.vehicleInfo)if(3==localStorageService.get("selectedBusinessLineId")){if(!($rootScope.vehicleInfo.registrationPlace||localStorageService.get("carRegistrationPlaceUsingIP")&&localStorageService.get("carRegistrationPlaceUsingIP").rtoStatus)){var city=localStorageService.get("carRegAddress")?localStorageService.get("carRegAddress").city:"Mumbai";$scope.getRegPlaceListUsingIPCity(city,function(){$scope.$broadcast("callSingleClickCarQuote",{})})}}else if(2==localStorageService.get("selectedBusinessLineId")){city=localStorageService.get("bikeRegistrationPlaceUsingIP")?localStorageService.get("bikeRegistrationPlaceUsingIP").rtoCity:"Mumbai";$scope.getRegPlaceListUsingIPCity(city,function(){$scope.$broadcast("callSingleClickBikeQuote",{})})}for(var i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){$scope.inputTitle=$scope.tabs[i].inputTitle,$scope.currentTab=$scope.tabs[i].url;break}$scope.defaultMetroList=localStorageService.get("defaultMetroCityList")});var vehicleDetailsCookie=localStorageService.get("selectedCarDetails");vehicleDetailsCookie&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookie.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedCarDetails",vehicleDetailsCookie));var vehicleDetailsCookieBike=localStorageService.get("selectedBikeDetails");vehicleDetailsCookieBike&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookieBike.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedBikeDetails",vehicleDetailsCookieBike))}else{var popularRTOParam={popularRTOList:"Y"};3!=$scope.selectedBusinessLineId&&2!=$scope.selectedBusinessLineId||getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.getPopularRTO,popularRTOParam,function(callbackMetro){callbackMetro.data?(localStorageService.set("defaultMetroCityList",callbackMetro.data),$scope.defaultMetroList=callbackMetro.data):($scope.defaultMetroList=commonResultLabels.popularRTOList.data,localStorageService.set("defaultMetroCityList",$scope.defaultMetroList));var cityName=localStorageService.get("carRegAddress")?localStorageService.get("carRegAddress").city:"Mumbai";cityName=localStorageService.get("bikeRegistrationPlaceUsingIP")?localStorageService.get("bikeRegistrationPlaceUsingIP").city:"MUMBAI";console.log("local storage is cleared cityName is : ",cityName),3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")?$rootScope.vehicleInfo&&(null!=$rootScope.selectedCarRegistrationObject||"undefined"!=String($rootScope.selectedCarRegistrationObject)?cityName=$rootScope.selectedCarRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)):2==$scope.selectedBusinessLineId&&(null==$rootScope.selectedBikeRegistrationObject&&"undefined"==String($rootScope.selectedBikeRegistrationObject)||(cityName=$rootScope.selectedBikeRegistrationObject.city)),$scope.getRegPlaceListUsingIPCity(cityName,function(){for(var i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){$scope.inputTitle=$scope.tabs[i].inputTitle,$scope.currentTab=$scope.tabs[i].url;break}});var vehicleDetailsCookie=localStorageService.get("selectedCarDetails");vehicleDetailsCookie&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookie.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedCarDetails",vehicleDetailsCookie));var vehicleDetailsCookieBike=localStorageService.get("selectedBikeDetails");vehicleDetailsCookieBike&&"undefined"!=String($rootScope.vehicleDetails)&&null!=$rootScope.vehicleDetails&&(vehicleDetailsCookieBike.registrationNumber=$rootScope.vehicleDetails.registrationNumber,localStorageService.set("selectedBikeDetails",vehicleDetailsCookieBike))})}function getLocationDetails(position){findCityBasedIP($http,position,$scope.globalLabel.responseCode.success,function(cityFromIP,pincodeFromIP,stateFromIP,cityFoundStatus){var IPBasedCityDetails={};IPBasedCityDetails.city=cityFromIP,IPBasedCityDetails.pincode=pincodeFromIP,IPBasedCityDetails.state=stateFromIP,3==$scope.selectedBusinessLineId?localStorageService.set("carRegAddress",IPBasedCityDetails):2==$scope.selectedBusinessLineId&&localStorageService.set("bikeRegAddress",IPBasedCityDetails),$scope.getRegPlaceListUsingIPCity(cityFromIP,function(){3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickBikeQuote",{})})})}if(!localStorageService.get("websiteVisitedOnce"))if(navigator.geolocation)navigator.geolocation.getCurrentPosition(getLocationDetails);else{console.log("Geolocation is not supported by this browser.");getLocationDetails(void 0)}$scope.backToProfessionalJourney=function(){$location.path("/professionalJourney")},$scope.onClickTab=function(tab){if($rootScope.tabSelectionStatus){if(tab.disabled)return;if($scope.disabledRedirectToResult=!1,$rootScope.wordPressEnabled&&($rootScope.isBackButtonPressed=!1,$rootScope.viewOptionDisabled=!1,$scope.displayResult=!1,$rootScope.displayInstantScreen=!0,$scope.createLeadScreen=!1,$rootScope.enabledProgressLoader=!1,3==tab.businessLineId?($scope.dynamicColor="carBg",$scope.dynamicInnerBg="wp_carInnerBg"):2==tab.businessLineId?($scope.dynamicColor="bikeBg",$scope.dynamicInnerBg="wp_bikeInnerBg"):1==tab.businessLineId?($scope.dynamicColor="termBg",$scope.dynamicInnerBg="wp_lifeInnerBg"):4==tab.businessLineId?($scope.dynamicColor="healthBg",$scope.dynamicInnerBg="wp_healthInnerBg"):5==tab.businessLineId?($scope.dynamicColor="travelBg",$scope.dynamicInnerBg="wp_travelInnerBg"):6==tab.businessLineId?($scope.dynamicColor="criticalIllnessBg",$scope.dynamicInnerBg="wp_criticalIllnessInnerBg"):8==tab.businessLineId?($scope.dynamicColor="personalAccidentBg",$scope.dynamicInnerBg="wp_personalAccidentInnerBg"):7==tab.businessLineId&&($scope.dynamicColor="homeBg",$scope.dynamicInnerBg="wp_homeInnerBg")),$scope.currentTab==tab.url)return;$scope.inputTitle=tab.inputTitle,$rootScope.minAnnualPremium=1e3,$rootScope.maxAnnualPremium=5e3,$rootScope.exclusiveDiscountsLength="00",$rootScope.calculatedQuotesLength="00",$rootScope.calculatedRidersLength="00",localStorage.setItem("selectedBusinessLineId",tab.businessLineId),localStorageService.set("selectedBusinessLineId",tab.businessLineId),1==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife):2==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelBike):3==tab.businessLineId?$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelCar:4==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelHealth):5==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelTravel):6==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife):8==tab.businessLineId?($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelPersonalAccident):7==tab.businessLineId&&($rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.instantQuoteScreenHeader=$scope.globalLabel.applicationLabels.common.premiumSliderModalLabelLife),$scope.selectedBusinessLineId=tab.businessLineId,$scope.currentTab=tab.url}},$scope.isActiveTab=function(tabUrl){return tabUrl==$scope.currentTab},localStorageService.get("carRegistrationDetails")?$rootScope.showCarRegAreaStatus=!1:"/professionalJourney"==$location.path()&&localStorageService.get("selectedCarDetails")?$rootScope.showCarRegAreaStatus=localStorageService.get("selectedCarDetails").showCarRegAreaStatus:$rootScope.showCarRegAreaStatus=!0,localStorageService.get("bikeRegistrationDetails")?localStorageService.get("selectedBikeDetails")?$rootScope.showBikeRegAreaStatus=!1:$rootScope.showBikeRegAreaStatus=localStorageService.get("selectedBikeDetails").showBikeRegAreaStatus:$rootScope.showBikeRegAreaStatus=!0,$scope.modalVehicleRegistration=!1,$scope.toggleVehicleRegistrationPopup=function(regAreaStatus){$rootScope.selectedRegData="",$rootScope.vehicleDetails.registrationNumber="",$rootScope.isregNumber=!1,3==localStorageService.get("selectedBusinessLineId")&&($scope.vehicleDetails=localStorageService.get("selectedCarDetails"),$scope.vehicleDetails.engineNumber="",$scope.vehicleDetails.chassisNumber="",$scope.vehicleDetails.isregNumberDisabled=!1,$scope.vehicleDetails.showBikeRegAreaStatus=regAreaStatus,localStorageService.set("selectedCarDetails",$scope.vehicleDetails)),2==localStorageService.get("selectedBusinessLineId")&&($scope.vehicleDetails=localStorageService.get("selectedBikeDetails"),$scope.vehicleDetails.engineNumber="",$scope.vehicleDetails.chassisNumber="",$scope.vehicleDetails.isregNumberDisabled=!1,$scope.vehicleDetails.showBikeRegAreaStatus=regAreaStatus,localStorageService.set("selectedBikeDetails",$scope.vehicleDetails)),localStorageService.get("selectedBusinessLineId")?0==regAreaStatus&&2==localStorageService.get("selectedBusinessLineId")&&0==$rootScope.disableBikeRegPopup?($scope.modalVehicleRegistration=!1,$rootScope.showBikeRegAreaStatus=!1):1==regAreaStatus&&2==localStorageService.get("selectedBusinessLineId")&&0==$rootScope.disableBikeRegPopup?($scope.modalVehicleRegistration=!0,$rootScope.showBikeRegAreaStatus=!0):0==regAreaStatus&&3==localStorageService.get("selectedBusinessLineId")&&0==$rootScope.disableCarRegPopup?($scope.modalVehicleRegistration=!1,$rootScope.showCarRegAreaStatus=!1):1==regAreaStatus&&3==localStorageService.get("selectedBusinessLineId")&&0==$rootScope.disableCarRegPopup&&($scope.modalVehicleRegistration=!0,$rootScope.showCarRegAreaStatus=!0):($rootScope.showBikeRegAreaStatus=!regAreaStatus,$rootScope.showCarRegAreaStatus=!regAreaStatus),$scope.hideModal=function(){$scope.modalVehicleRegistration=!1,$rootScope.regNumStatus=!1},setTimeout(function(){$(".clickMetro").css("height","50px"),$(".showMetro").hide()},100),$(".clickMetro").click(function(){$(".showMetro").hide(),$(this).find(".showMetro").show(),$(".thumbnail").removeClass("RToButtonActive"),$(".thumbnail").addClass("RToButton"),$(this).find(".thumbnail").addClass("RToButtonActive");var getHeight=$(this).find(".showMetro").height();$(".clickMetro").css("height","50px"),$(this).css("height",getHeight+50)})},$scope.hideStatus=!0,$scope.oldMetroSelected=void 0,$scope.selectedMetroRTO=function(metrosRTOList){$scope.metros=metrosRTOList,$scope.oldMetroSelected==metrosRTOList?($scope.hideStatus=!0,$scope.oldMetroSelected=void 0,setTimeout(function(){$(".clickMetro").css("height","50px"),$(".showMetro").hide(),$(".thumbnail").addClass("RToButton")},100)):($scope.hideStatus=!1,$scope.oldMetroSelected=metrosRTOList),$scope.metros.RTODetails.length%3==2?$scope.dummyLength=1:$scope.metros.RTODetails.length%3==1?$scope.dummyLength=2:$scope.dummyLength=0},$scope.getRegPlaceList=function(city){return city.indexOf("-")>0&&(city=city.replace("-","")),$http.get(getServiceLink+$scope.globalLabel.documentType.RTODetails+"&q="+city).then(function(response){return JSON.parse(response.data).data})},$scope.getHospitalList=function(){if(4==localStorageService.get("selectedBusinessLineId")){for(var splitStr=localStorageService.get("healthQuoteInputParamaters").personalInfo.city.toLowerCase().split(" "),i=0;i<splitStr.length;i++)splitStr[i]=splitStr[i].charAt(0).toUpperCase()+splitStr[i].substring(1);var cityFormatted=splitStr.join(" ");getListFromDB(RestAPI,cityFormatted,"cashlessHospital",$scope.globalLabel.request.findAppConfig,function(hospitalList){hospitalList.responseCode==$scope.globalLabel.responseCode.success&&($scope.hospitalList=hospitalList.data,localStorageService.set("hospitalList",hospitalList.data))})}},$scope.getGarageList=function(){if(3==localStorageService.get("selectedBusinessLineId")){$scope.garageList={},$scope.garageList.city=localStorageService.get("carQuoteInputParamaters").vehicleInfo.city;localStorageService.get("carQuoteInputParamaters")&&localStorageService.get("carQuoteInputParamaters").vehicleInfo.make?$scope.garageList.make=localStorageService.get("carQuoteInputParamaters").vehicleInfo.make:$scope.garageList.make="Maruti Suzuki",localStorageService.get("carRegistrationDetails")?$scope.garageList.regisCode=localStorageService.get("carRegistrationDetails").RTOCode:$scope.garageList.regisCode=localStorageService.get("carQuoteInputParamaters").vehicleInfo.RTOCode,RestAPI.invoke($scope.globalLabel.transactionName.getGarageDetails,$scope.garageList).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){var garageResponse=callback;null!=garageResponse&&"undefined"!=String(garageResponse)?localStorageService.set("garageDetails",garageResponse.data):localStorageService.set("garageDetails",void 0)}else localStorageService.set("garageDetails",void 0)})}},$scope.onSelect=function(item){$scope.modalVehicleRegistration=!1,$rootScope.vehicleInfo.registrationPlace=item.display,$rootScope.vehicleDetails.registrationNumber="",$rootScope.isregNumber=!1,2==localStorageService.get("selectedBusinessLineId")&&($rootScope.selectedBikeRegistrationObject=item,$scope.vehicleDetails=localStorageService.get("selectedBikeDetails"),$scope.vehicleDetails.engineNumber="",$scope.vehicleDetails.chassisNumber="",$scope.vehicleDetails.isregNumberDisabled=!1,$rootScope.showBikeRegAreaStatus=!0,$scope.showRegAreaStatus=$rootScope.showBikeRegAreaStatus,$scope.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=""),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails)),3==localStorageService.get("selectedBusinessLineId")&&($rootScope.selectedCarRegistrationObject=item,$scope.vehicleDetails=localStorageService.get("selectedCarDetails"),$scope.vehicleDetails.engineNumber="",$scope.vehicleDetails.chassisNumber="",$scope.vehicleDetails.isregNumberDisabled=!1,$rootScope.showCarRegAreaStatus=!0,$scope.showRegAreaStatus=$rootScope.showCarRegAreaStatus,$scope.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=""),localStorageService.set("selectedCarDetails",$scope.vehicleDetails));var rtoDetail={};rtoDetail.rtoName=item.display,rtoDetail.rtoCity=item.city,rtoDetail.rtoState=item.state,rtoDetail.rtoStatus=!0,rtoDetail.rtoObject=item,getPincodeFromCity($http,rtoDetail,function(resultedRTOInfo){if(resultedRTOInfo.responseCode==$scope.globalLabel.responseCode.success?rtoDetail.rtoPincode=resultedRTOInfo.data[0].pincode:rtoDetail.rtoPincode="",3==localStorageService.get("selectedBusinessLineId")){if(localStorageService.get("carRegAddress"))localStorageService.get("carRegAddress").pincode=rtoDetail.rtoPincode,localStorageService.get("carRegAddress").city=$rootScope.selectedCarRegistrationObject.city,localStorageService.get("carRegAddress").state=$rootScope.selectedCarRegistrationObject.state;else(getCity={}).pincode=rtoDetail.rtoPincode,getCity.city=$rootScope.selectedCarRegistrationObject.city,getCity.state=$rootScope.selectedCarRegistrationObject.state,localStorageService.set("carRegAddress",getCity);localStorageService.set("carRegistrationPlaceUsingIP",rtoDetail)}else if(2==localStorageService.get("selectedBusinessLineId")){var getCity;if(localStorageService.get("bikeRegAddress"))localStorageService.get("bikeRegAddress").pincode=rtoDetail.rtoPincode,localStorageService.get("bikeRegAddress").city=$rootScope.selectedBikeRegistrationObject.city,localStorageService.get("bikeRegAddress").state=$rootScope.selectedBikeRegistrationObject.state;else(getCity={}).pincode=rtoDetail.rtoPincode,getCity.city=$rootScope.selectedBikeRegistrationObject.city,getCity.state=$rootScope.selectedBikeRegistrationObject.state,localStorageService.set("bikeRegAddress",getCity);localStorageService.set("bikeRegistrationPlaceUsingIP",rtoDetail)}$rootScope.wordPressEnabled&&!$scope.isFromLanding||(3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):$scope.$broadcast("callSingleClickBikeQuote",{}))})},$scope.redirectWithFlag=function(param){$scope.getParamForQuote=param},$scope.redirectResultScreen=function(){for(var selectedTab,i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){selectedTab=$scope.tabs[i].name;break}$location.path("/"+selectedTab+"Result")},$rootScope.isBackButtonPressed&&($scope.quoteUserInfo=quoteUserInfoCookie),$scope.leadCreationUserInfo=function(){$rootScope.loading=!0,$scope.disabledRedirectToResult=!0;var userInfoWithQuoteParam={};if($scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$scope.quoteUserInfo.createLeadStatus||($scope.quoteUserInfo.createLeadStatus=!1),localStorageService.set("quoteUserInfo",$scope.quoteUserInfo),$scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.life)userInfoWithQuoteParam.quoteParam=localStorageService.get("lifeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("lifeQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("LIFE_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("LIFE_UNIQUE_QUOTE_ID_ENCRYPTED"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.bike)userInfoWithQuoteParam.quoteParam=localStorageService.get("bikeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("BIKE_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("BIKE_UNIQUE_QUOTE_ID_ENCRYPTED");else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.car)userInfoWithQuoteParam.quoteParam=localStorageService.get("carQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("CAR_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("CAR_UNIQUE_QUOTE_ID_ENCRYPTED"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.health)userInfoWithQuoteParam.quoteParam=localStorageService.get("healthQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalInfo=localStorageService.get("healthQuoteInputParamaters").personalInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("HEALTH_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("HEALTH_UNIQUE_QUOTE_ID_ENCRYPTED"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.travel){var quoteParam=angular.copy(localStorageService.get("travelQuoteInputParamaters").quoteParam);userInfoWithQuoteParam.quoteParam=quoteParam,userInfoWithQuoteParam.quoteParam.gender=quoteParam.travellers[0].gender,userInfoWithQuoteParam.quoteParam.age=quoteParam.travellers[0].age;var travelDetails=angular.copy(localStorageService.get("travelDetails"));userInfoWithQuoteParam.travelDetails=travelDetails,1==travelDetails.destinations.length?userInfoWithQuoteParam.travelDetails.country=travelDetails.destinations[0].displayField:travelDetails.destinations.length>1&&(userInfoWithQuoteParam.travelDetails.country="Multipal"),userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("TRAVEL_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("TRAVEL_UNIQUE_QUOTE_ID__ENCRYPTED"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId}else $scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.criticalIllness?(userInfoWithQuoteParam.quoteParam=localStorageService.get("criticalIllnessQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("criticalIllnessQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("CRITICAL_ILLNESS_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.UNIQUE_QUOTE_ID_ENCRYPTED=localStorageService.get("CRITICAL_ILLNESS__UNIQUE_QUOTE_ID_ENCRYPTED"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId):$scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.personalAccident?(userInfoWithQuoteParam.quoteParam=localStorageService.get("personalAccidentQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("personalAccidentQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("PERSONAL_ACCIDENT_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId):$scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.home&&(userInfoWithQuoteParam.quoteParam=localStorageService.get("homeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("homeQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("HOME_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId);if(userInfoWithQuoteParam.contactInfo=$scope.quoteUserInfo,localStorageService.get("professionalQuoteParams")){var profQuoteRequest=localStorageService.get("professionalQuoteParams");profQuoteRequest&&profQuoteRequest.commonInfo&&(profQuoteRequest.commonInfo.firstName=$scope.quoteUserInfo.firstName,profQuoteRequest.commonInfo.lastName=$scope.quoteUserInfo.lastName,profQuoteRequest.commonInfo.mobileNumber=$scope.quoteUserInfo.mobileNumber,profQuoteRequest.commonInfo.emailId=$scope.quoteUserInfo.emailId,localStorageService.set("professionalQuoteParams",profQuoteRequest))}userInfoWithQuoteParam.requestSource="web",campaignSource.utm_source&&(userInfoWithQuoteParam.utm_source=campaignSource.utm_source),campaignSource.utm_medium&&(userInfoWithQuoteParam.utm_medium=campaignSource.utm_medium),$scope.personalInfo=userInfoWithQuoteParam.personalInfo,RestAPI.invoke($scope.globalLabel.transactionName.createLead,userInfoWithQuoteParam).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success&&(messageIDVar=callback.data.messageId,document.cookie="messageId="+messageIDVar,$scope.quoteUserInfo.messageId=messageIDVar,$scope.quoteUserInfo.createLeadStatus=!1,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo),1==imauticAutomation)){for(var selectedTab,i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){selectedTab=$scope.tabs[i].name;break}"bike"==selectedTab&&imatBikeLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted"),"car"==selectedTab&&imatCarLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted"),"health"==selectedTab&&imatHealthLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted"),"life"==selectedTab&&imatLifeLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted"),"travel"==selectedTab&&imatTravelLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted"),"criticalIllness"==selectedTab&&imatCriticalIllnessLeadQuoteInfo(localStorageService,$scope,"LeadSubmitted")}if("/healthLanding"==$location.path()||"/lifeLanding"==$location.path()){var landingEmailReceipentlist=["mohammad.kantawala@navnitinsurance.com"];for(i=0;i<landingEmailReceipentlist.length;i++){var proposalDetailsEmail={paramMap:{},funcType:"LandingEmailCampaign",isBCCRequired:"Y"};proposalDetailsEmail.paramMap.userId=landingEmailReceipentlist[i],proposalDetailsEmail.username=landingEmailReceipentlist[i],proposalDetailsEmail.paramMap.mobileNumber=$scope.quoteUserInfo.mobileNumber,"/healthLanding"==$location.path()?proposalDetailsEmail.paramMap.selectedPolicyType="health":proposalDetailsEmail.paramMap.selectedPolicyType="life",console.log("proposalDetailsEmail in send email landing user is: ",proposalDetailsEmail);var request={},header={};$scope.EmailChoices;header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=sendEmail,header.deviceId=deviceIdOrigin,request.header=header,request.body=proposalDetailsEmail,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback){1e3==JSON.parse(callback).responseCode&&(console.log("email sent to :",proposalDetailsEmail.username),$scope.redirectResultScreen())})}}"/healthLanding"==$location.path()&&"/lifeLanding"==$location.path()||($rootScope.wordPressEnabled&&$rootScope.resultCarrierId||$scope.isFromLanding,$scope.redirectResultScreen())})},$scope.redirectToResult=function(){console.log("inside redirectToResult function"),$scope.quoteUserInfo.emailId?validateEmail($scope.quoteUserInfo.emailId)&&$scope.quoteUserInfo.firstName&&$scope.quoteUserInfo.mobileNumber&&($scope.quoteUserInfoForm.emailId.$setValidity("emailId",!0),$scope.quoteUserInfoForm.$invalid=!1):$scope.quoteUserInfo.firstName&&$scope.quoteUserInfo.mobileNumber&&($scope.quoteUserInfoForm.$invalid=!1),$scope.quoteUserInfoForm.$invalid?(console.log("inside redirectToResult function step 2"),angular.forEach($scope.quoteUserInfoForm.$invalid,function(field){field.$setTouched()})):(console.log("inside redirectToResult function step 3"),$scope.leadCreationUserInfo())},$scope.landingRedirection=function(){setTimeout(function(){$scope.isFromLanding=!0,$scope.disabledRedirectToResult=!0,sourceOrigin="landing",console.log("sourceOrigin in landingRedirection function ",sourceOrigin),$scope.redirectToResult()},500)},$scope.redirectToIQResult=function(){$rootScope.title=$scope.globalLabel.policies365Title.personaDetails;var selectedTab,selectedLineOfBusiness=localStorageService.get("selectedBusinessLineId");messageIDVar=$location.search().messageId,$rootScope.viewOptionDisabled||(2==selectedLineOfBusiness?$scope.showRegAreaStatus=$rootScope.showBikeRegAreaStatus:3==selectedLineOfBusiness&&($scope.showRegAreaStatus=$rootScope.showCarRegAreaStatus),null!=quoteUserInfoCookie&&"undefined"!=String(quoteUserInfoCookie)?0==$scope.showRegAreaStatus&&("undefined"===String($rootScope.vehicleDetails.registrationNumber)||String($rootScope.vehicleDetails.registrationNumber).length<6)?$rootScope.regNumStatus=!0:($rootScope.regNumStatus=!1,$scope.quoteUserInfo=quoteUserInfoCookie):0==$scope.showRegAreaStatus&&("undefined"===String($rootScope.vehicleDetails.registrationNumber)||String($rootScope.vehicleDetails.registrationNumber).length<6)?$rootScope.regNumStatus=!0:$rootScope.regNumStatus=!1),$scope.getHospitalList(),$scope.getGarageList();for(var i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){selectedTab=$scope.tabs[i].name;break}$location.path("/"+selectedTab+"Result")},$rootScope.navigateView=function(){$scope.createLeadScreen=!$scope.createLeadScreen,$rootScope.displayInstantScreen=!$rootScope.displayInstantScreen,$rootScope.displayInstantScreen?$scope.displayResult=!1:$scope.displayResult=!0},$scope.modalView=!1,$scope.toggleView=function(){$rootScope.disableHealthNextScreen=!1,$rootScope.title=$scope.globalLabel.policies365Title.personaDetails;var selectedLineOfBusiness=localStorageService.get("selectedBusinessLineId");$rootScope.viewOptionDisabled||(2==selectedLineOfBusiness?$scope.showRegAreaStatus=$rootScope.showBikeRegAreaStatus:3==selectedLineOfBusiness&&($scope.showRegAreaStatus=$rootScope.showCarRegAreaStatus)),null!=quoteUserInfoCookie&&"undefined"!=String(quoteUserInfoCookie)?0==$scope.showRegAreaStatus&&("undefined"===String($rootScope.vehicleDetails.registrationNumber)||String($rootScope.vehicleDetails.registrationNumber).length<6)?($rootScope.regNumStatus=!0,$scope.quoteUserInfo=quoteUserInfoCookie,$rootScope.wordPressEnabled?($rootScope.displayInstantScreen=!$rootScope.displayInstantScreen,$scope.createLeadScreen=!$scope.createLeadScreen,$scope.displayResult=!0,$rootScope.enabledProgressLoader=!0,$rootScope.resultCarrierId=[],3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickBikeQuote",{}):1==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickLifeQuote",{}):4==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickHealthQuote",{}):5==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickTravelQuote",{}):6==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCriticalIllnessQuote",{}):8==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickPersonalAccidentQuote",{}):7==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickHomeQuote",{})):$scope.leadCreationUserInfo()):($rootScope.regNumStatus=!1,$scope.quoteUserInfo=quoteUserInfoCookie,$rootScope.wordPressEnabled?($rootScope.displayInstantScreen=!$rootScope.displayInstantScreen,$scope.createLeadScreen=!$scope.createLeadScreen,$scope.displayResult=!0,$rootScope.enabledProgressLoader=!0,$rootScope.resultCarrierId=[],3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickBikeQuote",{}):1==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickLifeQuote",{}):4==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickHealthQuote",{}):5==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickTravelQuote",{}):6==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCriticalIllnessQuote",{}):8==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickPersonalAccidentQuote",{}):7==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickHomeQuote",{})):$scope.leadCreationUserInfo()):0==$scope.showRegAreaStatus&&("undefined"===String($rootScope.vehicleDetails.registrationNumber)||String($rootScope.vehicleDetails.registrationNumber).length<6)?$rootScope.regNumStatus=!0:($rootScope.regNumStatus=!1,$rootScope.wordPressEnabled?($scope.displayResult=!0,$rootScope.enabledProgressLoader=!0,$rootScope.resultCarrierId=[],$rootScope.displayInstantScreen=!1,$scope.createLeadScreen=!$scope.createLeadScreen,3==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCarQuote",{}):2==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickBikeQuote",{}):1==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickLifeQuote",{}):4==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickHealthQuote",{}):5==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickTravelQuote",{}):6==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickCriticalIllnessQuote",{}):8==$scope.selectedBusinessLineId?$scope.$broadcast("callSingleClickPersonalAccidentQuote",{}):7==$scope.selectedBusinessLineId&&$scope.$broadcast("callSingleClickHomeQuote",{})):$scope.modalView=!$scope.modalView),$scope.hideModal=function(){$scope.modalView=!1},$scope.getHospitalList(),$scope.getGarageList()},$scope.toggleModal=function(insuranceType){0==insuranceType.disabled?(localStorageService.set("selectedBusinessLineId",insuranceType.businessLineId),$location.path("/quote")):$rootScope.P365Alert("Policies365","Soon this facility will be available at your service.","Ok")},$scope.submitChildPlanConfirm=function(){$rootScope.modalChildPlanConfirm=!1,$location.path("/Quote")}},$scope.$broadcast("invokeGetQuoteTemplate",{}),$scope.$broadcast("invokeCampaignTemplate",{}),$(".activateFooter").show(),$(".activateHeader").show(),angular.element(document.querySelector(".bodyWrapper")).bind("scroll",function(){document.querySelector(".bodyWrapper").scrollTop>"50"?($(".landInsureHeader").css({background:"rgba(182, 182, 182, 0.95)","z-index":"111"}),$(".landingHeader a,.landingHeader span").css({color:"#424242","font-weight":"bold"})):$(".landInsureHeader").css({background:"transparent","z-index":"1"})}),setTimeout(function(){var maxHeight=-1;$(".setHeight").each(function(){maxHeight=maxHeight>$(this).height()?maxHeight:$(this).height()}),$(".setHeight").each(function(){$(this).height(maxHeight+25)})},100),$(window).width()<=320?$scope.setPosition="bottom":$scope.setPosition="left",$scope.toggleBasicExpanded=function(){$scope.basicExpanded=!$scope.basicExpanded}}]),angular.module("signIn",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("signInController",["RestAPI","$scope","$rootScope","$location","$http","localStorageService","$timeout","$filter","$anchorScroll","$sce","$window",function(RestAPI,$scope,$rootScope,$location,$http,localStorageService,$timeout,$filter,$anchorScroll,$sce,$window){$scope.authenticate={},localStorageService.get("userLoginInfo")&&($scope.userLoginInfo=localStorageService.get("userLoginInfo"),$scope.userLoginInfo.username&&(1==imauticAutomation&&imatEvent("CustomerSignIN"),$location.path("/dashboard"))),$scope.p365Labels=profileLabels,$scope.validateLogin=function(){if($scope.loginForm.$valid){$scope.disableOTP=!1,$scope.authenticate.enteredOTP="";var validateLoginParam={paramMap:{}};validateLoginParam.mobileNumber=$scope.login.MobileNumber,validateLoginParam.funcType=$scope.p365Labels.functionType.otpAuth,validateLoginParam.paramMap.OTP=$scope.p365Labels.functionType.otpGenerate,sessionIDvar&&(validateLoginParam.sessionId=sessionIDvar),getDocUsingParam(RestAPI,userValidation,validateLoginParam,function(createOTP){createOTP.responseCode==$scope.p365Labels.responseCode.success?($scope.createOTPError="",$scope.modalLogin=!1,$rootScope.showAuthenticateForm()):createOTP.responseCode==$scope.p365Labels.responseCode.userNotExist?$scope.createOTPError=createOTP.message:createOTP.responseCode==$scope.p365Labels.responseCode.blockedMobile?$scope.createOTPError=createOTP.message:createOTP.responseCode==$scope.p365Labels.responseCode.mobileInvalidCode?$scope.createOTPError=createOTP.message:$scope.createOTPError=$scope.p365Labels.errorMessage.createOTP})}},$rootScope.showAuthenticateForm=function(){$scope.modalOTP=!0},$scope.closeAuthenticateForm=function(){$scope.modalOTP=!1,$scope.login.MobileNumber="",$scope.authenticate.enteredOTP=""},$scope.authenticateUser=function(){if($scope.authenticateForm.$valid){var authenticateUserParam={};authenticateUserParam.mobileNumber=$scope.login.MobileNumber,authenticateUserParam.OTP=Number($scope.authenticate.enteredOTP),getDocUsingParam(RestAPI,$scope.p365Labels.transactionName.validateOTP,authenticateUserParam,function(createOTP){if(createOTP.responseCode==$scope.p365Labels.responseCode.success){$scope.invalidOTPError="";var userLoginInfo={};createOTP.data.profileDetails&&(userLoginInfo.username=createOTP.data.profileDetails.firstName,userLoginInfo.mobileNumber=createOTP.data.profileDetails.mobile),userLoginInfo.status=!0,localStorageService.set("userLoginInfo",userLoginInfo),localStorageService.set("userProfileDetails",createOTP.data);var quoteUserInfo={};quoteUserInfo.firstName=createOTP.data.firstName,quoteUserInfo.lastName=createOTP.data.lastName,quoteUserInfo.emailId=createOTP.data.emailId,quoteUserInfo.mobileNumber=createOTP.data.mobile,quoteUserInfo.termsCondition=!0,messageIDVar?quoteUserInfo.messageIDVar=messageIDVar:(quoteUserInfo.termsCondition=!1,messageIDVar=""),localStorageService.set("quoteUserInfo",quoteUserInfo),$(".signin_link a").text(createOTP.data.firstName+" Account"),$(".logout_link").closest("li").attr("style","display:inline-block !important"),localStorage.setItem("loggedIn","true"),$location.path("/dashboard")}else createOTP.responseCode==$scope.p365Labels.responseCode.noRecordsFound?$scope.invalidOTPError=$scope.p365Labels.validationMessages.invalidOTP:createOTP.responseCode==$scope.p365Labels.responseCode.expiredOTP?$scope.invalidOTPError=$scope.p365Labels.validationMessages.expiredOTP:createOTP.responseCode==$scope.p365Labels.responseCode.blockedMobile?$scope.invalidOTPError=createOTP.message:$scope.invalidOTPError=$scope.p365Labels.validationMessages.authOTP})}},$scope.resendOTP=function(){var validateLoginParam={paramMap:{}};validateLoginParam.mobileNumber=$scope.login.MobileNumber,validateLoginParam.funcType=$scope.p365Labels.functionType.optAuth,validateLoginParam.paramMap.OTP=$scope.p365Labels.functionType.otpGenerate,getDocUsingParam(RestAPI,$scope.p365Labels.transactionName.sendSMS,validateLoginParam,function(createOTP){createOTP.responseCode==$scope.p365Labels.responseCode.success?$scope.invalidOTPError="":createOTP.responseCode==$scope.p365Labels.responseCode.userNotExist?$scope.invalidOTPError=createOTP.message:createOTP.responseCode==$scope.p365Labels.responseCode.blockedMobile?($scope.invalidOTPError=createOTP.message,$scope.disableOTP=!0):createOTP.responseCode==$scope.p365Labels.responseCode.mobileInvalidCode?$scope.invalidOTPError=createOTP.message:$scope.invalidOTPError=$scope.p365Labels.errorMessage.createOTP})}}]),angular.module("logout",["LocalStorageModule"]).controller("logoutController",["$scope","$rootScope","$location","localStorageService",function($scope,$rootScope,$location,localStorageService){console.log("logout"),$scope.userLoginInfo={},localStorageService.set("userLoginInfo",$scope.userLoginInfo),$(".signin_link a").text("My Account"),$(".logout_link").closest("li").attr("style","display:none !important"),localStorage.setItem("loggedIn","false"),setTimeout(function(){$(".logout_link").closest("li").attr("style","display:none !important")},100)}]),angular.module("paySuccess",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("paySuccessController",["RestAPI","$scope","$rootScope","$location","$http","localStorageService","$timeout",function(RestAPI,$scope,$rootScope,$location,$http,localStorageService,$timeout){loadDatbase(function(){var selectedBusinessLineId=localStorageService.get("selectedBusinessLineId");1==selectedBusinessLineId?($location.path("/paysuccesslife"),$scope.$apply()):2==selectedBusinessLineId?($location.path("/paysuccessbike"),$scope.$apply()):3==selectedBusinessLineId?($location.path("/paysuccesscar"),$scope.$apply()):4==selectedBusinessLineId?($location.path("/paysuccesshealth"),$scope.$apply()):8==selectedBusinessLineId?($location.path("/paysuccesspersonalaccident"),$scope.$apply()):($location.path("/paysuccesstravel"),$scope.$apply())})}]),angular.module("payFailure",["CoreComponentApp","LocalStorageModule","ngMessages"]).controller("payFailureController",["RestAPI","$scope","$rootScope","$location","$http","localStorageService","$timeout",function(RestAPI,$scope,$rootScope,$location,$http,localStorageService,$timeout){loadDatbase(function(){var selectedBusinessLineId=localStorageService.get("selectedBusinessLineId");console.log("selectedBusinessLineId in payfailure controller is:",selectedBusinessLineId),1==selectedBusinessLineId?($location.path("/payfailurelife"),$scope.$apply()):2==selectedBusinessLineId?($location.path("/payfailurebike"),$scope.$apply()):3==selectedBusinessLineId?($location.path("/payfailurecar"),$scope.$apply()):4==selectedBusinessLineId?($location.path("/payfailurehealth"),$scope.$apply()):8==selectedBusinessLineId?($location.path("/payfailurepersonalaccident"),$scope.$apply()):($location.path("/payfailuretravel"),$scope.$apply())})}]),angular.module("proposalresdata",["CoreComponentApp"]).controller("proposalResponseDataController",["RestAPI","$scope","$rootScope","$location","$window",function(RestAPI,$scope,$rootScope,$location,$window){var wp_path;wordPressEnabled?(wp_path=localized,$rootScope.wordPressEnabled=wordPressEnabled,$rootScope.wp_path=wp_path):($rootScope.wp_path="",wp_path=""),!wordPressEnabled&&pospEnabled&&(wp_path=localized,$rootScope.pospEnabled=pospEnabled,$rootScope.wordPressEnabled=wordPressEnabled,$rootScope.wp_path=wp_path),baseEnvEnabled&&($rootScope.baseEnvEnabled=baseEnvEnabled),agencyPortalEnabled&&($rootScope.agencyPortalEnabled=agencyPortalEnabled);var businessLineId="",urlPattern=$location.path(),redirectURL=$location.$$absUrl,proposalId=$location.search().proposalId;$location.search().orgName&&(organizationName=$location.search().orgName),redirectURL=redirectURL.split("?")[0],getDocUsingIdTransDB(RestAPI,proposalId,function(proposalDataResponse){null!=proposalDataResponse&&(1==(businessLineId=proposalDataResponse.businessLineId)&&(redirectURL=redirectURL.replace(urlPattern,"/proposalresdatalife")),2==businessLineId?redirectURL=redirectURL.replace(urlPattern,"/proposalresdatabike"):3==businessLineId?redirectURL=redirectURL.replace(urlPattern,"/proposalresdatacar"):4==businessLineId?redirectURL=redirectURL.replace(urlPattern,"/proposalresdatahealth"):5==businessLineId&&(redirectURL=redirectURL.replace(urlPattern,"/proposalresdatatravel")),$window.location=redirectURL+"?proposalId="+proposalId+"&lob="+businessLineId)})}]),angular.module("ipos",["LocalStorageModule"]).controller("iposController",["$scope","$location","$window","localStorageService",function($scope,$location,$window,localStorageService){loadDatbase(function(){var request={};request.businessLineId=$location.search().lob;var urlPattern=$location.path(),redirectURL=$location.$$absUrl;2==request.businessLineId?redirectURL=redirectURL.replace(urlPattern,"/buyTwoWheeler"):3==request.businessLineId?redirectURL=redirectURL.replace(urlPattern,"/buyFourWheeler"):4==request.businessLineId?redirectURL=redirectURL.replace(urlPattern,"/buyHealth"):5==request.businessLineId&&(console.log("localStorageService quoteUserInfo ipos:",localStorageService.get("quoteUserInfo")),redirectURL=redirectURL.replace(urlPattern,"/buyTravel")),$window.location=redirectURL})}]),angular.module("shareQuoteByEmail",[]).controller("ShareQuoteByEmailController",["$scope","$rootScope","$location","$filter","$http","RestAPI","localStorageService","$timeout","$interval","$mdDialog","$window","$sce",function($scope,$rootScope,$location,$filter,$http,RestAPI,localStorageService,$timeout,$interval,$mdDialog,$window,$sce){var wp_path;$rootScope.loading=!0,$rootScope.quoteCallStatus=1,$rootScope.flag=!0,$scope.cardView=!0,$scope.quoteUserInfo={},$scope.quoteUserInfo.messageId="",$scope.makeNames=[],$scope.ncbList=ncbListGeneric,$scope.checkForLead=!1,wordPressEnabled?(wp_path=localized,$rootScope.wordPressEnabled=wordPressEnabled,$rootScope.wp_path=wp_path):($rootScope.wp_path="",wp_path=""),!wordPressEnabled&&pospEnabled&&(wp_path=localized,$rootScope.pospEnabled=pospEnabled,$rootScope.wp_path=wp_path),baseEnvEnabled&&($rootScope.baseEnvEnabled=baseEnvEnabled),agencyPortalEnabled&&($rootScope.agencyPortalEnabled=agencyPortalEnabled);var urlPattern=$location.path(),redirectURL=$location.$$absUrl;$scope.tabs=[{businessLineId:3,url:$scope.carURL,className:"carTab tabs wp_border32",name:"car",title:"Car",inputTitle:"car",tabImgId:0},{businessLineId:2,url:$scope.bikeURL,className:"bikeTab tabs wp_border32",name:"bike",title:"Bike",inputTitle:"bike",tabImgId:1},{businessLineId:1,url:$scope.lifeURL,className:"lifeTab tabs wp_border32",name:"life",title:"Life",inputTitle:"life",tabImgId:2},{businessLineId:4,url:$scope.healthURL,className:"healthTab tabs wp_border32",name:"health",title:"Health",inputTitle:"family",tabImgId:3},{businessLineId:5,url:$scope.travelURL,className:"travelTab tabs wp_border32",name:"travel",title:"Travel",inputTitle:"travel",tabImgId:4},{businessLineId:6,url:$scope.criticalIllnessQuoteURL,className:"criticalIllnessTab tabs wp_border32",name:"criticalIllness",title:"CI",inputTitle:"CI",tabImgId:5,flagToShow:$rootScope.idepProdEnv},{businessLineId:0,url:$scope.professionalJournyURL,className:"healthTab tabs wp_border32",name:"Pofessional;Journy",title:"PJ",inputTitle:"PJ",tabImgId:5}],$location.search().orgName&&(organizationName=$location.search().orgName),$scope.getRegPlaceListUsingIPCity=function(cityName,callback){if(null!=cityName&&"undefined"!=String(cityName))return $http.get(getServiceLink+$scope.globalLabel.documentType.RTODetails+"&q="+cityName).then(function(response){var rtoDetailsResponse=JSON.parse(response.data),rtoDetail={};rtoDetailsResponse.responseCode!=$scope.globalLabel.responseCode.noRecordsFound?($rootScope.vehicleInfo={},$rootScope.vehicleInfo.selectedRegistrationObject=rtoDetailsResponse.data[0],rtoDetail.rtoName=rtoDetailsResponse.data[0].display,rtoDetail.rtoCity=rtoDetailsResponse.data[0].city,rtoDetail.rtoState=rtoDetailsResponse.data[0].state,rtoDetail.rtoObject=rtoDetailsResponse.data[0],rtoDetail.rtoStatus=!0,getPincodeFromCity($http,rtoDetail,function(resultedRTOInfo){resultedRTOInfo.responseCode==$scope.globalLabel.responseCode.success?rtoDetail.rtoPincode=resultedRTOInfo.data[0].pincode:rtoDetail.rtoPincode="",localStorageService.set("registrationPlaceUsingIP",rtoDetail)})):(rtoDetail.rtoName=void 0,rtoDetail.rtoCity=void 0,rtoDetail.rtoState=void 0,rtoDetail.rtoObject=void 0,rtoDetail.rtoStatus=!1,localStorageService.set("registrationPlaceUsingIP",rtoDetail)),callback()});var rtoDetail={rtoName:void 0,rtoCity:void 0,rtoState:void 0,rtoObject:void 0,rtoStatus:!1};localStorageService.set("registrationPlaceUsingIP",rtoDetail),callback()},$scope.updateReadEmailStatus=function(){if($location.search().isForRenewal){var mailIDVar,smsIDVar,request={};messageIDVar=$location.search().messageId,mailIDVar=$location.search().mailId,smsIDVar=$location.search().smsId,request.isRenewal=!0,mailIDVar&&!smsIDVar?request.mailId=mailIDVar:smsIDVar&&!mailIDVar&&(request.smsID=smsIDVar),RestAPI.invoke("readEmailStatus",request).then(function(readStatus){if($scope.globalLabel.responseCode.success&&smsIDVar&&$location.search().LOB){localStorageService.set("selectedBusinessLineId",$location.search().LOB);var businessLineName="";2==$location.search().LOB&&(businessLineName="bike"),3==$location.search().LOB&&(businessLineName="car"),$window.location=window.location.protocol+"//"+window.location.hostname+"/"+businessLineName}})}},$scope.getRenewalData=function(){if($scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),1==$scope.selectedBusinessLineId);else if(2==$scope.selectedBusinessLineId){if($location.search().proposalId)(request={}).proposalId=$location.search().proposalId,request.businessLineId=$scope.globalLabel.businessLineType.bike,RestAPI.invoke("getRenewalData",request).then(function(callback){for($scope.bikeProposalRes=callback,localStorageService.get("bikeQuoteInputParamaters").quoteParam.ncb=$scope.bikeProposalRes.insuranceDetails.ncb,localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.dateOfRegistration=$scope.bikeProposalRes.vehicleDetails.registrationDate,localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.PreviousPolicyExpiryDate=$scope.bikeProposalRes.insuranceDetails.prevPolicyEndDate,localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.PreviousPolicyStartDate=$scope.bikeProposalRes.insuranceDetails.prevPolicyStartDate,$scope.quoteUserInfo.emailId=$scope.bikeProposalRes.proposerDetails.emailId,$scope.quoteUserInfo.mobileNumber=$scope.bikeProposalRes.proposerDetails.mobileNumber,$scope.quoteUserInfo.firstName=$scope.bikeProposalRes.proposerDetails.firstName,$scope.quoteUserInfo.lastName=$scope.bikeProposalRes.proposerDetails.lastName,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo),i=0;i<$scope.ncbList.length;i++)if($scope.bikeProposalRes.insuranceDetails.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.vehicleDetails.policyStatus={};var date_array=$scope.bikeProposalRes.insuranceDetails.prevPolicyEndDate.split("/"),new_date=new Date(date_array[2],date_array[1],date_array[0]),current_date=new Date;new_date.setHours(0,0,0,0);var date_one=new Date(policyStatusListGeneric[0].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[0].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[0].expiryDate.split("/")[2]),date_two=new Date(policyStatusListGeneric[1].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[1].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[1].expiryDate.split("/")[2]),date_three=new Date(policyStatusListGeneric[2].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[2].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[2].expiryDate.split("/")[2]);new_date<date_two&&new_date>date_one?(localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.previousPolicyExpired="Y",$scope.vehicleDetails.policyStatus.key=1):new_date<date_three&&new_date>date_two&&new_date<current_date?(localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.previousPolicyExpired="Y",$scope.vehicleDetails.policyStatus.key=2):(localStorageService.get("bikeQuoteInputParamaters").vehicleInfo.previousPolicyExpired="N",$scope.vehicleDetails.policyStatus.key=3),$scope.quote=localStorageService.get("bikeQuoteInputParamaters"),localStorageService.set("BikeProposalResForRenewal",$scope.bikeProposalRes)})}else if(3==$scope.selectedBusinessLineId){var request;if($location.search().proposalId)(request={}).proposalId=$location.search().proposalId,request.businessLineId=$scope.globalLabel.businessLineType.car,RestAPI.invoke("getRenewalData",request).then(function(callback){for($scope.carProposalRes=callback,localStorageService.get("carQuoteInputParamaters").quoteParam.ncb=$scope.carProposalRes.insuranceDetails.ncb,localStorageService.get("carQuoteInputParamaters").vehicleInfo.dateOfRegistration=$scope.carProposalRes.vehicleDetails.registrationDate,localStorageService.get("carQuoteInputParamaters").vehicleInfo.PreviousPolicyExpiryDate=$scope.carProposalRes.insuranceDetails.prevPolicyEndDate,localStorageService.get("carQuoteInputParamaters").vehicleInfo.PreviousPolicyStartDate=$scope.carProposalRes.insuranceDetails.prevPolicyStartDate,$scope.quoteUserInfo.emailId=$scope.carProposalRes.proposerDetails.emailId,$scope.quoteUserInfo.mobileNumber=$scope.carProposalRes.proposerDetails.mobileNumber,$scope.quoteUserInfo.firstName=$scope.carProposalRes.proposerDetails.firstName,$scope.quoteUserInfo.lastName=$scope.carProposalRes.proposerDetails.lastName,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo),i=0;i<$scope.ncbList.length;i++)if($scope.carProposalRes.insuranceDetails.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.vehicleDetails.policyStatus={};var date_array=$scope.carProposalRes.insuranceDetails.prevPolicyEndDate.split("/"),new_date=new Date(date_array[2],date_array[1],date_array[0]),current_date=new Date;new_date.setHours(0,0,0,0);var date_one=new Date(policyStatusListGeneric[0].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[0].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[0].expiryDate.split("/")[2]),date_two=new Date(policyStatusListGeneric[1].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[1].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[1].expiryDate.split("/")[2]),date_three=new Date(policyStatusListGeneric[2].expiryDate.split("/")[1]+"/"+policyStatusListGeneric[2].expiryDate.split("/")[0]+"/"+policyStatusListGeneric[2].expiryDate.split("/")[2]);new_date<date_two&&new_date>date_one?(localStorageService.get("carQuoteInputParamaters").vehicleInfo.previousPolicyExpired="Y",$scope.vehicleDetails.policyStatus.key=1):new_date<date_three&&new_date>date_two&&new_date<current_date?(localStorageService.get("carQuoteInputParamaters").vehicleInfo.previousPolicyExpired="Y",$scope.vehicleDetails.policyStatus.key=2):(localStorageService.get("carQuoteInputParamaters").vehicleInfo.previousPolicyExpired="N",$scope.vehicleDetails.policyStatus.key=3),$scope.quote=localStorageService.get("carQuoteInputParamaters"),localStorageService.set("CarProposalResForRenewal",$scope.carProposalRes)})}else 4==$scope.selectedBusinessLineId?(localStorageService.set("selectedBusinessLineId",$location.search().LOB),$location.path("/quote")):5==$scope.selectedBusinessLineId?(localStorageService.set("selectedBusinessLineId",$location.search().LOB),$location.path("/quote")):1==$scope.selectedBusinessLineId&&(localStorageService.set("selectedBusinessLineId",$location.search().LOB),$location.path("/quote"))},$scope.redirectResultScreen=function(){for(var selectedTab,i=0;i<$scope.tabs.length;i++)if($scope.tabs[i].businessLineId==$scope.selectedBusinessLineId){selectedTab=$scope.tabs[i].name;break}1==$scope.selectedBusinessLineId?$rootScope.lifeQuoteResult=$filter("orderBy")($rootScope.lifeQuoteResult,"dailyPremium"):2==$scope.selectedBusinessLineId?$rootScope.bikeQuoteResult=$filter("orderBy")($rootScope.bikeQuoteResult,"grossPremium"):3==$scope.selectedBusinessLineId?$rootScope.carQuoteResult=$filter("orderBy")($rootScope.carQuoteResult,"grossPremium"):4==$scope.selectedBusinessLineId?$rootScope.healthQuoteResult=$filter("orderBy")($rootScope.healthQuoteResult,"annualPremium"):5==$scope.selectedBusinessLineId||6==$scope.selectedBusinessLineId&&($rootScope.ciQuoteResult=$filter("orderBy")($rootScope.ciQuoteResult,"annualPremium")),$location.path("/"+selectedTab+"Result")},$scope.leadCreationUserInfo=function(){if(""!=getCookie("messageId")&&(messageIDVar=getCookie("messageId")),$scope.disabledRedirectToResult=!0,$location.search().isForRenewal)messageIDVar=$location.search().messageId,$scope.quoteUserInfo.messageId=messageIDVar,$scope.quoteUserInfo.createLeadStatus=!1,$scope.redirectResultScreen();else{var userInfoWithQuoteParam={};if($scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$scope.quoteUserInfo.createLeadStatus||($scope.quoteUserInfo.createLeadStatus=!1),$scope.quoteUserInfo.termsCondition=!0,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo),$scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.life)userInfoWithQuoteParam.quoteParam=localStorageService.get("lifeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("lifeQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("LIFE_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.bike)userInfoWithQuoteParam.quoteParam=localStorageService.get("bikeQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("BIKE_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.car)userInfoWithQuoteParam.quoteParam=localStorageService.get("carQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("CAR_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.health)userInfoWithQuoteParam.quoteParam=localStorageService.get("healthQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("HEALTH_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId;else if($scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.travel){var quoteParam=angular.copy(localStorageService.get("travelQuoteInputParamaters").quoteParam);userInfoWithQuoteParam.quoteParam=quoteParam;for(var i=0;i<quoteParam.travellers.length;i++){if("Self"==quoteParam.travellers[i].relation){userInfoWithQuoteParam.quoteParam.gender=quoteParam.travellers[i].gender,userInfoWithQuoteParam.quoteParam.age=quoteParam.travellers[i].age;break}userInfoWithQuoteParam.quoteParam.gender=quoteParam.travellers[0].gender,userInfoWithQuoteParam.quoteParam.age=quoteParam.travellers[0].age}var travelDetails=angular.copy(localStorageService.get("travelDetails"));userInfoWithQuoteParam.travelDetails=travelDetails,1==travelDetails.destinations.length?userInfoWithQuoteParam.travelDetails.country=travelDetails.destinations[0].displayField:travelDetails.destinations.length>1&&(userInfoWithQuoteParam.travelDetails.country="Multipal"),userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("TRAVEL_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId}else $scope.selectedBusinessLineId==$scope.globalLabel.businessLineType.criticalIllness&&(userInfoWithQuoteParam.quoteParam=localStorageService.get("criticalIllnessQuoteInputParamaters").quoteParam,userInfoWithQuoteParam.personalDetails=localStorageService.get("criticalIllnessQuoteInputParamaters").personalDetails,userInfoWithQuoteParam.QUOTE_ID=localStorageService.get("CRITICAL_ILLNESS_UNIQUE_QUOTE_ID"),userInfoWithQuoteParam.quoteParam.quoteType=$scope.selectedBusinessLineId);userInfoWithQuoteParam.contactInfo=$scope.quoteUserInfo,userInfoWithQuoteParam.requestSource=sourceOrigin,$location.search().lead_id&&(userInfoWithQuoteParam.lead_id=$location.search().lead_id),$scope.quoteUserInfo.createLeadStatus||null!=$scope.quoteUserInfo&&""==$scope.quoteUserInfo.messageId?($rootScope.affilateUser&&messageIDVar&&(userInfoWithQuoteParam.contactInfo.messageId=messageIDVar),RestAPI.invoke($scope.globalLabel.transactionName.createLead,userInfoWithQuoteParam).then(function(callback){callback.responseCode==$scope.globalLabel.responseCode.success&&(messageIDVar=callback.data.messageId,$scope.quoteUserInfo.messageId=messageIDVar,$scope.quoteUserInfo.createLeadStatus=!1),$scope.redirectResultScreen()})):(messageIDVar=$scope.quoteUserInfo.messageId,$scope.redirectResultScreen())}},$scope.checkForRedirect=function(){$scope.LOB=localStorageService.get("selectedBusinessLineId"),1==Number($scope.LOB)?$scope.lifeQuoteResponse.length>0&&!$scope.checkForLead&&($scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo()):2==Number($scope.LOB)?$scope.bikeQuoteResponse.length>0&&!$scope.checkForLead&&($scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo()):3==Number($scope.LOB)?$scope.carQuoteResponse.length>0&&!$scope.checkForLead&&($scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo()):4==Number($scope.LOB)?$scope.healthQuoteResponse.length>0&&!$scope.checkForLead&&($scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo()):5==Number($scope.LOB)?($scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo()):6==Number($scope.LOB)&&$scope.ciQuoteResult.length>0&&!$scope.checkForLead&&($rootScope.loading=!1,$scope.checkForLead=!0,$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():$scope.leadCreationUserInfo())},$scope.changePolStatus=function(){3==$scope.selectedBusinessLineId&&($location.search().isForRenewal?$scope.vehicleDetails.insuranceType.type==$scope.carInsuranceTypes[1].type?$scope.renewal=!0:($scope.renewal=!1,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")):void 0!=$scope.vehicleInfo.PreviousPolicyExpiryDate&&"undefined"!=String($scope.vehicleInfo.PreviousPolicyExpiryDate)||($scope.vehicleDetails.insuranceType.type==$scope.carInsuranceTypes[1].type?$scope.renewal=!0:($scope.renewal=!1,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text"))))},$scope.alterRenewal=function(){3==$scope.selectedBusinessLineId&&($scope.vehicleDetails.insuranceType.type!=$scope.carInsuranceTypes[1].type?($scope.polStatus=!1,$scope.renewal=!1,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge)):($scope.polStatus=!0,$scope.renewal=!0,$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge))),$scope.quoteParam.policyType=$scope.vehicleDetails.insuranceType.value,$scope.changePolStatus()},$scope.getRegNumber=function(registrationNumber){if("undefined"!=String(registrationNumber))if(registrationNumber=registrationNumber.replace(/[^a-zA-Z0-9]/gi,""),$rootScope.isregNumber=!1,$scope.vehicleDetails={},registrationNumber.trim().match(/^[a-zA-Z]{2}[0-9]{2}[a-zA-Z]{0,3}[0-9]{1,4}$/)&&registrationNumber.trim().length<=11&&registrationNumber.trim().length>4){$rootScope.regNumStatus=!1,$rootScope.loading=!0,$rootScope.viewOptionDisabled=!0;var request={};request.registrationNumber=registrationNumber.toUpperCase(),request.requestType="VEHICLERTOREQCONFIG",RestAPI.invoke($scope.globalLabel.transactionName.getVehicleRTODetails,request).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){var vehiclertoDetails=callback.data;if(vehiclertoDetails.uMake){var selectedVehicleName=vehiclertoDetails.uMake.trim();$scope.vehicleInfo.name=selectedVehicleName}if(vehiclertoDetails.model){var selectedVehicleModel=vehiclertoDetails.model.trim();$scope.vehicleInfo.model=selectedVehicleModel}if(vehiclertoDetails.fuelType){var selectedVehicleFuel=vehiclertoDetails.fuelType.trim();$scope.vehicleInfo.fuel=selectedVehicleFuel}if(vehiclertoDetails.registrationYear){var selectedRegYear=vehiclertoDetails.registrationYear;$scope.vehicleInfo.regYear=selectedRegYear.trim()}if(vehiclertoDetails.variant){var selectedVariant=vehiclertoDetails.variant;selectedVehicleVariant=selectedVariant.trim(),$scope.vehicleInfo.variant=selectedVehicleVariant}if(vehiclertoDetails.variantId){var selectedVariantId=vehiclertoDetails.variantId;$scope.vehicleInfo.variantId=selectedVariantId.trim()}vehiclertoDetails.vechileIdentificationNumber&&($scope.vehicleDetails.chassisNumber=vehiclertoDetails.vechileIdentificationNumber),vehiclertoDetails.engineNumber&&($scope.vehicleDetails.engineNumber=vehiclertoDetails.engineNumber);var regNumber=registrationNumber.trim().slice(0,2)+""+registrationNumber.trim().slice(2,4);$scope.getRegPlaceListRTO(regNumber,registrationNumber)}else{regNumber=registrationNumber.trim().slice(0,2)+""+registrationNumber.trim().slice(2,4);$scope.getRegPlaceListRTO(regNumber,registrationNumber)}})}else $rootScope.regNumStatus=!0,$scope.shareQuoteTemplateFunction();else $rootScope.regNumStatus=!0,$scope.shareQuoteTemplateFunction()},$scope.getRegPlaceListRTO=function(regNumber,registrationNumber){return regNumber.indexOf("-")>0&&(regNumber=regNumber.replace("-","")),$http.get(getServiceLink+$scope.globalLabel.documentType.RTODetails+"&q="+regNumber).then(function(callback){if((callback=JSON.parse(callback.data)).responseCode==$scope.globalLabel.responseCode.success){$rootScope.vehicleInfo.selectedRegistrationObject=callback.data[0],$rootScope.vehicleDetails.registrationNumber=registrationNumber.trim(),$scope.vehicleInfo.registrationNumber=$rootScope.vehicleDetails.registrationNumber;var rtoDetail={};rtoDetail.rtoName=$rootScope.vehicleInfo.selectedRegistrationObject.display,rtoDetail.rtoCity=$rootScope.vehicleInfo.selectedRegistrationObject.city,rtoDetail.rtoState=$rootScope.vehicleInfo.selectedRegistrationObject.state,rtoDetail.rtoObject=callback.data[0],rtoDetail.cityStatus=!0,rtoDetail.rtoStatus=!0,getPincodeFromCity($http,rtoDetail,function(resultedRTOInfo){if(resultedRTOInfo.responseCode==$scope.globalLabel.responseCode.success){rtoDetail.pincode=resultedRTOInfo.data[0].pincode;var getCity={};getCity.pincode=rtoDetail.pincode,getCity.cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city,getCity.state=$rootScope.vehicleInfo.selectedRegistrationObject.state,getCity.cityStatus=!0,localStorageService.set("cityDataFromIP",getCity)}else $scope.pincode="";localStorageService.set("registrationPlaceUsingIP",rtoDetail),$scope.vehicleInfo.registrationPlace=rtoDetail.rtoName}),$scope.shareQuoteTemplateFunction()}else $rootScope.loading=!1,$rootScope.regNumStatus=!0,$scope.shareQuoteTemplateFunction()})},$scope.fetchDefaultBikeInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){if($scope.renewal=!1,$scope.polStatus=!1,defaultQuoteStatus)$scope.quoteParam=defaultBikeQuoteParam.quoteParam,$scope.vehicleDetails=defaultBikeQuoteParam.vehicleDetails,$scope.vehicleInfo=defaultBikeQuoteParam.vehicleInfo;else{var bikeQuoteCookie=localStorageService.get("bikeQuoteInputParamaters"),vehicleDetailsCookie=localStorageService.get("selectedBikeDetails");bikeQuoteCookie.quoteParam&&($scope.quoteParam=bikeQuoteCookie.quoteParam),$scope.vehicleDetails=vehicleDetailsCookie,$scope.vehicleInfo=bikeQuoteCookie.vehicleInfo,$scope.quoteParam.riders=[],localStorageService.get("registrationPlaceUsingIP")&&1==localStorageService.get("registrationPlaceUsingIP").rtoStatus&&($scope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.selectedRegistrationObject=localStorageService.get("registrationPlaceUsingIP").rtoObject),$rootScope.showBikeRegAreaStatus=vehicleDetailsCookie.showBikeRegAreaStatus,$rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookie.registrationNumber}$scope.callForShareVehicleQuote()},$scope.fetchDefaultCarInputParamaters=function(defaultQuoteStatus,defaultInputParamCallback){if($scope.renewal=!0,$scope.polStatus=!0,$scope.quote={},defaultQuoteStatus)$scope.quoteParam=defaultCarQuoteParam.quoteParam,$scope.quote.quoteParam=$scope.quoteParam,$scope.vehicleDetails=defaultCarQuoteParam.vehicleDetails,$scope.vehicleInfo=defaultCarQuoteParam.vehicleInfo,$scope.quote.vehicleInfo=$scope.vehicleInfo,localStorageService.get("registrationPlaceUsingIP")&&1==localStorageService.get("registrationPlaceUsingIP").rtoStatus&&($scope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.selectedRegistrationObject=localStorageService.get("registrationPlaceUsingIP").rtoObject);else{var carQuoteCookie=localStorageService.get("carQuoteInputParamaters"),vehicleDetailsCookie=localStorageService.get("selectedCarDetails");carQuoteCookie.quoteParam&&($scope.quoteParam=carQuoteCookie.quoteParam),$scope.vehicleDetails=vehicleDetailsCookie,$scope.vehicleInfo=carQuoteCookie.vehicleInfo,$scope.quoteParam.riders=makeObjectEmpty($scope.quoteParam.riders,"array"),$scope.vehicleDetails.selectedAddOnCovers=makeObjectEmpty($scope.vehicleDetails.selectedAddOnCovers,"array"),$scope.vehicleDetails.addOnCoverCustomAmount=makeObjectEmpty($scope.vehicleDetails.addOnCoverCustomAmount,"array"),$scope.vehicleDetails.checkforNonElectrical=!1,$scope.vehicleDetails.checkforElectrical=!1,$scope.vehicleDetails.checkforPsgCover=!1,$scope.vehicleDetails.checkforLpgCngCover=!1,$scope.vehicleDetails.checkforDriverAccCover=!1,$scope.vehicleDetails.checkforAccessoriesCover=!1,$scope.vehicleInfo.checkEngineProtector=!1,$scope.vehicleInfo.engineProtectorStatus=!1,$scope.vehicleInfo.checkInvoiceCover=!1,$scope.vehicleInfo.invoiceCoverStatus=!1,$scope.vehicleInfo.checkTyreCoverRider=!1,$scope.vehicleInfo.tyreCoverStatus=!1,localStorageService.get("registrationPlaceUsingIP")&&1==localStorageService.get("registrationPlaceUsingIP").rtoStatus&&($scope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.registrationPlace=localStorageService.get("registrationPlaceUsingIP").rtoName,$rootScope.vehicleInfo.selectedRegistrationObject=localStorageService.get("registrationPlaceUsingIP").rtoObject),$rootScope.showCarRegAreaStatus=vehicleDetailsCookie.showCarRegAreaStatus,$rootScope.vehicleDetails.registrationNumber=vehicleDetailsCookie.registrationNumber}$scope.callForShareVehicleQuote()},loadDatbase(function(){if(!wordPressEnabled){if(localStorageService.clearAll(),localStorageService.clearCollection(),localStorageService.set("policies365-application-version",APPLICATION_VERSION),$location.search().isForRenewal)localStorageService.set("selectedBusinessLineId",$location.search().LOB);else if($location.search().LOB){var decodeLOB=$location.search().LOB,lob=decodeLOB.toString(decodeLOB);localStorageService.set("selectedBusinessLineId",lob)}localStorageService.set("websiteVisitedOnce",!1)}wordPressEnabled?(wp_path=localized,$rootScope.wordPressEnabled=wordPressEnabled,$rootScope.wp_path=wp_path):($rootScope.wp_path="",wp_path=""),!wordPressEnabled&&pospEnabled&&(wp_path=localized,$rootScope.pospEnabled=pospEnabled,$rootScope.wp_path=wp_path),$rootScope.wordPressEnabled=wordPressEnabled,$http.get(wp_path+"ApplicationLabels.json").then(function(response){if(localStorageService.set("applicationLabels",response.data),$scope.globalLabel=response.data.globalLabels,null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){var userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}var a,affilateCookie,sourceRequest,p365cookie=(a="wpam_id",(affilateCookie=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?affilateCookie.pop():"");p365cookie?((sourceRequest={}).deviceId=p365cookie,deviceIdOrigin=sourceRequest.deviceId,RestAPI.invoke($scope.globalLabel.transactionName.validateSource,sourceRequest).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success)if($scope.sourceValidationResponse=callback.data,sourceOrigin=$scope.sourceValidationResponse.source,deviceIdOrigin=$scope.sourceValidationResponse.deviceId,$rootScope.affilateUser=$scope.sourceValidationResponse.affilateUser,$rootScope.affilateRedirection=$scope.sourceValidationResponse.redirectToAffilateScreen,$scope.sourceValidationResponse.redirectionURL&&($rootScope.redirectionURL=$scope.sourceValidationResponse.redirectionURL),$scope.sourceValidationResponse.campaignId&&(campaign_id=$scope.sourceValidationResponse.campaignId),$scope.sourceValidationResponse.requestSource&&(requestSource=$scope.sourceValidationResponse.requestSource),$scope.sourceValidationResponse.hideLOB?$rootScope.hideLOB=$scope.sourceValidationResponse.hideLOB:$rootScope.hideLOB=!1,$scope.updateReadEmailStatus(),$rootScope.affilateUser){if($scope.quote={},$scope.selectedBusinessLineId=$location.search().LOB,$rootScope.vehicleInfo="",$rootScope.vehicleDetails="",$location.search().firstName&&($scope.quoteUserInfo.firstName=$location.search().firstName),$location.search().lastName&&($scope.quoteUserInfo.lastName=$location.search().lastName),$location.search().mobNumber&&($scope.quoteUserInfo.mobileNumber=$location.search().mobNumber),$location.search().userId&&($scope.quoteUserInfo.emailId=$location.search().userId),3==$scope.selectedBusinessLineId){var carQuoteCookie=localStorageService.get("carQuoteInputParamaters");null!==carQuoteCookie&&String(carQuoteCookie),$scope.fetchDefaultCarInputParamaters(!0,function(){})}else if(2==$scope.selectedBusinessLineId){var bikeQuoteCookie=localStorageService.get("bikeQuoteInputParamaters");null!==bikeQuoteCookie&&String(bikeQuoteCookie),$scope.fetchDefaultBikeInputParamaters(!0,function(){})}}else{var request={};if(request.LOB=$location.search().LOB,request.docId=$location.search().docId,request.userId=$location.search().userId,request.carriers=$location.search().carriers,request.monthlyPremiumOption=$location.search().monthlyPremiumOption,$location.search().view&&(request.view=$location.search().view,$scope.view=request.view),request.userId){$rootScope.flag=!1;$scope.quoteUserInfo.firstName=void 0,$scope.quoteUserInfo.emailId=void 0,$scope.quoteUserInfo.mobileNumber=void 0,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo)}$location.search().isForRenewal?$location.search().isForRenewal&&(request.LOB=$location.search().LOB,request.docId=$location.search().docId,request.userId=$location.search().userId,$location.search().proposalId):($rootScope.decryptedQuote_Id=$location.search().docId,$location.search().LOB&&($rootScope.decryptedLOB=$location.search().LOB),request.docId=$location.search().docId,$location.search().LOB&&(request.LOB=$location.search().LOB)),$scope.setPopulateQuoteData=function(mainResponseNode){if(mainResponseNode.data.messageId&&(messageIDVar=mainResponseNode.data.messageId),$scope.selectedBusinessLineId=mainResponseNode.data.businessLineId,$location.search().userId&&($location.search().isForRenewal?$scope.quoteUserInfo.emailId=$location.search().userId:$scope.quoteUserInfo.emailId=$rootScope.decryptedEmailId),1==$scope.selectedBusinessLineId)$scope.quote={},$scope.personalDetails={},$scope.lifeResponse=mainResponseNode.data,$scope.quote=$scope.lifeResponse.lifeQuoteRequest,$scope.quote.quoteParam=$scope.lifeResponse.lifeQuoteRequest.quoteParam,$scope.quote.personalDetails=$scope.lifeResponse.lifeQuoteRequest.personalDetails,$scope.personalDetails=$scope.quote.personalDetails,$rootScope.lifeQuoteResult=$scope.lifeResponse.lifeQuoteResponse,$rootScope.selectedBusinessLineId=$scope.lifeResponse.businessLineId,$scope.shareQuoteTemplateFunction();else if(3==$scope.selectedBusinessLineId){if($scope.vehicleDetails={},$scope.vehicleDetails.insuranceType={},$scope.quote={},$scope.quote.quoteParam={},$scope.vehicleInfo={},$scope.carResponse=callback.data,$scope.quote.quoteParam.ncb=$scope.carResponse.carQuoteRequest.quoteParam.ncb,$scope.carResponse.carQuoteRequest.quoteParam.ownedBy?$scope.quote.quoteParam.ownedBy=$scope.carResponse.carQuoteRequest.quoteParam.ownedBy:$scope.carResponse.carQuoteRequest.quoteParam.owneredBy&&($scope.quote.quoteParam.ownedBy=$scope.carResponse.carQuoteRequest.quoteParam.owneredBy),$scope.carResponse.carQuoteRequest.quoteParam.policyType&&($scope.quote.quoteParam.policyType=$scope.carResponse.carQuoteRequest.quoteParam.policyType),$scope.carResponse.carQuoteRequest.quoteParam.riders&&($scope.quote.quoteParam.riders=$scope.carResponse.carQuoteRequest.quoteParam.riders),$scope.quoteParam=$scope.quote.quoteParam,$scope.CAR_UNIQUE_QUOTE_ID=$scope.carResponse.QUOTE_ID,$scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.carResponse.carQuoteRequest.encryptedQuoteId,$scope.carResponse.carQuoteRequest.vehicleInfo.IDV&&($scope.vehicleInfo.IDV=$scope.carResponse.carQuoteRequest.vehicleInfo.IDV),$scope.carResponse.carQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate&&($scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.carResponse.carQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate),$scope.carResponse.carQuoteRequest.vehicleInfo.RTOCode?$scope.vehicleInfo.RTOCode=$scope.carResponse.carQuoteRequest.vehicleInfo.RTOCode:$scope.vehicleInfo.RTOCode="MH01",$scope.carResponse.carQuoteRequest.vehicleInfo.city?$scope.vehicleInfo.city=$scope.carResponse.carQuoteRequest.vehicleInfo.city:$scope.vehicleInfo.city="MUMBAI",$scope.carResponse.carQuoteRequest.vehicleInfo.dateOfRegistration){$scope.vehicleInfo.dateOfRegistration=$scope.carResponse.carQuoteRequest.vehicleInfo.dateOfRegistration;var carRegistrationYearList=$scope.vehicleInfo.dateOfRegistration.split("/");$scope.vehicleDetails.regYear=carRegistrationYearList[2]}if($scope.carResponse.carQuoteRequest.vehicleInfo.idvOption&&($scope.vehicleInfo.idvOption=$scope.carResponse.carQuoteRequest.vehicleInfo.idvOption),$scope.carResponse.carQuoteRequest.vehicleInfo.best_quote_id&&($scope.vehicleInfo.best_quote_id=$scope.carResponse.carQuoteRequest.vehicleInfo.best_quote_id),$scope.carResponse.carQuoteRequest.vehicleInfo.previousClaim&&($scope.vehicleInfo.previousClaim=$scope.carResponse.carQuoteRequest.vehicleInfo.previousClaim),$scope.carResponse.carQuoteRequest.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=$scope.carResponse.carQuoteRequest.vehicleInfo.registrationNumber),$scope.carResponse.carQuoteRequest.vehicleInfo.registrationPlace&&($scope.vehicleInfo.registrationPlace=$scope.carResponse.carQuoteRequest.vehicleInfo.registrationPlace),$scope.carResponse.carQuoteRequest.vehicleInfo.state&&($scope.vehicleInfo.state=$scope.carResponse.carQuoteRequest.vehicleInfo.state),$scope.carResponse.carQuoteRequest.vehicleInfo.make?$scope.vehicleInfo.make=$scope.carResponse.carQuoteRequest.vehicleInfo.make:$scope.vehicleInfo.make=$scope.carResponse.carQuoteRequest.vehicleInfo.name,$scope.carResponse.carQuoteRequest.vehicleInfo.model&&($scope.vehicleInfo.model=$scope.carResponse.carQuoteRequest.vehicleInfo.model),$scope.carResponse.carQuoteRequest.vehicleInfo.variant&&($scope.vehicleInfo.variant=$scope.carResponse.carQuoteRequest.vehicleInfo.variant.toString()),$scope.carResponse.carQuoteRequest.vehicleInfo.fuel&&($scope.vehicleInfo.fuel=$scope.carResponse.carQuoteRequest.vehicleInfo.fuel),$scope.carResponse.carQuoteRequest.vehicleInfo.cubicCapacity&&($scope.vehicleInfo.cubicCapacity=$scope.carResponse.carQuoteRequest.vehicleInfo.cubicCapacity),$scope.quote.vehicleInfo=$scope.vehicleInfo,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$rootScope.carQuoteResult=$scope.carResponse.carQuoteResponse,"DefaultCarQuote"==request.docId){var today=new Date,current_date=(new Date(today.setDate((new Date).getDate()+27)),("0"+today.getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear()),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,$scope.vehicleDetails.PreviousPolicyStartDate=prev_date,$scope.quote.vehicleInfo=$scope.vehicleInfo}localStorageService.set("carQuoteInputParamaters",$scope.quote),$scope.callForShareVehicleQuote(),setTimeout(function(){$location.search().isForRenewal&&$scope.getRenewalData()},200)}else if(2==$scope.selectedBusinessLineId){if($scope.vehicleDetails={},$scope.vehicleDetails.insuranceType={},$scope.quote={},$scope.quote.quoteParam={},$scope.vehicleInfo={},$scope.bikeResponse=callback.data,$scope.quote.quoteParam.ncb=$scope.bikeResponse.bikeQuoteRequest.quoteParam.ncb,$scope.bikeResponse.bikeQuoteRequest.quoteParam.ownedBy?$scope.quote.quoteParam.ownedBy=$scope.bikeResponse.bikeQuoteRequest.quoteParam.ownedBy:$scope.bikeResponse.bikeQuoteRequest.quoteParam.owneredBy&&($scope.quote.quoteParam.ownedBy=$scope.bikeResponse.bikeQuoteRequest.quoteParam.owneredBy),$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType&&($scope.quote.quoteParam.policyType=$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType),$scope.bikeResponse.bikeQuoteRequest.quoteParam.riders&&($scope.quote.quoteParam.riders=$scope.bikeResponse.bikeQuoteRequest.quoteParam.riders),$scope.quoteParam=$scope.quote.quoteParam,$scope.BIKE_UNIQUE_QUOTE_ID=$scope.bikeResponse.QUOTE_ID,$scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.bikeResponse.bikeQuoteRequest.encryptedQuoteId,$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.IDV&&($scope.vehicleInfo.IDV=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.IDV),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate&&($scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.RTOCode?$scope.vehicleInfo.RTOCode=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.RTOCode:$scope.vehicleInfo.RTOCode="MH01",$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.city?$scope.vehicleInfo.city=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.city:$scope.vehicleInfo.city="MUMBAI",$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.dateOfRegistration){$scope.vehicleInfo.dateOfRegistration=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.dateOfRegistration;var bikeRegistrationYearList=$scope.vehicleInfo.dateOfRegistration.split("/");$scope.vehicleDetails.regYear=bikeRegistrationYearList[2]}if($scope.bikeResponse.bikeQuoteRequest.vehicleInfo.idvOption&&($scope.vehicleInfo.idvOption=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.idvOption),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.best_quote_id&&($scope.vehicleInfo.best_quote_id=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.best_quote_id),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousClaim&&($scope.vehicleInfo.previousClaim=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousClaim),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationNumber),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationPlace&&($scope.vehicleInfo.registrationPlace=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationPlace),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.state&&($scope.vehicleInfo.state=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.state),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.make?$scope.vehicleInfo.make=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.make:$scope.vehicleInfo.make=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.name,$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.model&&($scope.vehicleInfo.model=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.model),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.variant&&($scope.vehicleInfo.variant=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.variant.toString()),"DefaultBikeQuote"==request.docId){current_date=("0"+(today=new Date).getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear(),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,$scope.vehicleInfo.PreviousPolicyStartDate=prev_date}$scope.quote.vehicleInfo=$scope.vehicleInfo,$scope.selectedBusinessLineId=$scope.bikeResponse.businessLineId,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$rootScope.bikeQuoteResult=$scope.bikeResponse.bikeQuoteResponse,localStorageService.set("bikeQuoteInputParamaters",$scope.quote),$scope.callForShareVehicleQuote(),setTimeout(function(){$location.search().isForRenewal&&$scope.getRenewalData()},200)}else if(4==$scope.selectedBusinessLineId){$rootScope.loaderContent={businessLine:"4",header:"Health Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.health.proverbInstantQuote)},$rootScope.title=$scope.globalLabel.policies365Title.medicalResultQuote,$scope.quote={},$scope.selectedFamilyArray=[],$scope.selectedDisease={},$scope.diseaseList={},$scope.selectedDisease.diseaseList=[],$scope.selectedFeatures=[];$scope.isDiseased=!1,$scope.healthResponse=mainResponseNode.data,$scope.quote=$scope.healthResponse.quoteRequest,$scope.quote.quoteParam=$scope.healthResponse.quoteRequest.quoteParam,$scope.quote.personalInfo=$scope.healthResponse.quoteRequest.personalInfo,$scope.selectedArea=$scope.healthResponse.quoteRequest.personalInfo.displayArea,$scope.selectedBusinessLineId=$scope.healthResponse.businessLineId,$scope.selectedFamilyArray=$scope.quote.personalInfo.selectedFamilyMembers,$scope.familyList=$scope.quote.personalInfo.selectedFamilyMembers,$rootScope.healthQuoteResult=$scope.healthResponse.quoteResponse,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$scope.shareQuoteTemplateFunction()}else 5==$scope.selectedBusinessLineId?($scope.quote={},$scope.selectedDisease={},$scope.sumInsuredList=[],$scope.travelResponse=mainResponseNode.data,$scope.quote=$scope.travelResponse.quoteRequest,$scope.selectedBusinessLineId=$scope.travelResponse.businessLineId,$scope.travellersList=$scope.quote.quoteParam.travellers,$rootScope.travelQuoteResult=$scope.travelResponse.quoteResponse,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$scope.shareQuoteTemplateFunction()):6==$scope.selectedBusinessLineId&&($scope.quote={},$scope.personalDetails={},$scope.criticalIllnessResponse=mainResponseNode.data,$scope.quote=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest,$scope.quote.quoteParam=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest.quoteParam,$scope.quote.personalDetails=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest.personalDetails,$scope.personalDetails=$scope.quote.personalDetails,$rootScope.ciQuoteResult=$scope.criticalIllnessResponse.criticalIllnessQuoteResponse,$rootScope.selectedBusinessLineId=$scope.criticalIllnessResponse.businessLineId,$scope.shareQuoteTemplateFunction())},$location.search().view&&(request.view=$location.search().view,$scope.view=request.view),setTimeout(function(){if(!$location.search().smsId){if(!request.LOB){var lob=request.docId.substr(0,3);"CAR"==lob?request.LOB="3":"BIKE"==lob&&(request.LOB="2")}RestAPI.invoke($scope.globalLabel.transactionName.quoteDataReader,request).then(function(mainResponseNode){1e3==mainResponseNode.data?$scope.setPopulateQuoteData(mainResponseNode):1009==mainResponseNode.responseCode?(3==request.LOB&&"agency"==sourceOrigin?(request.docId="DefaultCarQuote",localStorageService.set("CAR_UNIQUE_QUOTE_ID","DefaultCarQuote")):2==request.LOB&&"agency"==sourceOrigin&&(request.docId="DefaultBikeQuote",localStorageService.set("BIKE_UNIQUE_QUOTE_ID","DefaultBikeQuote")),RestAPI.invoke($scope.globalLabel.transactionName.quoteDataReader,request).then(function(mainResponseNode2){1e3==mainResponseNode2.responseCode?$scope.setPopulateQuoteData(mainResponseNode2):($rootScope.loading=!1,console.log("unable to proceed due to failed transaction name: ",$scope.globalLabel.transactionName.quoteDataReader),$rootScope.P365Alert("Policies365","We are not able fetch quotes for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok"))})):($rootScope.loading=!1,console.log("unable to proceed due to failed transaction name: ",$scope.globalLabel.transactionName.quoteDataReader),console.log("calculating default quote as no result found"),3==request.LOB&&"agency"==sourceOrigin?(request.docId="DefaultCarQuote",localStorageService.set("CAR_UNIQUE_QUOTE_ID","DefaultCarQuote")):2==request.LOB&&"agency"==sourceOrigin&&(request.docId="DefaultBikeQuote",localStorageService.set("BIKE_UNIQUE_QUOTE_ID","DefaultBikeQuote")),RestAPI.invoke($scope.globalLabel.transactionName.quoteDataReader,request).then(function(mainResponseNode2){1e3==mainResponseNode2.responseCode?$scope.setPopulateQuoteData(mainResponseNode2):($rootScope.loading=!1,console.log("unable to proceed due to failed transaction name: ",$scope.globalLabel.transactionName.quoteDataReader),$rootScope.P365Alert("Policies365","We are not able fetch quotes for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok"))}))})}},2e3)}})):((sourceRequest={}).deviceId=deviceIdOrigin,deviceIdOrigin=deviceIdOrigin,RestAPI.invoke($scope.globalLabel.transactionName.validateSource,sourceRequest).then(function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){$scope.sourceValidationResponse=callback.data,sourceOrigin=$scope.sourceValidationResponse.source,$rootScope.affilateUser=$scope.sourceValidationResponse.affilateUser,$rootScope.affilateRedirection=$scope.sourceValidationResponse.redirectToAffilateScreen,$scope.sourceValidationResponse.redirectionURL&&($rootScope.redirectionURL=$scope.sourceValidationResponse.redirectionURL),$scope.sourceValidationResponse.campaignId&&(campaign_id=$scope.sourceValidationResponse.campaignId),$scope.sourceValidationResponse.requestSource&&(requestSource=$scope.sourceValidationResponse.requestSource),$scope.updateReadEmailStatus();var request={},header={};if($location.search().crmLeadId&&(header.crmleadid=$location.search().crmLeadId,header.deviceId=deviceIdOrigin,request.header=header),request.LOB=$location.search().LOB,request.docId=$location.search().docId,request.userId=$location.search().userId,request.carriers=$location.search().carriers,request.monthlyPremiumOption=$location.search().monthlyPremiumOption,$location.search().view&&(request.view=$location.search().view,$scope.view=request.view),$location.search().isForRenewal)$location.search().isForRenewal&&(request.LOB=$location.search().LOB,request.docId=$location.search().docId,$location.search().proposalId);else{String(request.docId),String(request.LOB);var decodeEmailId=String(request.userId),decodeCarriers=String(request.carriers);String(request.monthlyPremiumOption);if($location.search().userId){$rootScope.flag=!1;$scope.quoteUserInfo.firstName=void 0,$scope.quoteUserInfo.emailId=decodeEmailId,$scope.quoteUserInfo.mobileNumber=void 0,localStorageService.set("quoteUserInfo",$scope.quoteUserInfo)}$rootScope.decryptedQuote_Id=$location.search().docId,$location.search().LOB&&($rootScope.decryptedLOB=$location.search().LOB),$rootScope.decryptedEmailId=decodeEmailId,$location.search().carriers&&($rootScope.decryptedCarrierList=decodeCarriers,$rootScope.parseCarrierList=JSON.parse($rootScope.decryptedCarrierList)),$location.search().sharePDF&&(console.log("inside $location.search().sharePDF in share quote"),$rootScope.parseCarrierList=[],$rootScope.decryptedCarrierList=decodeCarriers,$rootScope.parseCarrierList.push($rootScope.decryptedCarrierList),console.log("inside $location.search().sharePDF in share quote",$rootScope.parseCarrierList)),$rootScope.decryptedLOB&&(request.LOB=$rootScope.decryptedLOB),request.docId=$rootScope.decryptedQuote_Id}$location.search().view&&(request.view=$location.search().view,$scope.view=request.view),$scope.loadQuoteData=function(callback){if(1e3==callback.responseCode)if(callback.data.businessLineId?$scope.selectedBusinessLineId=callback.data.businessLineId:$location.search().LOB&&($scope.selectedBusinessLineId=$location.search().LOB),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$location.search().userId&&($location.search().isForRenewal?$scope.quoteUserInfo.emailId=$location.search().userId:$scope.quoteUserInfo.emailId=$rootScope.decryptedEmailId),1==$scope.selectedBusinessLineId)$scope.quote={},$scope.personalDetails={},$scope.lifeResponse=callback.data,$scope.quote=$scope.lifeResponse.lifeQuoteRequest,$scope.quote.quoteParam=$scope.lifeResponse.lifeQuoteRequest.quoteParam,$scope.quote.personalDetails=$scope.lifeResponse.lifeQuoteRequest.personalDetails,$scope.personalDetails=$scope.quote.personalDetails,$rootScope.lifeQuoteResult=$scope.lifeResponse.lifeQuoteResponse,$rootScope.selectedBusinessLineId=$scope.lifeResponse.businessLineId,$scope.shareQuoteTemplateFunction();else if(3==$scope.selectedBusinessLineId){if($scope.vehicleDetails={},$scope.vehicleDetails.insuranceType={},$scope.quote={},$scope.quote.quoteParam={},$scope.vehicleInfo={},$scope.carResponse=callback.data,$scope.quote.quoteParam.ncb=$scope.carResponse.carQuoteRequest.quoteParam.ncb,$scope.carResponse.carQuoteRequest.quoteParam.ownedBy&&($scope.quote.quoteParam.ownedBy=$scope.carResponse.carQuoteRequest.quoteParam.ownedBy),$scope.carResponse.carQuoteRequest.quoteParam.policyType&&($scope.quote.quoteParam.policyType=$scope.carResponse.carQuoteRequest.quoteParam.policyType),$scope.carResponse.carQuoteRequest.quoteParam.riders&&($scope.quote.quoteParam.riders=$scope.carResponse.carQuoteRequest.quoteParam.riders),$scope.quoteParam=$scope.quote.quoteParam,$scope.CAR_UNIQUE_QUOTE_ID=$scope.carResponse.QUOTE_ID,$scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.carResponse.carQuoteRequest.encryptedQuoteId,$scope.carResponse.carQuoteRequest.vehicleInfo.IDV&&($scope.vehicleInfo.IDV=$scope.carResponse.carQuoteRequest.vehicleInfo.IDV),$scope.carResponse.carQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate&&($scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.carResponse.carQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate),$scope.carResponse.carQuoteRequest.vehicleInfo.RTOCode?$scope.vehicleInfo.RTOCode=$scope.carResponse.carQuoteRequest.vehicleInfo.RTOCode:$scope.vehicleInfo.RTOCode="MH01",$scope.carResponse.carQuoteRequest.vehicleInfo.city?$scope.vehicleInfo.city=$scope.carResponse.carQuoteRequest.vehicleInfo.city:$scope.vehicleInfo.city="MUMBAI",$scope.carResponse.carQuoteRequest.vehicleInfo.dateOfRegistration){$scope.vehicleInfo.dateOfRegistration=$scope.carResponse.carQuoteRequest.vehicleInfo.dateOfRegistration;var carRegistrationYearList=$scope.vehicleInfo.dateOfRegistration.split("/");$scope.vehicleDetails.regYear=carRegistrationYearList[2]}if($scope.carResponse.carQuoteRequest.vehicleInfo.idvOption&&($scope.vehicleInfo.idvOption=$scope.carResponse.carQuoteRequest.vehicleInfo.idvOption),$scope.carResponse.carQuoteRequest.vehicleInfo.best_quote_id&&($scope.vehicleInfo.best_quote_id=$scope.carResponse.carQuoteRequest.vehicleInfo.best_quote_id),$scope.carResponse.carQuoteRequest.vehicleInfo.previousClaim&&($scope.vehicleInfo.previousClaim=$scope.carResponse.carQuoteRequest.vehicleInfo.previousClaim),$scope.carResponse.carQuoteRequest.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=$scope.carResponse.carQuoteRequest.vehicleInfo.registrationNumber),$scope.carResponse.carQuoteRequest.vehicleInfo.registrationPlace&&($scope.vehicleInfo.registrationPlace=$scope.carResponse.carQuoteRequest.vehicleInfo.registrationPlace),$scope.carResponse.carQuoteRequest.vehicleInfo.state&&($scope.vehicleInfo.state=$scope.carResponse.carQuoteRequest.vehicleInfo.state),$scope.carResponse.carQuoteRequest.vehicleInfo.make?$scope.vehicleInfo.make=$scope.carResponse.carQuoteRequest.vehicleInfo.make:$scope.vehicleInfo.make=$scope.carResponse.carQuoteRequest.vehicleInfo.name,$scope.carResponse.carQuoteRequest.vehicleInfo.model&&($scope.vehicleInfo.model=$scope.carResponse.carQuoteRequest.vehicleInfo.model),$scope.carResponse.carQuoteRequest.vehicleInfo.variant&&($scope.vehicleInfo.variant=$scope.carResponse.carQuoteRequest.vehicleInfo.variant.toString()),$scope.carResponse.carQuoteRequest.vehicleInfo.fuel&&($scope.vehicleInfo.fuel=$scope.carResponse.carQuoteRequest.vehicleInfo.fuel),$scope.carResponse.carQuoteRequest.vehicleInfo.cubicCapacity&&($scope.vehicleInfo.cubicCapacity=$scope.carResponse.carQuoteRequest.vehicleInfo.cubicCapacity),$scope.quote.vehicleInfo=$scope.vehicleInfo,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$rootScope.carQuoteResult=$scope.carResponse.carQuoteResponse,"DefaultCarQuote"==request.docId){var current_date=("0"+(today=new Date).getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear(),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,$scope.vehicleDetails.PreviousPolicyStartDate=prev_date}localStorageService.set("carQuoteInputParamaters",$scope.quote),$scope.callForShareVehicleQuote(),setTimeout(function(){$location.search().isForRenewal&&$scope.getRenewalData()},200)}else if(2==$scope.selectedBusinessLineId){if($scope.vehicleDetails={},$scope.vehicleDetails.insuranceType={},$scope.quote={},$scope.quote.quoteParam={},$scope.vehicleInfo={},$scope.bikeResponse=callback.data,$scope.quote.quoteParam.ncb=$scope.bikeResponse.bikeQuoteRequest.quoteParam.ncb,$scope.bikeResponse.bikeQuoteRequest.quoteParam.ownedBy&&($scope.quote.quoteParam.ownedBy=$scope.bikeResponse.bikeQuoteRequest.quoteParam.ownedBy),$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType&&($scope.quote.quoteParam.policyType=$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType),$scope.bikeResponse.bikeQuoteRequest.quoteParam.riders&&($scope.quote.quoteParam.riders=$scope.bikeResponse.bikeQuoteRequest.quoteParam.riders),$scope.quoteParam=$scope.quote.quoteParam,$scope.BIKE_UNIQUE_QUOTE_ID=$scope.bikeResponse.QUOTE_ID,$scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.bikeResponse.bikeQuoteRequest.encryptedQuoteId,$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.IDV&&($scope.vehicleInfo.IDV=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.IDV),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate&&($scope.vehicleInfo.PreviousPolicyExpiryDate=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.PreviousPolicyExpiryDate),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.RTOCode?$scope.vehicleInfo.RTOCode=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.RTOCode:$scope.vehicleInfo.RTOCode="MH01",$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.city?$scope.vehicleInfo.city=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.city:$scope.vehicleInfo.city="MUMBAI",$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.dateOfRegistration){$scope.vehicleInfo.dateOfRegistration=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.dateOfRegistration;var bikeRegistrationYearList=$scope.vehicleInfo.dateOfRegistration.split("/");$scope.vehicleDetails.regYear=bikeRegistrationYearList[2]}if($scope.bikeResponse.bikeQuoteRequest.vehicleInfo.idvOption&&($scope.vehicleInfo.idvOption=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.idvOption),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.best_quote_id&&($scope.vehicleInfo.best_quote_id=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.best_quote_id),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousClaim&&($scope.vehicleInfo.previousClaim=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousClaim),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationNumber&&($scope.vehicleInfo.registrationNumber=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationNumber),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationPlace&&($scope.vehicleInfo.registrationPlace=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.registrationPlace),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.state&&($scope.vehicleInfo.state=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.state),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.make?$scope.vehicleInfo.make=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.make:$scope.vehicleInfo.make=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.name,$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.model&&($scope.vehicleInfo.model=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.model),$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.variant&&($scope.vehicleInfo.variant=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.variant.toString()),"DefaultBikeQuote"==request.docId){var today;current_date=("0"+(today=new Date).getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear(),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,$scope.vehicleInfo.PreviousPolicyStartDate=prev_date}$scope.quote.vehicleInfo=$scope.vehicleInfo,$scope.selectedBusinessLineId=$scope.bikeResponse.businessLineId,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$rootScope.bikeQuoteResult=$scope.bikeResponse.bikeQuoteResponse,localStorageService.set("bikeQuoteInputParamaters",$scope.quote),$scope.callForShareVehicleQuote(),setTimeout(function(){$location.search().isForRenewal&&$scope.getRenewalData()},200)}else if(4==$scope.selectedBusinessLineId){$rootScope.loaderContent={businessLine:"4",header:"Health Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.health.proverbInstantQuote)},$rootScope.title=$scope.globalLabel.policies365Title.medicalResultQuote,$scope.quote={},$scope.selectedFamilyArray=[],$scope.selectedDisease={},$scope.diseaseList={},$scope.selectedDisease.diseaseList=[],$scope.selectedFeatures=[];$scope.isDiseased=!1,$scope.familyList=healthFamilyListGeneric,$scope.healthResponse=callback.data,$scope.quote=$scope.healthResponse.quoteRequest,$scope.quote.quoteParam=$scope.healthResponse.quoteRequest.quoteParam,$scope.quote.personalInfo=$scope.healthResponse.quoteRequest.personalInfo,$scope.selectedArea=$scope.healthResponse.quoteRequest.personalInfo.displayArea,$scope.selectedBusinessLineId=$scope.healthResponse.businessLineId,$scope.selectedFamilyArray=$scope.quote.personalInfo.selectedFamilyMembers,$rootScope.healthQuoteResult=$scope.healthResponse.quoteResponse,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$scope.shareQuoteTemplateFunction()}else 5==$scope.selectedBusinessLineId?($scope.quote={},$scope.selectedDisease={},$scope.sumInsuredList=[],$scope.travelResponse=callback.data,$scope.quote=$scope.travelResponse.quoteRequest,$scope.selectedBusinessLineId=$scope.travelResponse.businessLineId,$scope.travellersList=$scope.quote.quoteParam.travellers,$rootScope.travelQuoteResult=$scope.travelResponse.quoteResponse,$rootScope.selectedBusinessLineId=$scope.selectedBusinessLineId,$scope.shareQuoteTemplateFunction()):6==$scope.selectedBusinessLineId&&($scope.quote={},$scope.personalDetails={},$scope.criticalIllnessResponse=callback.data,$scope.quote=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest,$scope.quote.quoteParam=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest.quoteParam,$scope.quote.personalDetails=$scope.criticalIllnessResponse.criticalIllnessQuoteRequest.personalDetails,$scope.personalDetails=$scope.quote.personalDetails,$rootScope.ciQuoteResult=$scope.criticalIllnessResponse.criticalIllnessQuoteResponse,$rootScope.selectedBusinessLineId=$scope.criticalIllnessResponse.businessLineId,$scope.shareQuoteTemplateFunction())},setTimeout(function(){if(0==request.LOB&&(localStorageService.set("professionalShareData",request),$location.path("/professionalShareAPI")),!$location.search().smsId){if(!request.LOB){var lob=request.docId.substr(0,3);"CAR"==lob?request.LOB="3":"BIKE"==lob&&(request.LOB="2")}RestAPI.invoke($scope.globalLabel.transactionName.quoteDataReader,request).then(function(callback){1e3==callback.responseCode?$scope.loadQuoteData(callback):1009==callback.responseCode?(3==request.LOB&&"agency"==sourceOrigin?(request.docId="DefaultCarQuote",localStorageService.set("CAR_UNIQUE_QUOTE_ID","DefaultCarQuote")):2==request.LOB&&"agency"==sourceOrigin&&(request.docId="DefaultBikeQuote",localStorageService.set("BIKE_UNIQUE_QUOTE_ID","DefaultBikeQuote")),RestAPI.invoke($scope.globalLabel.transactionName.quoteDataReader,request).then(function(callback2){1e3==callback2.responseCode?$scope.loadQuoteData(callback2):($rootScope.loading=!1,$rootScope.P365Alert("Policies365","We are not able fetch quotes for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok"))})):($rootScope.loading=!1,$rootScope.P365Alert("Policies365","We are not able fetch quotes for you right now, due to technical reasons. Please try after some time or contact our insurance expert.","Ok"))})}},2e3)}}));$scope.shareQuoteTemplateFunction=function(){$scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),localStorageService.set("websiteVisitedOnce",!0);var quoteUserInfoCookie=localStorageService.get("quoteUserInfo");if(null!=quoteUserInfoCookie&&(messageIDVar=void 0!=quoteUserInfoCookie.messageId||null!=quoteUserInfoCookie.messageId||""!=quoteUserInfoCookie.messageId?quoteUserInfoCookie.messageId:""),1==$scope.selectedBusinessLineId&&($rootScope.title=$scope.globalLabel.policies365Title.lifeResultQuote,localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("lifeQuoteInputParamaters",$scope.quote),localStorageService.set("lifePersonalDetails",$scope.personalDetails),localStorageService.set("selectedBusinessLineId",$scope.lifeResponse.businessLineId),$scope.updateAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.processResult=function(){$rootScope.progressBarStatus=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.lifeQuoteResult=$filter("orderBy")($rootScope.lifeQuoteResult,"dailyPremium");for(var minDailyPremiumValue=$rootScope.lifeQuoteResult[0].dailyPremium,dailyPremiumSliderArray=[],j=0;j<$rootScope.lifeQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.lifeQuoteResult[j].discountList;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i].discountAmount;calculatedDiscAmt+=$rootScope.lifeQuoteResult[j].dailyPremium,dailyPremiumSliderArray.push(calculatedDiscAmt)}else dailyPremiumSliderArray.push($rootScope.lifeQuoteResult[j].dailyPremium)}dailyPremiumSliderArray=$filter("orderBy")(dailyPremiumSliderArray),$scope.updateAnnualPremiumRange(minDailyPremiumValue,dailyPremiumSliderArray[dailyPremiumSliderArray.length-1])},getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.life,$scope.globalLabel.request.findAppConfig,function(addOnCoverForLife){localStorageService.set("addOnCoverForLife",addOnCoverForLife),getDocUsingId(RestAPI,$scope.globalLabel.applicationLabels.life.ridersDocInDB,function(carrierDetails){$rootScope.carrierDetails=carrierDetails;var carrierRiderList=angular.copy($rootScope.carrierDetails);$rootScope.lifeQuoteResult=[],$scope.lifeQuoteResponse=[],RestAPI.invoke($scope.globalLabel.getRequest.quoteLife,$scope.quote).then(function(callback){function getAllProductFeatures(selectedProduct,productFetchStatus){var variableReplaceArray=[],productFeatureJSON={};$rootScope.consolidatedBenefitsList=[],$rootScope.consolidatedSavingsList=[],$rootScope.consolidatedFlexibilityList=[],productFeatureJSON.documentType=$scope.globalLabel.documentType.lifeProduct,productFeatureJSON.carrierId=selectedProduct.carrierId,productFeatureJSON.productId=selectedProduct.productId,productFeatureJSON.businessLineId=1;for(var selectedCarrierId=selectedProduct.carrierId,selectedProductId=selectedProduct.productId,i=0;i<$rootScope.carrierDetails.brochureList.length;i++)selectedProduct.carrierId==$rootScope.carrierDetails.brochureList[i].carrierId&&($scope.brochureUrl=$rootScope.carrierDetails.brochureList[i].brochureUrl);variableReplaceArray.push({id:"{{sumInsured}}",value:Math.round(selectedProduct.sumInsured)}),variableReplaceArray.push({id:"{{monthlyPayout}}",value:selectedProduct.monthlyPayout}),variableReplaceArray.push({id:"{{policyTerm}}",value:selectedProduct.policyTerm}),productFetchStatus&&RestAPI.invoke($scope.globalLabel.transactionName.getProductFeatures,productFeatureJSON).then(function(callback){var scopeVariableName="productFeaturesList_"+selectedCarrierId+"_"+selectedProductId,productFeatureJSONName="productFeaturesJSON_"+selectedCarrierId+"_"+selectedProductId;$rootScope[productFeatureJSONName]={},$scope[scopeVariableName]=callback.data[0].Features;for(var i=0;i<variableReplaceArray.length;i++)p365Includes($scope[scopeVariableName][1].details,variableReplaceArray[i].id)&&($scope[scopeVariableName][1].details=$scope[scopeVariableName][1].details.replace(variableReplaceArray[i].id,variableReplaceArray[i].value));for(i=0;i<$scope[scopeVariableName].length;i++)$rootScope[productFeatureJSONName][callback.data[0].Features[i].titleForCompareView]=callback.data[0].Features[i].detailsForCompareView;selectedProduct.features=$rootScope[productFeatureJSONName];for(i=0;i<$scope[scopeVariableName].length;i++)"Benefits"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedBenefitsList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedBenefitsList.push($scope[scopeVariableName][i].titleForCompareView),"Savings"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedSavingsList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedSavingsList.push($scope[scopeVariableName][i].titleForCompareView),"Flexibility"==$scope[scopeVariableName][i].featureCategory&&"Y"==$scope[scopeVariableName][i].compareView&&-1===$rootScope.consolidatedFlexibilityList.indexOf($scope[scopeVariableName][i].titleForCompareView)&&$rootScope.consolidatedFlexibilityList.push($scope[scopeVariableName][i].titleForCompareView)}),setTimeout(function(){redirectURL=redirectURL.replace(urlPattern,"/lifeResult"),$window.location=redirectURL},500)}$rootScope.lifeQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.slickLoaded=!1,$scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("LIFE_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("LIFE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("LIFE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$rootScope.lifeQuoteRequest=callback.data,"undefined"!=String($rootScope.lifeQuoteResult)&&$rootScope.lifeQuoteResult.length>0&&($rootScope.lifeQuoteResult.length=0),angular.forEach($rootScope.lifeQuoteRequest,function(obj,i){var request={},header={};header.transactionName=$scope.globalLabel.transactionName.lifeQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var lifeQuoteResponse=JSON.parse(callback);if($scope.lifeQuoteResponse.push(callback),lifeQuoteResponse.QUOTE_ID==$scope.requestId&&$scope.responseCodeList.push(lifeQuoteResponse.responseCode),lifeQuoteResponse.responseCode==$scope.globalLabel.responseCode.success&&lifeQuoteResponse.QUOTE_ID==$scope.requestId){lifeQuoteResponse.data.quotes[0].dailyPremium=Math.round(lifeQuoteResponse.data.quotes[0].annualPremium/365),lifeQuoteResponse.data.quotes[0].insuranceCompany=JSON.parse(lifeQuoteResponse.data.quotes[0].insuranceCompany),$rootScope.carrierDetails=angular.copy(carrierRiderList);for(var j=0;j<$rootScope.carrierDetails.riderList.length;j++)$rootScope.carrierDetails.riderList[j].carrierId==lifeQuoteResponse.data.quotes[0].carrierId&&$rootScope.carrierDetails.riderList[j].productId==lifeQuoteResponse.data.quotes[0].productId&&(lifeQuoteResponse.data.quotes[0].riders=$rootScope.carrierDetails.riderList[j].riders);for(var k=0;k<lifeQuoteResponse.data.quotes[0].riderList.length;k++)for(var l=0;l<lifeQuoteResponse.data.quotes[0].riders.length;l++)if(lifeQuoteResponse.data.quotes[0].riderList[k].riderId==lifeQuoteResponse.data.quotes[0].riders[l].riderId){lifeQuoteResponse.data.quotes[0].riders[l]=lifeQuoteResponse.data.quotes[0].riderList[k];break}for(var m=0;m<lifeQuoteResponse.data.quotes[0].riders.length;m++)"At Additional Cost"==lifeQuoteResponse.data.quotes[0].riders[m].riderType?(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="additionalCost",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Additional Cost"):"Not Available"==lifeQuoteResponse.data.quotes[0].riders[m].riderType?(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="notAvailable",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Not Available"):"Included"==lifeQuoteResponse.data.quotes[0].riders[m].riderType&&(lifeQuoteResponse.data.quotes[0].riders[m].riderImgPath="included",lifeQuoteResponse.data.quotes[0].riders[m].riderTooltipName="Included");for(var i=0;i<$rootScope.lifeQuoteRequest.length;i++)$rootScope.lifeQuoteRequest[i].messageId==lifeQuoteResponse.messageId&&($rootScope.lifeQuoteResult.push(lifeQuoteResponse.data.quotes[0]),getAllProductFeatures(lifeQuoteResponse.data.quotes[0],!0),$rootScope.lifeQuoteRequest[i].status=1);$scope.processResult()}else for(i=0;i<$rootScope.lifeQuoteRequest.length;i++)$rootScope.lifeQuoteRequest[i].messageId==lifeQuoteResponse.messageId&&($rootScope.lifeQuoteRequest[i].status=2,$rootScope.lifeQuoteRequest[i].message=$scope.globalLabel.validationMessages.fetchQuoteError)}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$scope.lifeQuoteRequest.length){$rootScope.loading=!1;for(var i=0;i<$rootScope.lifeQuoteRequest.length;i++)0==$rootScope.lifeQuoteRequest[i].status&&($rootScope.lifeQuoteRequest[i].status=2,$rootScope.lifeQuoteRequest[i].message=$scope.globalLabel.validationMessages.fetchQuoteError);p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.errorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.errorMessage($scope.globalLabel.validationMessages.generalisedErrMsg))}},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.lifeQuoteResult)&&$rootScope.lifeQuoteResult.length>0&&($rootScope.lifeQuoteResult.length=0),$rootScope.lifeQuoteResult=[],$scope.errorMessage(callback.message))})})})),2==$scope.selectedBusinessLineId)$rootScope.title=$scope.globalLabel.policies365Title.bikeResultQuote,$scope.bikeInsuranceTypes=bikeInsuranceTypeGeneric,$scope.ncbList=ncbListGeneric,$scope.policyStatusList=policyStatusListGeneric,localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("ridersBikeStatus",!1),$scope.bikeInstantQuoteCalculation=function(addOnCoverList){addRidersToDefaultQuoteBike(addOnCoverList,localStorageService.get("selectedBusinessLineId"),function(defaultRiderList,defaultRiderArrayObject){$scope.vehicleDetails.riderArrayObject=defaultRiderArrayObject,localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),$scope.updateBikeAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.bikeErrorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!=String($rootScope.bikeQuoteResult)&&0!=$rootScope.bikeQuoteResult.length?$rootScope.bikeQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1):($scope.errorRespCounter=!1,$scope.updateBikeAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1)},$scope.bikeTooltipPrepare=function(bikeResult){var riderCount=0;$rootScope.riderOptionList="<ul style='text-align: left;' class='tickpoints'>";for(var i=0;i<defaultRiderArrayObject.length;i++)"Y"==defaultRiderArrayObject[i].isEnable&&(riderCount+=1,$rootScope.riderOptionList+="<li>"+defaultRiderArrayObject[i].riderName+"</li>");$rootScope.riderOptionList+="</ul>";var resultCarrierId=[],testCarrierId=[];for(i=0;i<bikeResult.length;i++)if(Number(bikeResult[i].netPremium)>0){var carrierInfo={};carrierInfo.id=bikeResult[i].carrierId,carrierInfo.name=bikeResult[i].insuranceCompany,carrierInfo.annualPremium=bikeResult[i].netPremium,carrierInfo.claimsRating=bikeResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.businessLineId="2",carrierInfo.insuredDeclareValue=bikeResult[i].insuredDeclareValue),0==p365Includes(testCarrierId,bikeResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(bikeResult[i].carrierId))}for($rootScope.resultCarrierId=resultCarrierId,i=0;i<resultCarrierId.length;i++)$rootScope.quoteResultInsurerList+="<li>"+resultCarrierId[i].name+"</li>";$rootScope.quoteResultInsurerList+="</ul>",$rootScope.calculatedQuotesLength=2==String(bikeResult.length).length?String(bikeResult.length):"0"+String(bikeResult.length),$rootScope.calculatedRidersLength=2==String(riderCount).length?String(riderCount):"0"+String(riderCount),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:4,mousedrag:!0})},2e3)},$scope.processBikeResult=function(){if($rootScope.bikeQuoteResult.length>0){$rootScope.enabledProgressLoader=!1,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.modalShown=!1,$scope.instantQuoteBikeForm=!1,$rootScope.disableBikeRegPopup=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.bikeQuoteResult=$filter("orderBy")($rootScope.bikeQuoteResult,"grossPremium");for(var minAnnualPremiumValue=$rootScope.bikeQuoteResult[0].grossPremium,annualPremiumSliderArray=[],j=0;j<$rootScope.bikeQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.bikeQuoteResult[j].bikeDiscountDetails;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i]["com.sutrr.quote.bikequotecalc.BikeDiscountDetails"].discountAmount;calculatedDiscAmt+=$rootScope.bikeQuoteResult[j].grossPremium,annualPremiumSliderArray.push(calculatedDiscAmt)}else annualPremiumSliderArray.push($rootScope.bikeQuoteResult[j].grossPremium)}annualPremiumSliderArray=$filter("orderBy")(annualPremiumSliderArray),$scope.updateBikeAnnualPremiumRange(minAnnualPremiumValue,annualPremiumSliderArray[annualPremiumSliderArray.length-1]),2==localStorageService.get("selectedBusinessLineId")&&$scope.bikeTooltipPrepare($rootScope.bikeQuoteResult)}},$scope.singleClickBikeQuote=function(){setTimeout(function(){if($scope.quote={},$rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.errorRespCounter=!0,$scope.instantQuoteBikeForm=!0,$rootScope.disableBikeRegPopup=!0,$rootScope.loading=!0,null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject))$scope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$rootScope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$scope.vehicleInfo.city=$rootScope.vehicleInfo.selectedRegistrationObject.city,$scope.vehicleInfo.RTOCode=$rootScope.vehicleInfo.selectedRegistrationObject.regisCode,$scope.vehicleInfo.state=$rootScope.vehicleInfo.selectedRegistrationObject.state;else for(var i=0;i<$scope.defaultMetroList.length;i++)if($scope.defaultMetroList[i].cityName==$scope.vehicleInfo.city)for(var j=0;j<$scope.defaultMetroList[i].RTODetails.length;j++){var selectedMetroDetails=$scope.defaultMetroList[i].RTODetails[j];if(selectedMetroDetails.display==$scope.vehicleInfo.registrationPlace){$scope.vehicleInfo.city=selectedMetroDetails.city,$scope.vehicleInfo.RTOCode=selectedMetroDetails.regisCode,$scope.vehicleInfo.state=selectedMetroDetails.state;break}}$scope.vehicleDetails.registrationNumber="undefined"!=String($rootScope.vehicleDetails.registrationNumber)?$rootScope.vehicleDetails.registrationNumber:$scope.vehicleDetails.registrationNumber,$scope.vehicleDetails.showBikeRegAreaStatus=$rootScope.showBikeRegAreaStatus;var todayDate=new Date;$scope.quoteParam.policyType==$scope.bikeInsuranceTypes[0].value?($scope.vehicleInfo.dateOfRegistration=("0"+todayDate.getDate().toString()).substr(-2)+"/"+("0"+(Number(todayDate.getMonth())+1).toString()).substr(-2)+"/"+$scope.vehicleInfo.regYear,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")):(todayDate.getFullYear()==$scope.vehicleInfo.regYear?$scope.vehicleInfo.dateOfRegistration="01/01/"+$scope.vehicleInfo.regYear:$scope.vehicleInfo.dateOfRegistration="01/07/"+$scope.vehicleInfo.regYear,convertStringFormatToDate($scope.vehicleInfo.PreviousPolicyExpiryDate,function(formattedPolicyExpiryDate){var tempPreviousPolicyExpiryDate=new Date(angular.copy(formattedPolicyExpiryDate)),tempCalcPrevPolStartDate=new Date(tempPreviousPolicyExpiryDate.setFullYear(new Date(tempPreviousPolicyExpiryDate).getFullYear()-1));(tempCalcPrevPolStartDate=new Date(new Date(String(tempCalcPrevPolStartDate)).setDate(new Date(String(tempCalcPrevPolStartDate)).getDate()+1))).setHours(0,0,0,0)<new Date($scope.vehicleInfo.dateOfRegistration).setHours(0,0,0,0)?$scope.vehicleInfo.PreviousPolicyStartDate=$scope.vehicleInfo.dateOfRegistration:convertDateFormatToString(tempCalcPrevPolStartDate,function(formattedPrevPolStartDate){$scope.vehicleInfo.PreviousPolicyStartDate=formattedPrevPolStartDate})}));if(localStorageService.set("selectedBusinessLineId",2),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),"renew"==$scope.quoteParam.policyType?"true"==$scope.vehicleInfo.previousClaim||$scope.vehicleDetails.policyStatus.key==$scope.policyStatusList[0].key||1==$scope.vehicleDetails.policyStatus.key?$scope.quoteParam.ncb=0:$scope.quoteParam.ncb=$scope.vehicleDetails.ncb.value:$scope.quoteParam.ncb=0,$scope.vehicleDetails.idvOption=1,$scope.vehicleInfo.IDV=0,$scope.quoteParam.userIdv=0,delete $scope.vehicleInfo.best_quote_id,"DefaultBikeQuote"==request.docId){var today=new Date,current_date=("0"+today.getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear(),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,$scope.vehicleInfo.PreviousPolicyStartDate=prev_date}$scope.vehicleInfo.idvOption=$scope.vehicleDetails.idvOption,$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.vehicleInfo=$scope.vehicleInfo,$scope.quote.requestType=$scope.globalLabel.request.bikeRequestType,localStorageService.set("bikeQuoteInputParamaters",$scope.quote),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),$rootScope.idvOptionCopy=angular.copy($scope.vehicleDetails.idvOption),$scope.requestId=null,$rootScope.bikeQuoteResult=[],$scope.bikeQuoteResponse=[],RestAPI.invoke($scope.globalLabel.getRequest.quoteBike,$scope.quote).then(function(callback){$rootScope.bikeQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,localStorageService.set("BIKE_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("BIKE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("BIKE_best_quote_id",$scope.requestId),$rootScope.bikeQuoteRequest=callback.data,"undefined"!=String($rootScope.bikeQuoteResult)&&$rootScope.bikeQuoteResult.length>0&&($rootScope.bikeQuoteResult.length=0),angular.forEach($rootScope.bikeQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=$scope.globalLabel.transactionName.bikeQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var bikeQuoteResponse=JSON.parse(callback);if($scope.bikeQuoteResponse.push(callback),bikeQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(bikeQuoteResponse.responseCode),bikeQuoteResponse.responseCode==$scope.globalLabel.responseCode.success){for(i=0;i<$rootScope.bikeQuoteRequest.length;i++)$rootScope.bikeQuoteRequest[i].messageId==bikeQuoteResponse.messageId&&($rootScope.bikeQuoteResult.push(bikeQuoteResponse.data.quotes[0]),$rootScope.bikeQuoteRequest[i].status=1);$scope.processBikeResult(),$scope.checkForRedirect()}else{for(i=0;i<$rootScope.bikeQuoteRequest.length;i++)$rootScope.bikeQuoteRequest[i].messageId==bikeQuoteResponse.messageId&&($rootScope.bikeQuoteRequest[i].status=2,$rootScope.bikeQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg));$scope.checkForRedirect()}}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&($rootScope.loading=!1),$scope.responseCodeList.length==$rootScope.bikeQuoteRequest.length&&($rootScope.loading=!1,p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.bikeErrorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.bikeErrorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg))))},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.bikeQuoteResult)&&$rootScope.bikeQuoteResult.length>0&&($rootScope.bikeQuoteResult.length=0),$rootScope.bikeQuoteResult=[],$scope.bikeErrorMessage(callback.message))})},100)},$scope.prepopulateBikeFields=function(){if($scope.quote.vehicleInfo=$scope.vehicleInfo,$scope.vehicleInfo.registrationNumber?($rootScope.showBikeRegAreaStatus=!1,$scope.vehicleDetails.registrationNumber=$scope.vehicleInfo.registrationNumber):$rootScope.showBikeRegAreaStatus=!0,$scope.vehicleDetails.policyType=$scope.quoteParam.policyType,console.log("$scope.vehicleInfo.previousPolicyExpired is in step 1 is:::: ",$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousPolicyExpired),"renew"==$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType)if("N"==$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousPolicyExpired)$scope.vehicleDetails.policyStatusKey=3;else if("Y"==$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousPolicyExpired){var today=new Date,priorDate=new Date(today.setDate((new Date).getDate()-90)),prevDate=priorDate.getDate()+"/"+(priorDate.getMonth()+1)+"/"+priorDate.getFullYear(),prevDate1=new Date(prevDate),prevDate2=new Date($scope.vehicleInfo.PreviousPolicyExpiryDate);$scope.vehicleDetails.policyStatusKey=prevDate1<prevDate2?2:1}$scope.vehicleDetails.expiry=20,$scope.vehicleDetails.maxVehicleAge=15,$scope.vehicleDetails.registrationNumber=$scope.vehicleInfo.registrationNumber,$scope.vehicleDetails.showBikeRegAreaStatus=$rootScope.showBikeRegAreaStatus,$scope.vehicleDetails.regYear=$scope.vehicleInfo.dateOfRegistration.split("/")[2],$scope.manufacturingYearList=listManufactureYear($scope.vehicleDetails.regYear,2),$scope.vehicleDetails.manufacturingYear=$scope.manufacturingYearList[0],$scope.vehicleDetails.policyType=$scope.bikeResponse.bikeQuoteRequest.quoteParam.policyType,$scope.vehicleDetails.idvOption=$scope.vehicleInfo.idvOption,$scope.vehicleDetails.previousPolicyExpired=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.previousPolicyExpired,$scope.vehicleInfo.make&&$scope.vehicleInfo.model&&$scope.vehicleInfo.variant?$scope.vehicleDetails.displayVehicle=$scope.vehicleInfo.make+" "+$scope.vehicleInfo.model+" "+$scope.vehicleInfo.variant:$scope.vehicleDetails.displayVehicle=$scope.bikeResponse.bikeQuoteRequest.vehicleInfo.displayVehicle,localStorageService.set("bike_best_quote_id",$scope.vehicleInfo.best_quote_id),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),localStorageService.set("BIKE_UNIQUE_QUOTE_ID",$scope.BIKE_UNIQUE_QUOTE_ID),localStorageService.set("BIKE_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("bikeQuoteInputParamaters",$scope.quote),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId);for(var i=0;i<$scope.policyStatusList.length;i++)if($scope.vehicleDetails.policyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}for(console.log("$scope.vehicleDetails.policyStatus is in step 2: ",$scope.vehicleDetails.policyStatus),i=0;i<$scope.bikeInsuranceTypes.length;i++)if($scope.quoteParam.policyType==$scope.bikeInsuranceTypes[i].value){$scope.vehicleDetails.insuranceType=$scope.bikeInsuranceTypes[i];break}for(i=0;i<$scope.ncbList.length;i++)if($scope.quoteParam.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.alterRenewal(),localStorageService.set("selectedBikeDetails",$scope.vehicleDetails),$rootScope.affilateUser?$scope.singleClickBikeQuote():$scope.view?$scope.view&&$scope.redirectResultScreen():$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():localStorageService.get("quoteUserInfo")?$scope.redirectResultScreen():$scope.leadCreationUserInfo()},$scope.prepopulateBikeFields()})},localStorageService.get("ridersBikeStatus")?$scope.bikeInstantQuoteCalculation(localStorageService.get("addOnCoverListForBike")):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.bike,$scope.globalLabel.request.findAppConfig,function(addOnCoverList){localStorageService.set("addOnCoverListForBike",addOnCoverList),localStorageService.set("ridersBikeStatus",!0),getListFromDB(RestAPI,"","BikeVariants",$scope.globalLabel.request.findAppConfig,function(callbackCar5){callbackCar5.responseCode==$scope.globalLabel.responseCode.success&&(localStorageService.set("bikeMakeListDisplay",callbackCar5.data),$scope.bikeInstantQuoteCalculation(addOnCoverList))})});else if(3==$scope.selectedBusinessLineId)$rootScope.title=$scope.globalLabel.policies365Title.carResultQuote,$scope.carInsuranceTypes=carInsuranceTypeGeneric,$scope.ncbList=ncbListGeneric,localStorageService.set("selectedBusinessLineId",3),localStorageService.set("ridersCarStatus",!1),$scope.updateCarAnnualPremiumRange=function(minPremiumValue,maxPremiumValue){minPremiumValue>maxPremiumValue?($rootScope.minAnnualPremium=maxPremiumValue,$rootScope.maxAnnualPremium=minPremiumValue):($rootScope.minAnnualPremium=minPremiumValue,$rootScope.maxAnnualPremium=maxPremiumValue)},$scope.carErrorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!=String($rootScope.carQuoteResult)&&0!=$rootScope.carQuoteResult.length?$rootScope.carQuoteResult.length>0&&($rootScope.instantQuoteSummaryStatus=!0,$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1):($scope.errorRespCounter=!1,$scope.updateCarAnnualPremiumRange(1e3,5e3),$rootScope.instantQuoteSummaryStatus=!1,$rootScope.instantQuoteSummaryError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1),$rootScope.loading=!1},$scope.carTooltipPrepare=function(carResult){var i,resultCarrierId=[],testCarrierId=[];for(i=0;i<carResult.length;i++)if(Number(carResult[i].netPremium)>0){var carrierInfo={};carrierInfo.id=carResult[i].carrierId,carrierInfo.name=carResult[i].insuranceCompany,carrierInfo.annualPremium=carResult[i].netPremium,carrierInfo.claimsRating=carResult[i].insurerIndex,$rootScope.wordPressEnabled&&(carrierInfo.insuredDeclareValue=carResult[i].insuredDeclareValue,carrierInfo.businessLineId="2"),0==p365Includes(testCarrierId,carResult[i].carrierId)&&(resultCarrierId.push(carrierInfo),testCarrierId.push(carResult[i].carrierId))}$rootScope.resultedCarriers=resultCarrierId,$rootScope.resultCarrierId=resultCarrierId,$rootScope.calculatedQuotesLength=2==String(carResult.length).length?String(carResult.length):"0"+String(carResult.length),$rootScope.calculatedRidersLength=2==String(0).length?String(0):"0"+String(0),setTimeout(function(){scrollv=new scrollable({wrapperid:"scrollable-v",moveby:4,mousedrag:!0})},2e3)},$scope.processCarResult=function(){if($rootScope.carQuoteResult.length>0){$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.modalShown=!1,$scope.instantQuoteCarForm=!1,$rootScope.disableCarRegPopup=!1,$rootScope.loading=!1,$rootScope.campaignFlag=!0,$rootScope.enabledProgressLoader=!1,$rootScope.carQuoteResult=$filter("orderBy")($rootScope.carQuoteResult,"grossPremium");for(var minAnnualPremiumValue=$rootScope.carQuoteResult[0].grossPremium,annualPremiumSliderArray=[],j=0;j<$rootScope.carQuoteResult.length;j++){var calculatedDiscAmt=0,discountAmtList=$rootScope.carQuoteResult[j].discountDetails;if("undefined"!=String(discountAmtList)){for(var i=0;i<discountAmtList.length;i++)calculatedDiscAmt+=discountAmtList[i]["com.sutrr.quote.carquotecalc.DiscountDetails"].discountAmount;calculatedDiscAmt+=$rootScope.carQuoteResult[j].grossPremium,annualPremiumSliderArray.push(calculatedDiscAmt)}else annualPremiumSliderArray.push($rootScope.carQuoteResult[j].grossPremium)}annualPremiumSliderArray=$filter("orderBy")(annualPremiumSliderArray),$scope.updateCarAnnualPremiumRange(minAnnualPremiumValue,annualPremiumSliderArray[annualPremiumSliderArray.length-1]),3==localStorageService.get("selectedBusinessLineId")&&$scope.carTooltipPrepare($rootScope.carQuoteResult)}},$scope.singleClickCarQuote=function(){setTimeout(function(){$scope.quote={},$rootScope.instantQuoteSummaryStatus=!0,$rootScope.instantQuoteInvalidSummaryStatus=!0,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!1,$scope.errorRespCounter=!0,$scope.instantQuoteCarForm=!0,$rootScope.disableCarRegPopup=!0,$rootScope.loading=!0;var todayDate=new Date;$scope.quoteParam.policyType==$scope.carInsuranceTypes[0].value?($scope.vehicleInfo.dateOfRegistration=("0"+todayDate.getDate().toString()).substr(-2)+"/"+("0"+(Number(todayDate.getMonth())+1).toString()).substr(-2)+"/"+$scope.vehicleInfo.regYear,$scope.vehicleInfo.PreviousPolicyExpiryDate=makeObjectEmpty($scope.vehicleInfo.PreviousPolicyExpiryDate,"text")):(todayDate.getFullYear()==$scope.vehicleInfo.regYear?$scope.vehicleInfo.dateOfRegistration="01/01/"+$scope.vehicleInfo.regYear:$scope.vehicleInfo.dateOfRegistration="01/07/"+$scope.vehicleInfo.regYear,convertStringFormatToDate($scope.vehicleInfo.PreviousPolicyExpiryDate,function(formattedPolicyExpiryDate){var tempPreviousPolicyExpiryDate=new Date(angular.copy(formattedPolicyExpiryDate)),tempCalcPrevPolStartDate=new Date(tempPreviousPolicyExpiryDate.setFullYear(new Date(tempPreviousPolicyExpiryDate).getFullYear()-1));(tempCalcPrevPolStartDate=new Date(new Date(String(tempCalcPrevPolStartDate)).setDate(new Date(String(tempCalcPrevPolStartDate)).getDate()+1))).setHours(0,0,0,0)<new Date($scope.vehicleInfo.dateOfRegistration).setHours(0,0,0,0)?$scope.vehicleInfo.PreviousPolicyStartDate=$scope.vehicleInfo.dateOfRegistration:convertDateFormatToString(tempCalcPrevPolStartDate,function(formattedPrevPolStartDate){$scope.vehicleInfo.PreviousPolicyStartDate=formattedPrevPolStartDate})}));if(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject))$scope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$rootScope.vehicleInfo.registrationPlace=$rootScope.vehicleInfo.selectedRegistrationObject.display,$scope.quoteParam.zone=$rootScope.vehicleInfo.selectedRegistrationObject.zone,$scope.vehicleInfo.city=$rootScope.vehicleInfo.selectedRegistrationObject.city,$scope.vehicleInfo.isCostal=$rootScope.vehicleInfo.selectedRegistrationObject.isCostal,$scope.vehicleInfo.isAutoAssociation=$rootScope.vehicleInfo.selectedRegistrationObject.isAutoAssociation,$scope.vehicleInfo.isEarthQuakeArea=$rootScope.vehicleInfo.selectedRegistrationObject.isEarthQuakeArea,$scope.vehicleInfo.RTOCode=$rootScope.vehicleInfo.selectedRegistrationObject.regisCode,$scope.vehicleInfo.state=$rootScope.vehicleInfo.selectedRegistrationObject.state,$scope.quoteParam.customerpinCode="",$scope.quoteParam.customerCity="",$scope.quoteParam.customerState="";else for(var selectedMetroDetails,cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai",i=0;i<$scope.defaultMetroList.length;i++)if($scope.defaultMetroList[i].cityName==cityName)for(var j=0;j<$scope.defaultMetroList[i].RTODetails.length;j++)if((selectedMetroDetails=$scope.defaultMetroList[i].RTODetails[j]).display==$scope.vehicleInfo.registrationPlace){$scope.quoteParam.zone=selectedMetroDetails.zone,$scope.vehicleInfo.city=selectedMetroDetails.city,$scope.vehicleInfo.isCostal=selectedMetroDetails.isCostal,$scope.vehicleInfo.isAutoAssociation=selectedMetroDetails.isAutoAssociation,$scope.vehicleInfo.isEarthQuakeArea=selectedMetroDetails.earthQuakeArea,$scope.vehicleInfo.RTOCode=selectedMetroDetails.regisCode,$scope.vehicleInfo.state=selectedMetroDetails.state,$scope.quoteParam.customerpinCode="",$scope.quoteParam.customerCity="",$scope.quoteParam.customerState="";break}$scope.vehicleDetails.registrationNumber="undefined"!=String($rootScope.vehicleDetails.registrationNumber)?$rootScope.vehicleDetails.registrationNumber:$scope.vehicleDetails.registrationNumber,$scope.vehicleDetails.showCarRegAreaStatus=$rootScope.showCarRegAreaStatus,localStorageService.set("selectedBusinessLineId",3);var personDob=new Date((new Date).getFullYear()-46);if(convertDateFormatToString(personDob,function(formattedDateOfBirth){$scope.vehicleDetails.dateOfBirth=personDob,$scope.vehicleDetails.formattedDateOfBirth=formattedDateOfBirth}),"true"==$scope.vehicleInfo.previousClaim||$scope.vehicleDetails.policyStatus.key==$scope.policyStatusList[0].key||"new"==$scope.quoteParam.policyType?$scope.quoteParam.ncb=0:$scope.quoteParam.ncb=$scope.vehicleDetails.ncb.value,$scope.vehicleDetails.idvOption=1,$scope.vehicleDetails.manufacturingYear=$scope.vehicleInfo.regYear,$scope.vehicleInfo.IDV=0,delete $scope.vehicleInfo.best_quote_id,"DefaultCarQuote"==request.docId){var today=new Date,current_date=("0"+today.getDate().toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+today.getFullYear(),prev_date=("0"+(Number(today.getDate())+1).toString()).substr(-2)+"/"+("0"+(Number(today.getMonth())+1).toString()).substr(-2)+"/"+(Number(today.getFullYear())-1).toString();$scope.vehicleInfo.PreviousPolicyExpiryDate=current_date,console.log("$scope.vehicleInfo.PreviousPolicyExpiryDate in default doc step 2 is",$scope.vehicleInfo.PreviousPolicyExpiryDate),$scope.vehicleDetails.PreviousPolicyStartDate=prev_date}$scope.vehicleInfo.idvOption=$scope.vehicleDetails.idvOption,$scope.quote.quoteParam=$scope.quoteParam,$scope.quote.vehicleInfo=$scope.vehicleInfo,localStorageService.set("carQuoteInputParamaters",$scope.quote),localStorageService.set("selectedCarDetails",$scope.vehicleDetails),$rootScope.idvOptionCopy=angular.copy($scope.vehicleDetails.idvOption),$scope.requestId=null;localStorageService.get("quoteUserInfo");RestAPI.invoke(getCarQuote,$scope.quote).then(function(callback){$rootScope.carQuoteRequest=[],callback.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.requestId=callback.QUOTE_ID,"DefaultCarQuote"!=localStorageService.get("CAR_UNIQUE_QUOTE_ID")&&localStorageService.set("CAR_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=callback.encryptedQuoteId,localStorageService.set("CAR_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("CAR_best_quote_id",$scope.requestId),$rootScope.carQuoteRequest=callback.data,"undefined"!=String($rootScope.carQuoteResult)&&$rootScope.carQuoteResult.length>0&&($rootScope.carQuoteResult.length=0),$rootScope.carQuoteResult=[],$scope.carQuoteResponse=[],angular.forEach($rootScope.carQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.transactionName=getCarQuoteResult,header.deviceId=deviceIdOrigin,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var carQuoteResponse=JSON.parse(callback);if($scope.carQuoteResponse.push(callback),carQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(carQuoteResponse.responseCode),carQuoteResponse.responseCode==$scope.globalLabel.responseCode.success){for(var i=0;i<$rootScope.carQuoteRequest.length;i++)$rootScope.carQuoteRequest[i].messageId==carQuoteResponse.messageId&&($rootScope.carQuoteResult.push(carQuoteResponse.data.quotes[0]),$rootScope.carQuoteRequest[i].status=1);$scope.processCarResult(),$scope.checkForRedirect()}else for(i=0;i<$rootScope.carQuoteRequest.length;i++)$rootScope.carQuoteRequest[i].messageId==carQuoteResponse.messageId&&($rootScope.carQuoteRequest[i].status=2,$rootScope.carQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&($rootScope.loading=!1),$scope.responseCodeList.length==$rootScope.carQuoteRequest.length){$rootScope.loading=!1,$rootScope.setTooltip=!1;for(var i=0;i<$rootScope.carQuoteRequest.length;i++)0==$rootScope.carQuoteRequest[i].status&&($rootScope.carQuoteRequest[i].status=2,$rootScope.carQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg));p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.carErrorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.carErrorMessage($sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMotorErrMsg)))}},!0)):($scope.responseCodeList=[],"undefined"!=String($rootScope.carQuoteResult)&&$rootScope.carQuoteResult.length>0&&($rootScope.carQuoteResult.length=0),$rootScope.carQuoteResult=[],$scope.carErrorMessage(callback.message))})},100)},$scope.prepopulateCarFields=function(){if($scope.quote.vehicleInfo=$scope.vehicleInfo,$scope.vehicleInfo.registrationNumber?($rootScope.showCarRegAreaStatus=!1,$scope.vehicleDetails.registrationNumber=$scope.vehicleInfo.registrationNumber):$rootScope.showCarRegAreaStatus=!0,$scope.vehicleDetails.policyType=$scope.quoteParam.policyType,$rootScope.affilateUser);else{if("renew"==$scope.carResponse.carQuoteRequest.quoteParam.policyType)if("N"==$scope.carResponse.carQuoteRequest.vehicleInfo.previousPolicyExpired)$scope.vehicleDetails.policyStatusKey=3;else if("Y"==$scope.carResponse.carQuoteRequest.vehicleInfo.previousPolicyExpired){var today=new Date,priorDate=new Date(today.setDate((new Date).getDate()-90)),prevDate=priorDate.getDate()+"/"+(priorDate.getMonth()+1)+"/"+priorDate.getFullYear(),prevDate1=new Date(prevDate),prevDate2=new Date($scope.vehicleInfo.PreviousPolicyExpiryDate);$scope.vehicleDetails.policyStatusKey=prevDate1<prevDate2?2:1}$scope.vehicleDetails.addOnCoverCustomAmount={},$rootScope.selectedAddOnCovers=[],$scope.vehicleDetails.maxVehicleAge=15,$scope.vehicleDetails.regYear=$scope.vehicleInfo.dateOfRegistration.split("/")[2],$scope.manufacturingYearList=listManufactureYear($scope.vehicleDetails.regYear,2),$scope.vehicleDetails.manufacturingYear=$scope.manufacturingYearList[0],$scope.vehicleDetails.showCarRegAreaStatus=$rootScope.showCarRegAreaStatus,$scope.vehicleDetails.idvOption=$scope.vehicleInfo.idvOption,$scope.vehicleInfo.displayVehicle?$scope.vehicleDetails.displayVehicle=$scope.vehicleInfo.displayVehicle:$scope.vehicleInfo.make&&$scope.vehicleInfo.model&&$scope.vehicleInfo.variant&&$scope.vehicleInfo.fuel&&$scope.vehicleInfo.cubicCapacity?$scope.vehicleDetails.displayVehicle=$scope.vehicleInfo.make+"  "+$scope.vehicleInfo.model+"  "+$scope.vehicleInfo.variant+"  "+$scope.vehicleInfo.fuel+"  "+$scope.vehicleInfo.cubicCapacity:$scope.vehicleInfo.make&&$scope.vehicleInfo.model&&$scope.vehicleInfo.variant&&$scope.vehicleInfo.fuel?$scope.vehicleDetails.displayVehicle=$scope.vehicleInfo.make+"  "+$scope.vehicleInfo.model+"  "+$scope.vehicleInfo.variant+"  "+$scope.vehicleInfo.fuel:$scope.vehicleInfo.make&&$scope.vehicleInfo.model&&$scope.vehicleInfo.variant&&($scope.vehicleDetails.displayVehicle=$scope.vehicleInfo.make+"  "+$scope.vehicleInfo.model+"  "+$scope.vehicleInfo.variant),"DefaultCarQuote"!=localStorageService.get("CAR_UNIQUE_QUOTE_ID")&&localStorageService.set("CAR_UNIQUE_QUOTE_ID",$scope.CAR_UNIQUE_QUOTE_ID),localStorageService.set("car_best_quote_id",$scope.CAR_UNIQUE_QUOTE_ID),localStorageService.set("CAR_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),localStorageService.set("carQuoteInputParamaters",$scope.quote),localStorageService.set("selectedCarDetails",$scope.vehicleDetails),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId)}var i;if("renew"==$scope.quoteParam.policyType)for(i=0;i<$scope.policyStatusList.length;i++)if($scope.vehicleDetails.policyStatusKey==$scope.policyStatusList[i].key){$scope.vehicleDetails.policyStatus=$scope.policyStatusList[i];break}for(i=0;i<$scope.carInsuranceTypes.length;i++)if($scope.quoteParam.policyType==$scope.carInsuranceTypes[i].value){$scope.vehicleDetails.insuranceType=$scope.carInsuranceTypes[i];break}for(i=0;i<$scope.ncbList.length;i++)if($scope.quoteParam.ncb==$scope.ncbList[i].value){$scope.vehicleDetails.ncb=$scope.ncbList[i];break}$scope.yearList=listRegistrationYear($scope.vehicleDetails.insuranceType.value,$scope.vehicleDetails.maxVehicleAge),$scope.alterRenewal(),localStorageService.set("selectedCarDetails",$scope.vehicleDetails),$rootScope.affilateUser?$scope.singleClickCarQuote():$scope.view?$scope.view&&$scope.redirectResultScreen():$rootScope.agencyPortalEnabled?$scope.redirectResultScreen():localStorageService.get("quoteUserInfo")?$scope.redirectResultScreen():$scope.leadCreationUserInfo()},$scope.policyStatusList=policyStatusListGeneric,localStorageService.get("ridersCarStatus")?$scope.prepopulateCarFields():getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.car,$scope.globalLabel.request.findAppConfig,function(addOnCoverForCar){localStorageService.set("addOnCoverListForCar",addOnCoverForCar),localStorageService.set("ridersCarStatus",!0),getListFromDB(RestAPI,"","CarDataList",$scope.globalLabel.request.findAppConfig,function(callbackCar5){callbackCar5.responseCode==$scope.globalLabel.responseCode.success&&localStorageService.set("carMakeListDisplay",callbackCar5.data),$scope.garageList={},$scope.garageList.make=$scope.vehicleInfo.make,$scope.garageList.city=$scope.vehicleInfo.city,$scope.garageList.regisCode=$scope.vehicleInfo.RTOCode,RestAPI.invoke($scope.globalLabel.transactionName.getGarageDetails,$scope.garageList).then(function(callbackGarage){if(callbackGarage.responseCode==$scope.globalLabel.responseCode.success){var garageResponse=callbackGarage;null!=garageResponse&&"undefined"!=String(garageResponse)?($scope.garageDetails=garageResponse.data,localStorageService.set("garageDetails",garageResponse.data)):(localStorageService.set("garageDetails",void 0),$scope.garageDetails="")}else localStorageService.set("garageDetails",void 0),$scope.garageDetails="";$scope.prepopulateCarFields()})})});else if(4==$scope.selectedBusinessLineId){localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId);for(var j=0;j<$scope.familyList.length;j++)$scope.familyList[j].val=!1;for(i=0;i<$scope.selectedFamilyArray.length;i++)for(j=0;j<$scope.familyList.length;j++)if($scope.selectedFamilyArray[i].relation==$scope.familyList[j].member){$scope.familyList[j].val=!0,$scope.familyList[j].age=$scope.selectedFamilyArray[i].age,$scope.familyList[j].dob=$scope.selectedFamilyArray[i].dob,"Son"==$scope.selectedFamilyArray[i].relation?$scope.familyList[j].iconFlag=!0:"Daughter"==$scope.selectedFamilyArray[i].relation&&($scope.familyList[j].iconFlag=!0);break}localStorageService.set("healthQuoteInputParamaters",$scope.quote),localStorageService.set("selectedArea",$scope.selectedArea),localStorageService.set("selectedFamilyForHealth",$scope.familyList),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),localStorageService.set("selectedFamilyArray",$scope.selectedFamilyArray);for(var i=0;i<$scope.selectedFamilyArray.length;i++)for(j=0;j<$scope.selectedFamilyArray[i].dieaseDetails.length;j++)if($scope.selectedFamilyArray[i].dieaseDetails.length>0&&void 0!=$scope.selectedFamilyArray[i].dieaseDetails[j].dieaseCode){if(p365Includes($scope.selectedDisease.diseaseList,$scope.selectedFamilyArray[i].dieaseDetails[j].dieaseCode))continue;$scope.selectedDisease.diseaseList.push($scope.selectedFamilyArray[i].dieaseDetails[j].dieaseCode),$scope.isDiseased=!0}localStorageService.set("selectedDisease",$scope.selectedDisease),localStorageService.set("isDiseasedForHealth",$scope.isDiseased);var areaCode=$scope.quote.personalInfo.pincode;if($http.get(getServiceLink+"Pincode&q="+areaCode).then(function(response){var areaDetails=JSON.parse(response.data);areaDetails.responseCode==$scope.globalLabel.responseCode.success&&($scope.onSelectPinOrArea(areaDetails.data[0]),item=areaDetails.data[0])}),$scope.onSelectPinOrArea=function(item){localStorageService.set("userGeoDetails",item),localStorageService.set("commAddressDetails",item)},null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){var userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}$scope.healthInstantQuoteCalculation=function(addOnCoverForHealth){addRidersToDefaultQuote(addOnCoverForHealth,localStorageService.get("selectedBusinessLineId"),function(defaultRiderList,defaultRiderArrayObject){$scope.errorRespCounter=!0,$scope.healthErrorMessage=function(errorMsg){!$scope.errorRespCounter||"undefined"!=String($rootScope.healthQuoteResult)&&0!=$rootScope.healthQuoteResult.length?$rootScope.healthQuoteResult.length>0&&($scope.errorSectionButtonStatus=!0,$scope.quoteCalculationError="",$rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.loading=!1):($scope.errorRespCounter=!1,$scope.errorSectionButtonStatus=!0,$scope.quoteCalculationError=errorMsg,$rootScope.viewOptionDisabled=!0,$rootScope.tabSelectionStatus=!0,$rootScope.loading=!1)},$scope.processHealthResult=function(){$rootScope.healthQuoteResult.length>0&&($rootScope.viewOptionDisabled=!1,$rootScope.tabSelectionStatus=!0,$rootScope.modalShown=!1,$rootScope.healthQuoteResult=$filter("orderBy")($rootScope.healthQuoteResult,"annualPremium"),$scope.quotesToShow=$rootScope.healthQuoteResult,$scope.view?$scope.redirectResultScreen():$scope.checkForRedirect())},$scope.singleClickHealthQuote=function(){RestAPI.invoke($scope.globalLabel.getRequest.quoteHealth,$scope.quote).then(function(healthQuoteResult){$rootScope.healthQuoteRequest=[],$scope.healthQuoteResponse=[],healthQuoteResult.responseCode==$scope.globalLabel.responseCode.success?($scope.responseCodeList=[],$scope.dataLoaded=!0,$scope.requestId=healthQuoteResult.QUOTE_ID,localStorageService.set("HEALTH_UNIQUE_QUOTE_ID",$scope.requestId),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=healthQuoteResult.encryptedQuoteId,localStorageService.set("HEALTH_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$rootScope.healthQuoteRequest=healthQuoteResult.data,"undefined"!=String($rootScope.healthQuoteResult)&&$rootScope.healthQuoteResult.length>0&&($rootScope.healthQuoteResult.length=0),angular.forEach($rootScope.healthQuoteRequest,function(obj,i){var request={},header={};header.messageId=messageIDVar,header.campaignID=campaignIDVar,header.source=sourceOrigin,header.deviceId=deviceIdOrigin,header.transactionName=$scope.globalLabel.transactionName.healthQuoteResult,request.header=header,request.body=obj,$http({method:"POST",url:getQuoteCalcLink,data:request}).success(function(callback,status){var healthQuoteResponse=JSON.parse(callback);if($scope.healthQuoteResponse.push(callback),healthQuoteResponse.QUOTE_ID==$scope.requestId)if($scope.responseCodeList.push(healthQuoteResponse.responseCode),healthQuoteResponse.responseCode==$scope.globalLabel.responseCode.success){for(var i=0;i<$rootScope.healthQuoteRequest.length;i++)$rootScope.healthQuoteRequest[i].messageId==healthQuoteResponse.messageId&&($rootScope.healthQuoteResult.push(healthQuoteResponse.data.quotes[0]),$rootScope.healthQuoteRequest[i].status=1);$scope.processHealthResult()}else for(i=0;i<$rootScope.healthQuoteRequest.length;i++)$rootScope.healthQuoteRequest[i].messageId==healthQuoteResponse.messageId&&($rootScope.healthQuoteRequest[i].status=2,$rootScope.healthQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMedicalErrMsg))}).error(function(data,status){$scope.responseCodeList.push($scope.globalLabel.responseCode.systemError)})}),$scope.$watch("responseCodeList",function(newValue,oldValue,scope){if(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)&&$scope.responseCodeList.length==$rootScope.healthQuoteRequest.length){for(var i=0;i<$rootScope.healthQuoteRequest.length;i++)0==$rootScope.healthQuoteRequest[i].status&&($rootScope.healthQuoteRequest[i].status=2,$rootScope.healthQuoteRequest[i].message=$sce.trustAsHtml($scope.globalLabel.validationMessages.generalisedMedicalErrMsg));p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.success)||(p365Includes($scope.responseCodeList,$scope.globalLabel.responseCode.quoteNotAvailable)?$scope.healthErrorMessage($scope.globalLabel.validationMessages.productNotFoundMsg):$scope.healthErrorMessage($scope.globalLabel.validationMessages.generalisedErrMsg))}},!0)):(localStorageService.remove("healthQuoteInputParamaters"),localStorageService.remove("selectedFamilyForHealth"),localStorageService.remove("isDiseasedForHealth"),localStorageService.remove("diseaseForHealth"),localStorageService.remove("selectedArea"),localStorageService.remove("addOnCoverForHealth"),localStorageService.remove("selectedFamilyArray"),localStorageService.remove("diseaseList"),localStorageService.set("ridersHealthStatus",!1),$scope.responseCodeList=[],"undefined"!=String($rootScope.healthQuoteResult)&&$rootScope.healthQuoteResult.length>0&&($rootScope.healthQuoteResult.length=0),$rootScope.healthQuoteResult=[],$scope.healthErrorMessage(callback.message))})},$scope.prepopulateHealthFields=function(){for(var i=0;i<$scope.diseaseList.length;i++)$scope.diseaseList[i].familyList=[];for(i=0;i<$scope.selectedFamilyArray.length;i++){$scope.dieaseDetails=[];for(var j=0;j<$scope.selectedFamilyArray[i].dieaseDetails.length;j++)for(var k=0;k<$scope.diseaseList.length;k++)$scope.selectedFamilyArray[i].dieaseDetails[j].dieaseCode==$scope.diseaseList[k].diseaseId&&($scope.selectedFamilyArray[i].label=$scope.selectedFamilyArray[i].relation,$scope.selectedFamilyArray[i].display=$scope.selectedFamilyArray[i].relation,$scope.diseaseList[k].familyList.push($scope.selectedFamilyArray[i]))}if($rootScope.selectedFeatures=[],$rootScope.selected={},$scope.quote.quoteParam.riders){for($scope.planBenefits=planBenefitsGeneric,i=0;i<$scope.planBenefits.length;i++)for(j=0;j<$scope.quote.quoteParam.riders.length;j++)if($scope.planBenefits[i].riders.riderId==$scope.quote.quoteParam.riders[j].riderId){$rootScope.selected=$scope.planBenefits[i],$rootScope.selectedFeatures.push($scope.planBenefits[i]);break}for($scope.roomTypesArray=roomRentBenefitList,i=0;i<$scope.roomTypesArray.length;i++)for(j=0;j<$scope.quote.quoteParam.riders.length;j++)if($scope.quote.quoteParam.riders[j].value&&$scope.roomTypesArray[i].riders.riderId==$scope.quote.quoteParam.riders[j].riderId&&$scope.roomTypesArray[i].name==$scope.quote.quoteParam.riders[j].value){$rootScope.roomRentFeature=!0,$rootScope.selected=$scope.roomTypesArray[i],$rootScope.selectedFeatures.push($scope.roomTypesArray[i]);break}}$scope.hospitalizationLimitArray=localStorageService.get("hospitalizationLimitList");for(i=0;i<$scope.hospitalizationLimitArray.length;i++)if($scope.hospitalizationLimitArray[i].minHosLimit==$scope.quote.personalInfo.minHospitalisationLimit&&$scope.hospitalizationLimitArray[i].maxHosLimit==$scope.quote.personalInfo.maxHospitalisationLimit){$scope.hospitalisationLimit=$scope.hospitalizationLimitArray[i];break}$rootScope.hospitalisationLimit=$scope.hospitalisationLimit,localStorageService.set("hospitalisationLimitVal",$scope.hospitalisationLimit),localStorageService.set("diseaseList",$scope.diseaseList),localStorageService.set("healthQuoteInputParamatersReset",$scope.quote),localStorageService.set("selectedAreaReset",$scope.selectedArea),localStorageService.set("isDiseasedForHealthReset",$scope.isDiseased),localStorageService.set("selectedFamilyForHealthReset",$scope.familyList),localStorageService.set("selectedDiseaseReset",$scope.selectedDisease),localStorageService.set("selectedFamilyArrayReset",$scope.selectedFamilyArray),localStorageService.set("diseaseListReset",$scope.diseaseList),localStorageService.set("hospitalisationLimitValReset",$scope.hospitalisationLimit),localStorageService.set("HEALTH_UNIQUE_QUOTE_ID",$scope.healthResponse.QUOTE_ID),$scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.healthResponse.encryptedQuoteId,localStorageService.set("HEALTH_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),$scope.view,$scope.singleClickHealthQuote()},$scope.prepopulateHealthFields()})},localStorageService.get("ridersHealthStatus")?($scope.diseaseList=localStorageService.get("diseaseList"),$scope.healthInstantQuoteCalculation(localStorageService.get("addOnCoverForHealth"))):getRiderList(RestAPI,$scope.globalLabel.documentType.riderList,$scope.globalLabel.documentType.health,$scope.globalLabel.request.findAppConfig,function(addOnCoverForHealth){localStorageService.set("addOnCoverForHealth",addOnCoverForHealth),localStorageService.set("ridersHealthStatus",!0),getListFromDB(RestAPI,"","Disease",$scope.globalLabel.request.findAppConfig,function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){for(var diseaseData=callback.data,i=0;i<diseaseData.length;i++)diseaseData[i].familyList=[];$scope.diseaseList=diseaseData,localStorageService.set("diseaseList",diseaseData),getListFromDB(RestAPI,"",$scope.globalLabel.documentType.hospitalizationLimit,$scope.globalLabel.request.findAppConfig,function(hospitalizationLimitList){hospitalizationLimitList.responseCode==$scope.globalLabel.responseCode.success&&(localStorageService.set("hospitalizationLimitList",hospitalizationLimitList.data),localStorageService.set("hospitalizationLimitListReset",hospitalizationLimitList.data),$scope.healthInstantQuoteCalculation(addOnCoverForHealth))})}else $rootScope.P365Alert("Policies365",$scope.globalLabel.validationMessages.generalisedErrMsg,"Ok")})})}else if(5==$scope.selectedBusinessLineId){$rootScope.loaderContent={businessLine:"5",header:"Travel Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.travel.proverbResult)},$rootScope.title=$scope.globalLabel.policies365Title.travelResultQuote,localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId);var diseaseList=[];for(i=0;i<$scope.travellersList.length;i++){var tempdiseaseList=[],traveller=$scope.travellersList[i];if(traveller.diseaseDetails)for(j=0;j<traveller.diseaseDetails.length;j++)tempdiseaseList[j]=traveller.diseaseDetails[j].diseaseCode;angular.extend(diseaseList,tempdiseaseList)}$scope.selectedDisease.diseaseList=diseaseList,$scope.isDiseased="Y"==$scope.quote.quoteParam.pedStatus,localStorageService.set("quote",$scope.quote),localStorageService.set("travelQuoteInputParamaters",$scope.quote),localStorageService.set("travelDetails",$scope.quote.travelDetails),localStorageService.set("isDiseasedForTravel",$scope.isDiseased),localStorageService.set("selectedDisease",$scope.selectedDisease),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),getListFromDB(RestAPI,"","Disease",$scope.globalLabel.request.findAppConfig,function(callback){if(callback.responseCode==$scope.globalLabel.responseCode.success){$scope.diseaseList=callback.data;for(var i=0;i<$scope.diseaseList.length;i++)$scope.diseaseList[i].travellersList=[];for(i=0;i<$scope.travellersList.length;i++)if($scope.travellersList[i].diseaseDetails)for(var j=0;j<$scope.travellersList[i].diseaseDetails.length;j++)for(var k=0;k<$scope.diseaseList.length;k++)$scope.travellersList[i].diseaseDetails[j].diseaseCode==$scope.diseaseList[k].diseaseId&&$scope.diseaseList[k].travellersList.push($scope.travellersList[i]);localStorageService.set("diseaseList",$scope.diseaseList),localStorageService.set("selectedTravellersForTravel",$scope.travellersList),localStorageService.set("selectedTravellerArray",$scope.travellersList);var sumInsuredDocId=$scope.globalLabel.documentType.travelSumInsuredList;if(getDocUsingId(RestAPI,sumInsuredDocId,function(suminsuredList){null!=suminsuredList&&"undefined"!=String(suminsuredList)?localStorageService.set("SumInsuredList",suminsuredList.SumInsured):localStorageService.set("SumInsuredList",void 0)}),null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){var userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}$scope.travelResponse.encryptedQuoteId&&($scope.UNIQUE_QUOTE_ID_ENCRYPTED=$scope.travelResponse.encryptedQuoteId),localStorageService.set("quoteReset",$scope.quote),localStorageService.set("travelQuoteInputParamatersReset",$scope.quote),localStorageService.set("travelDetailsReset",$scope.travelDetails),localStorageService.set("isDiseasedForTravelReset",$scope.isDiseased),localStorageService.set("selectedDiseaseReset",$scope.selectedDisease),localStorageService.set("diseaseListReset",$scope.diseaseList),localStorageService.set("selectedTravellersForTravelReset",$scope.travellersList),localStorageService.set("selectedTravellerArrayReset",$scope.travellersList),localStorageService.set("TRAVEL_UNIQUE_QUOTE_ID",$scope.travelResponse.QUOTE_ID),localStorageService.set("TRAVEL_UNIQUE_QUOTE_ID_ENCRYPTED",$scope.UNIQUE_QUOTE_ID_ENCRYPTED),redirectURL=redirectURL.replace(urlPattern,"/travelResult"),$window.location=redirectURL}else $rootScope.P365Alert("Policies365",$scope.globalLabel.validationMessages.generalisedErrMsg,"Ok")})}else if(6==$scope.selectedBusinessLineId){if($rootScope.loaderContent={businessLine:"6",header:"CI Insurance",desc:$sce.trustAsHtml($scope.globalLabel.applicationLabels.criticalIllness.proverbResult)},$rootScope.title=$scope.globalLabel.policies365Title.ciResultQuote,localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId),$scope.PremiumFrequencyList=defaultCriticalIllnessQuoteParam.premiumFrequencyList,localStorageService.set("selectedBusinessLineId",6),localStorageService.set("criticalIllnessQuoteInputParamaters",$scope.quote),localStorageService.set("criticalIllnessPersonalDetails",$scope.personalDetails),localStorageService.set("CRITICAL_ILLNESS_UNIQUE_QUOTE_ID",$scope.criticalIllnessResponse.QUOTE_ID),localStorageService.set("premiumFrequencyList",$scope.PremiumFrequencyList),null==localStorageService.get("userLoginInfo")||"undefined"==String(localStorageService.get("userLoginInfo"))){userLoginInfo={username:void 0,mobileNumber:void 0,status:!1};localStorageService.set("userLoginInfo",userLoginInfo)}$scope.checkForRedirect()}}}),$scope.callForShareVehicleQuote=function(){"new"==$location.search().policyType&&($scope.quoteParam.policyType="new"),$location.search().regYear&&($scope.vehicleInfo.regYear=$location.search().regYear);var quoteUserInfoCookie=localStorageService.get("quoteUserInfo");null!=quoteUserInfoCookie&&(messageIDVar=void 0!=quoteUserInfoCookie.messageId||null!=quoteUserInfoCookie.messageId||""!=quoteUserInfoCookie.messageId?quoteUserInfoCookie.messageId:"");var todayDate=new Date,formatedTodaysDate=("0"+(todayDate.getMonth()+1).toString()).substr(-2)+"/"+("0"+todayDate.getDate().toString()).substr(-2)+"/"+todayDate.getFullYear().toString();if(getPolicyStatusList(formatedTodaysDate),console.log("websiteVisitedOnce flag is: ",localStorageService.get("websiteVisitedOnce")),localStorageService.get("websiteVisitedOnce")){var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")?$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)):2==$scope.selectedBusinessLineId&&localStorageService.get("bikeQuoteInputParamaters")&&$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)),$scope.getRegPlaceListUsingIPCity(cityName,function(){if($rootScope.vehicleInfo&&!(null!=$rootScope.vehicleInfo.registrationPlace&&void 0!=$rootScope.vehicleInfo.registrationPlace||void 0!=localStorageService.get("registrationPlaceUsingIP")&&0!=localStorageService.get("registrationPlaceUsingIP").rtoStatus)){var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";$scope.getRegPlaceListUsingIPCity(cityName,function(){$scope.defaultMetroList=localStorageService.get("defaultMetroCityList")})}$location.search().registrationNumber?$scope.getRegNumber($location.search().registrationNumber):$scope.shareQuoteTemplateFunction()})}else{var popularRTOParam={popularRTOList:"Y"};getDocUsingParam(RestAPI,$scope.globalLabel.transactionName.getPopularRTO,popularRTOParam,function(callbackMetro){callbackMetro.data?(localStorageService.set("defaultMetroCityList",callbackMetro.data),$scope.defaultMetroList=callbackMetro.data):(localStorageService.set("defaultMetroCityList",commonResultLabels.popularRTOList.data),$scope.defaultMetroList=commonResultLabels.popularRTOList.data);var cityName=null!==localStorageService.get("cityDataFromIP")?localStorageService.get("cityDataFromIP").cityName:"Mumbai";3==$scope.selectedBusinessLineId&&localStorageService.get("carQuoteInputParamaters")?$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("carQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)):2==$scope.selectedBusinessLineId&&localStorageService.get("bikeQuoteInputParamaters")&&$rootScope.vehicleInfo&&(null!=$rootScope.vehicleInfo.selectedRegistrationObject||"undefined"!=String($rootScope.vehicleInfo.selectedRegistrationObject)?cityName=$rootScope.vehicleInfo.selectedRegistrationObject.city:($scope.vehicleInfo=localStorageService.get("bikeQuoteInputParamaters").vehicleInfo,cityName=$scope.vehicleInfo.city)),$scope.getRegPlaceListUsingIPCity(cityName,function(){}),$scope.shareQuoteTemplateFunction()})}}})}]),angular.module("dcpResult",["CoreComponentApp","LocalStorageModule"]).controller("dcpResultController",["$scope","$controller","$rootScope","$window","$filter","RestAPI","localStorageService","$timeout","$location","$interval","$http","$sce","$q",function($scope,$controller,$rootScope,$window,$filter,RestAPI,localStorageService,$timeout,$location,$interval,$http,$sce,$q){setTimeout(function(){$scope.main=function(){if(agencyPortalEnabled){if($location.search().lob&&0!=$location.search().lob){var lob=$location.search().lob;localStorage.setItem("lob_array",lob),$scope.selectedBusinessLineId=parseInt(lob[0]),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId)}if($location.search().lob&&0==$location.search().lob){$rootScope.apAdmin=!0,$scope.selectedBusinessLineId=3;lob=$location.search().lob;localStorage.setItem("lob_array",lob),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId)}}else $location.search().lob&&($scope.selectedBusinessLineId=parseInt($location.search().lob),localStorageService.set("selectedBusinessLineId",$scope.selectedBusinessLineId));$rootScope.parent_id=$location.search().recordId,$rootScope.parent_type=$location.search().moduleName,$location.search().orgName&&(organizationName=$location.search().orgName),0==$rootScope.accessDenied&&(localStorageService.get("selectedBusinessLineId")?($scope.selectedBusinessLineId=localStorageService.get("selectedBusinessLineId"),$scope.$broadcast("onClickTabID",$scope.selectedBusinessLineId)):(localStorage.setItem("selectedBusinessLineId",3),localStorageService.set("selectedBusinessLineId",3),$scope.$broadcast("onClickTabID",3)))},$scope.$broadcast("invokeGetQuoteTemplate",{}),$scope.main(),$controller("headerNavigationController",{$scope:$scope})},500)}]),angular.module("campaign",["LocalStorageModule"]).controller("campaignController",function($rootScope,$scope,$http,localStorageService,$location,RestAPI){$rootScope.campaignId=$location.search().campaignId,$rootScope.source=$location.search().source}),angular.module("iquoteNavigation",["LocalStorageModule"]).controller("iquoteNavigationController",["$scope","$rootScope","$window","$filter","RestAPI","localStorageService","$timeout","$location","$interval","$http","$sce","$q",function($scope,$rootScope,$window,$filter,RestAPI,localStorageService,$timeout,$location,$interval,$http,$sce,$q){$scope.isIquoteEnabled=!1,$scope.isIPOSEnabled=!1,$rootScope.loading=!0;var rampRedirectURL=!1,last_visited_proposal_id="",last_visited_quote_id="",defaultLOB=3;if($location.search().source&&(sourceOrigin=$location.search().source,deviceIdOrigin=$location.search().source),console.log("sourceOrigin from iquote navigation is: ",$location.search().source),$location.search().lob&&"agency"!=sourceOrigin&&(defaultLOB=$location.search().lob),$location.search().rampUniqueId&&$location.search().url&&(rampRedirectURL=!0,localStorage.setItem("rampUniqueId",$location.search().rampUniqueId),localStorage.setItem("rampRedirectURL",$location.search().url)),$location.search().userId&&($scope.quoteUserInfo={},$scope.quoteUserInfo.firstName="",$scope.quoteUserInfo.emailId=$location.search().userId,$scope.quoteUserInfo.mobileNumber="",localStorageService.set("quoteUserInfo",$scope.quoteUserInfo)),$rootScope.iposRedirectionURL="",$rootScope.iquoteRedirectionURL="",$rootScope.iquoteRequestParam="",$rootScope.iposRequestParam="",$rootScope.agencyPortalEnabled=agencyPortalEnabled,console.log("$rootScope.agencyPortalEnabled flag is: ",$rootScope.agencyPortalEnabled),$rootScope.agencyPortalEnabled&&($location.search().lob&&($rootScope.apAdmin=!0,localStorage.setItem("lob_array",$location.search().lob)),console.log("$location.search().source in step 1 is : ",$location.search().source),$location.search().source&&"CarEager"==$location.search().source&&localStorage.setItem("carEagerUniqueId",$location.search().UniqueId)),$location.search().source&&"desi_skill"==$location.search().source){localStorage.setItem("desiSkillUniqueId",$location.search().desiSkillUniqueId),localStorage.setItem("desiSkillAgentId",$location.search().agentId),localStorage.setItem("desiSkillUserId",$location.search().userId);var agencyIdVar="";agencyIdVar=$location.search().agencyId?$location.search().agencyId:"AGENCY133-BRANCH101",localStorage.setItem("desiSkillAgencyId",agencyIdVar),2==$location.search().lob||"2"==$location.search().lob?(last_visited_quote_id="DefaultBikeQuote",last_visited_lob_id="2"):3!=$location.search().lob&&"3"!=$location.search().lob||(last_visited_quote_id="DefaultCarQuote",last_visited_lob_id="3"),$scope.isIquoteEnabled=!0;agencyIdVar="";agencyIdVar=$location.search().agencyId?$location.search().agencyId:"AGENCY133-BRANCH101",$rootScope.iquoteRequestParam={docId:last_visited_quote_id,lob:last_visited_lob_id,agencyId:agencyIdVar,userId:$location.search().userId,createLeadFlag:$location.search().createLeadFlag,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName,userId:$location.search().userId},$rootScope.iquoteRedirectionURL="/sharefromAPI",$location.path("/sharefromAPI").search($rootScope.iquoteRequestParam)}var leadMessageId=$location.search().messageId;if(leadMessageId)getListFromDB(RestAPI,leadMessageId,"leadProfileRequest","findAppConfig",function(leadProfileRes){if(1e3==leadProfileRes.responseCode){if(leadProfileRes.data.length>0){if(leadProfileRes.data[0].latestProposalId){if(last_visited_proposal_id=leadProfileRes.data[0].latestProposalId,last_visited_lob_id=String(leadProfileRes.data[0].latestProposalBusinessLineId),leadProfileRes.data[0].latestQUOTE_ID)last_visited_quote_id=leadProfileRes.data[0].latestQUOTE_ID;else if(last_visited_lob_id){for(var i=0;i<defaultQuoteIds.length;i++)if(last_visited_lob_id==String(defaultQuoteIds[i].lob)){last_visited_quote_id=defaultQuoteIds[i].quoteId;break}}else for(i=0;i<defaultQuoteIds.length;i++)if(defaultLOB==String(defaultQuoteIds[i].lob)){last_visited_quote_id=defaultQuoteIds[i].quoteId;break}}else if(last_visited_lob_id=String(leadProfileRes.data[0].latestQuoteBusinessLineId),leadProfileRes.data[0].latestQUOTE_ID)last_visited_quote_id=leadProfileRes.data[0].latestQUOTE_ID;else if(last_visited_lob_id){for(i=0;i<defaultQuoteIds.length;i++)if(last_visited_lob_id==defaultQuoteIds[i].lob){last_visited_quote_id=defaultQuoteIds[i].quoteId;break}}else for(i=0;i<defaultQuoteIds.length;i++)if(defaultLOB==String(defaultQuoteIds[i].lob)){last_visited_quote_id=defaultQuoteIds[i].quoteId;break}}else for(i=0;i<defaultQuoteIds.length;i++)if(defaultLOB==String(defaultQuoteIds[i].lob)){last_visited_quote_id=defaultQuoteIds[i].quoteId,last_visited_lob_id=String(defaultQuoteIds[i].lob);break}if($location.search().rampUniqueId&&$location.search().url){if(rampRedirectURL=!0,localStorage.setItem("rampUniqueId",$location.search().rampUniqueId),localStorage.setItem("rampRedirectURL",$location.search().url),$location.search().quote_id)"CAR"==(lob=(last_visited_quote_id=$location.search().quote_id).substr(0,3))?last_visited_lob_id="3":"BIKE"==lob&&(last_visited_lob_id="2");$scope.isIquoteEnabled=!0,$rootScope.iquoteRequestParam={docId:last_visited_quote_id,lob:last_visited_lob_id,createLeadFlag:$location.search().createLeadFlag,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName,userId:$location.search().userId},$rootScope.iquoteRedirectionURL="/sharefromAPI"}}else{for(i=0;i<defaultQuoteIds.length;i++)if(defaultLOB==String(defaultQuoteIds[i].lob)){last_visited_quote_id=defaultQuoteIds[i].quoteId,last_visited_lob_id=String(defaultQuoteIds[i].lob);break}$location.search().quote_id&&(last_visited_quote_id=$location.search().quote_id)}var lob;(console.log("last_visited_quote_id.length is: ",last_visited_quote_id.length),last_visited_proposal_id&&!rampRedirectURL)?($scope.isIPOSEnabled=!0,$rootScope.iposRedirectionURL="/proposalresdata",$rootScope.iposRequestParam={proposalId:last_visited_proposal_id,messageId:$location.search().messageId,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName}):($scope.isIquoteEnabled=!0,console.log("$location.search().source is ::",$location.search().source),$location.search().rampUniqueId&&$location.search().url&&(rampRedirectURL=!0,localStorage.setItem("rampUniqueId",$location.search().rampUniqueId),localStorage.setItem("rampRedirectURL",$location.search().url),$location.search().quote_id&&("CAR"==(lob=(last_visited_quote_id=$location.search().quote_id).substr(0,3))?last_visited_lob_id="3":"BIKE"==lob&&(last_visited_lob_id="2"))));0==last_visited_lob_id||"0"==last_visited_lob_id?($rootScope.iquoteRequestParam={docId:last_visited_quote_id,lob:last_visited_lob_id,messageId:$location.search().messageId,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName,userId:$location.search().userId},$rootScope.iquoteRedirectionURL="/professionalShareAPI"):($rootScope.iquoteRequestParam={docId:last_visited_quote_id,LOB:last_visited_lob_id,messageId:$location.search().messageId,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName,userId:$location.search().userId},$rootScope.iquoteRedirectionURL="/sharefromAPI"),$rootScope.mainTabsMenu=[{url:$rootScope.iquoteRedirectionURL,requestParam:$rootScope.iquoteRequestParam,className:"iQuoteTab tabs wp_border32",name:"iquote",title:"iQuote",active:!$scope.isIPOSEnabled},{url:$rootScope.iposRedirectionURL,requestParam:$rootScope.iposRequestParam,className:"iPosTab tabs wp_border32",name:"ipos",title:"iPos",active:$scope.isIPOSEnabled}],console.log("tab menus in step 1 is:",$rootScope.mainTabsMenu),$scope.isIPOSEnabled?($rootScope.isActiveTab="ipos",$location.path("/proposalresdata").search($rootScope.iposRequestParam)):$scope.isIPOSEnabled||($rootScope.isActiveTab="iquote","/sharefromAPI"==$rootScope.iquoteRedirectionURL?$location.path("/sharefromAPI").search($rootScope.iquoteRequestParam):"/professionalShareAPI"==$rootScope.iquoteRedirectionURL&&$location.path("/professionalShareAPI").search($rootScope.iquoteRequestParam))});else{$scope.isIquoteEnabled=!0,$rootScope.iquoteRedirectionURL="/sharefromAPI";for(var i=0;i<defaultQuoteIds.length;i++)defaultLOB==String(defaultQuoteIds[i].lob)&&(last_visited_quote_id=defaultQuoteIds[i].quoteId,last_visited_lob_id=String(defaultQuoteIds[i].lob));if($location.search().rampUniqueId&&$location.search().url){if(rampRedirectURL=!0,localStorage.setItem("rampUniqueId",$location.search().rampUniqueId),localStorage.setItem("rampRedirectURL",$location.search().url),$location.search().quote_id){var lob=(last_visited_quote_id=$location.search().quote_id).substr(0,3);"CAR"==lob?last_visited_lob_id="3":"BIKE"==lob&&(last_visited_lob_id="2")}$scope.isIquoteEnabled=!0}$rootScope.iquoteRequestParam={docId:last_visited_quote_id,lob:last_visited_lob_id,createLeadFlag:$location.search().createLeadFlag,leaddetails:$location.search().leaddetails,orgName:$location.search().orgName,userId:$location.search().userId},$rootScope.mainTabsMenu=[{url:$rootScope.iquoteRedirectionURL,requestParam:$rootScope.iquoteRequestParam,className:"iQuoteTab tabs wp_border32",name:"iquote",title:"iQuote",active:$scope.isIquoteEnabled},{url:$rootScope.iposRedirectionURL,requestParam:$rootScope.iposRequestParam,className:"iPosTab tabs wp_border32",name:"ipos",title:"iPos",active:!$scope.isIquoteEnabled}],console.log("tab menus in step 2 is:",$rootScope.mainTabsMenu),$location.path("/sharefromAPI").search($rootScope.iquoteRequestParam)}}]),angular.module("iquoteTabNavigation",["LocalStorageModule"]).controller("iquoteTabNavigationController",["$scope","$rootScope","$window","$filter","RestAPI","localStorageService","$timeout","$location","$interval","$http","$sce","$q",function($scope,$rootScope,$window,$filter,RestAPI,localStorageService,$timeout,$location,$interval,$http,$sce,$q){$rootScope.iquoteTabNavigationHTML=wp_path+"buy/common/html/iquoteTabNavigation.html",$rootScope.onClickIquoteTab=function(tab){if($rootScope.isActiveTab!=tab.name){if("ipos"==tab.name){for(var i=0;i<$rootScope.mainTabsMenu.length;i++)"ipos"==$rootScope.mainTabsMenu[i].name?($rootScope.mainTabsMenu[i].active=!0,$rootScope.isActiveTab=tab.name):$rootScope.mainTabsMenu[i].active=!1;tab.url?$location.path(tab.url).search(tab.requestParam):$location.path("/proposalNotAvailable")}else if("iquote"==tab.name){for(i=0;i<$rootScope.mainTabsMenu.length;i++)"iquote"==$rootScope.mainTabsMenu[i].name?($rootScope.isActiveTab=tab.name,$rootScope.mainTabsMenu[i].active=!0):$rootScope.mainTabsMenu[i].active=!1;$location.path(tab.url).search(tab.requestParam)}}else console.log("current tab is clicked")}}]),angular.module("policies365").controller("paymentMobileController",["$scope","$window","$rootScope","$location","$http","RestAPI","localStorageService","$timeout","$routeParams",function($scope,$window,$rootScope,$location,$http,RestAPI,localStorageService,$timeout,$routeParams){$rootScope.title="Routing to Payment Gateway";var response=JSON.parse($location.search().responseParams);$scope.paymentServiceResponse=response,localStorage.setItem("selectedBusinessLineId",response.businessLineId),localStorage.setItem("isFromMobileApp",!0),$timeout(function(){$scope.paymentForm.setAction($scope.paymentServiceResponse.paymentURL),$scope.paymentForm.commit()},100)}]);